{"version":3,"sources":["config/i18n.js","components/shared/Loading.tsx","components/shared/Button.tsx","components/shared/TextField.tsx","services/config.js","redux/action-helpers.js","services/routes.js","config/crypto.js","services/stuffier.js","redux/user/actions.js","redux/user/constants.js","components/main/Login.tsx","config/options.js","components/shared/Menu.tsx","components/sections/Apps.tsx","components/sections/Chat.js","services/stuff.js","redux/categories/actions.js","redux/categories/constants.js","redux/subcategories/actions.js","redux/subcategories/constants.js","components/content/AddCategory.tsx","components/shared/DropDown.tsx","components/shared/types.ts","components/shared/WarningMessage.tsx","components/helpers/StuffHelper.ts","redux/products/constants.js","redux/products/actions.js","components/content/AddProduct.tsx","redux/user-requests/actions.js","redux/user-requests/constants.js","components/admin/Admin.tsx","services/cloudinary-helper.js","components/shared/Media.jsx","components/content/Product.tsx","components/apps/Buy.tsx","components/content/CategoryPage.tsx","components/content/FeedRow.tsx","redux/friends/actions.js","redux/friends/constants.js","redux/feed/actions.js","redux/feed/constants.js","components/content/Content.tsx","services/charts.js","components/apps/Charts.tsx","components/shared/SearchBar.tsx","redux/exchange-requests/actions.js","redux/exchange-requests/constants.js","components/apps/Exchange.tsx","services/exchange.js","components/content/Friends.tsx","components/helpers/UserHelper.ts","redux/loan-requests/actions.js","redux/loan-requests/constants.js","components/apps/Loan.tsx","services/loan.js","components/helpers/DownloadHelper.ts","components/content/Products.tsx","components/apps/Support.tsx","components/apps/Tickets.tsx","components/apps/Test.tsx","components/helpers/CovidHelper.tsx","services/covid.js","components/apps/Covid.tsx","components/main/MainRoutes.tsx","components/sections/Footer.tsx","components/sections/Header.tsx","redux/constants.js","components/sections/Menu.tsx","components/main/Main.tsx","redux/friends-requests/actions.js","redux/friends-requests/constants.js","redux/pending-products/actions.js","redux/pending-products/constants.js","components/main/FetchData.tsx","components/main/Register.tsx","components/main/Auth.tsx","components/main/Routes.tsx","App.tsx","redux/reducers.js","redux/user/reducer.js","redux/user-requests/reducer.js","redux/categories/reducer.js","redux/friends/reducer.js","redux/friends-requests/reducer.js","redux/products/reducer.js","redux/subcategories/reducer.js","redux/exchange-requests/reducer.js","redux/pending-products/reducer.js","redux/loan-requests/reducer.js","redux/feed/reducer.js","serviceWorker.js","index.js"],"names":["i18n","use","initReactI18next","init","lng","resources","en","es","fallbackLng","debug","process","ns","defaultNS","keySeparator","interpolation","escapeValue","formatSeparator","react","wait","err","t","console","info","language","Loading","this","props","size","message","getSize","className","type","color","height","width","Component","Button","disabled","text","onClick","event","TextField","name","placeholder","value","onChange","reference","min","max","range","ref","target","config","cloudinary","url","cloudName","apiKey","apiSecret","cloudinary_headers","fb","appId","headers","server","makeStandardActionCreator","ACTION_TYPE","payload","meta","makeApiActionCreator","apiCall","successActionCreator","args","dispatch","apply","then","data","Promise","resolve","makePaginatedApiActionCreator","requestActionCreator","undefined","dispatchResultsAndFetchNextIfPresent","next","axios","get","routes","category","add","list","detail","id","JSON","stringify","parseInt","exist","subcategory","stuff","addStuffiersStuff","addStuff","listDetail","ids","listForStuffier","id_stuffier","listStuffiers","ids_stuffier","detailFromCategories","listPendingPics","updateStuff","_id","user","email","friends","email_stuffier","loginUser","password","registerUser","lastId","requestToBeFriend","friendsRequest","friendRequestDetail","id_friend","deleteFriendRequest","friend","userRequests","deleteUserRequest","exchange","request","deleteRequest","loan","covid","default","all","countries","country","crypto","encrypt","clear","CryptoJS","SHA256","toString","enc","Hex","getStuffiers","length","registerStuffier","res","Object","values","post","email_friend","id_user","delete","addFriend","userFetched","fetchUser","getStuffier","userRegistered","userPictureAdded","Login","state","loginFB","setMessage","response","localStorage","setItem","catch","responseFacebook","addUserPicture","picture","setState","autoLoad","fields","scope","callback","mapDispatchProps","facebookUser","loginStuffier","connect","withRouter","options","label","Menu","isOpen","open","toggle","children","Apps","lang","changeLang","changeLanguage","renderCurrentLanguage","to","map","option","key","withTranslation","Chat","messageList","author","getStuffList","getListStuff","getCategories","token","cancelToken","getSubCategories","addStuffStuffier","id_stuff","getSearchResults","searchText","products","results","toLowerCase","forEach","c","includes","push","s","keys","p","getProductResults","filter","product","categoriesFetched","fetchCategories","addCategory","subCategoriesFetched","fetchSubCategories","addSubCategory","TYPE","AddCategory","isLoading","categories","subcategories","tempObjects","createValue","Number","newCategory","finally","newSubCategory","renderValues","typeToRender","objects","object","prevProps","otherLabel","otherType","DropDown","valueSelected","updateChange","find","objectSelected","index","WarningMessageType","WarningMessage","mapStuff","isProductsEmpty","productsMap","row","getProductsList","flat","findProduct","idProduct","productFetched","productsFetched","productUpdated","productAdded","fetchProduct","updateProduct","cost","put","AddProduct","status","EMPTY","file_name","stuffStuffier","productsByCategories","createProduct","addProduct","SUCCESSFUL","ERROR","clearState","getMessage","isEmpty","updateCategory","renderProducts","updateSubcategory","addRegisteredProduct","history","getStuffFromCategories","productId","i","getProductFromProducts","setProduct","fileName","error","reject","fetchUserRequests","Admin","executeRequest","isAccepted","alert","renderRequests","first_name","last_name","renderPendingProducts","pendingProducts","log","existImage","publicId","Media","imageUrl","setUrl","isProduct","renderImage","format","f","fetchFormat","crop","renderVideo","isVideo","Product","updateCost","updatedCost","renderCost","hideOfferButton","showCost","Buy","_isMounted","location","match","params","CategoryPage","categoryId","FeedRow","getProductType","feedPost","friend_firstName","friend_lastName","exchangeTo","pathname","friend_id","loanTo","buyTo","renderMessage","friendsFetched","friendProductsFetched","feedFetched","Content","feed","getFeed","fetchFriendsProducts","fetchFeed","fullFriends","stuffiers_stuff","getStuffiersList","friendsFilled","friendsProducts","getFriendProducts","date","_created","sortBy","generateFeed","barChartData","uv","pv","amt","treemapChartData","pieChartData01","pieChartData02","radialChartData","fill","Charts","margin","top","right","left","bottom","dataKey","strokeDasharray","padding","stroke","activeDot","r","x1","y1","x2","y2","offset","stopColor","stopOpacity","fillOpacity","aspectRatio","cx","cy","outerRadius","innerRadius","unit","cursor","startAngle","endAngle","angleAxisId","position","background","iconSize","layout","verticalAlign","align","SearchBar","source","node","handleClickOutside","domNode","ReactDOM","findDOMNode","contains","fetchResults","selectProduct","cancel","CancelToken","getLinkTo","result","renderResultName","document","addEventListener","removeEventListener","renderResults","requestExchange","requestExchanges","requestDelete","Exchange","userProducts","selectedProduct","exchangeRequest","idOwner","renderProduct","idStuff","idRequestor","idRequestorStuff","id_friend_stuff","Friends","textField","React","createRef","requests","emailToRequest","textfield","executeStatus","promises","WARNING","handleRequest","collection","friendsRequests","requestLoan","fetchLoans","requestDeleteLoan","Loan","loanRequest","downloadExcel","word","charAt","toUpperCase","slice","arrayOfCategory","getDataToExport","worksheet_book","XLSX","utils","book_new","worksheet","aoa_to_sheet","book_append_sheet","writeFile","Products","requestedProducts","generateReport","executeDeleteExchange","isLoan","deleteRequestLoan","exchangeRequests","owner","requestor","isUserRequestor","isUserOwner","rejectText","ownerProduct","requestorProduct","renderLoans","loanRequests","loanIds","req","exchangeIds","exchangeFriendIds","getProductsFromIds","mapIds","uniq","deleteExchangeRequest","deleteLoanRequest","Support","src","title","Tickets","file","progressValue","files","stopPropagation","preventDefault","Tesseract","recognize","progress","progressUpdate","getElementById","innerHTML","packet","querySelector","onSubmit","handleSubmit","handleChange","Test","authenticate","getStuff","item","indexOf","proto","rabbit","jumps","__proto__","eats","pa","propertyIsEnumerable","hasOwnProperty","myFlat","array","myFlatTemp","Array","isArray","dom","spans","getElementsByTagName","debounce","time","timeout","clearTimeout","setTimeout","split","reverse","join","reduce","acc","test","update","body","v","some","counter","chars","myMap","sortedWord","sort","initValue","decimal","roman","currentVal","thousands","Math","floor","repeat","hundreds","decimals","items","age","k","pair","x","a","reverseStuff","orderArray","hasProvince","Province","hasCity","City","createMap","provinces","newRow","getUniqueCities","province","self","getCityData","city","manageCountryData","confirmedInc","Confirmed","dates","moment","Date","lastRow","increment","getProvinces","usMap","getCountry","Covid","defaultCountrySlug","menu","countryData","countrySelected","Country","provinceData","provinceSelected","cities","citySelected","getCountryInfo","sorted","Slug","prevState","isEqual","managed","countryText","countryHasProvince","countryHasCity","renderChart","MainRoutes","exact","path","component","render","Footer","href","rel","Header","handleLogout","logout","toggleMenu","style","display","cssText","exchangeClass","window","outerWidth","admin","removeItem","renderCategories","newTo","Main","alt","friendsRequestsFetched","pendingProductsFetched","FetchData","fetchData","fetchFriends","fetchProducts","fetchFriendsRequests","fetchExchangeRequests","fetchLoanRequests","fetchPendingProducts","adminPromises","getFriends","extraStuff","mapCostToProducts","getProductsMap","userId","Register","firstName","lastName","enableButton","Auth","getMessageType","getItem","msg","Routes","App","store","appReducer","combineReducers","action","rootReducer","Boolean","hostname","middleware","thunk","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","require","createStore","reducersApp","applyMiddleware","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9f8ea07e.chunk.js","sourcesContent":["import i18n from 'i18next';\r\nimport { initReactI18next } from 'react-i18next';\r\n\r\nimport en from '../locale/en';\r\nimport es from '../locale/es';\r\n\r\ni18n\r\n  .use(initReactI18next)\r\n  .init({\r\n    lng: 'en',\r\n    resources: {\r\n      en,\r\n      es,\r\n    },\r\n    fallbackLng: 'en',\r\n    debug: process.env.NODE_ENV !== 'production',\r\n    ns: ['translations'],\r\n    defaultNS: 'translations',\r\n    keySeparator: false,\r\n    interpolation: {\r\n      escapeValue: false,\r\n      formatSeparator: ',',\r\n    },\r\n    react: {\r\n      wait: true,\r\n    },\r\n  }, (err, t) => {\r\n    if (err) {\r\n      console.info('i18n.language', i18n.language);\r\n    }\r\n  });\r\n\r\nexport default i18n;\r\n","import React, { Component } from 'react';\r\nimport ReactLoading from 'react-loading';\r\nimport { LoadingProps } from './types';\r\n\r\nimport './Loading.scss';\r\n\r\nclass Loading extends Component<LoadingProps, any> {\r\n  getSize(): number {\r\n    switch(this.props.size) {\r\n      case 'sm':\r\n        return 8;\r\n      case 'md':\r\n        return 16;\r\n      case 'lg':\r\n        return 32;\r\n      case 'xl':\r\n        return 64;\r\n      default:\r\n        return 8;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { message } = this.props;\r\n    const size = this.getSize();\r\n\r\n    return (\r\n      <div className=\"stuffie-loading\">\r\n        <ReactLoading type=\"spin\" color=\"#00f\" height={size} width={size} />\r\n        {message && (<div className=\"stuffie-loading__message\">{message}</div>)} \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Loading;\r\n ","import React, { Component } from 'react';\r\nimport { ButtonProps } from './types';\r\nimport './Button.scss';\r\n\r\nclass Button extends Component<ButtonProps, any> {\r\n  render() {\r\n    const { disabled, type, text, onClick } = this.props;\r\n\r\n    if(onClick) {\r\n      return (<button className=\"button\" type={type || \"button\"} onClick={event => event && onClick()} disabled={disabled}>{text}</button>); \r\n    }\r\n\r\n    return <button className=\"button\" type={type || \"button\"} disabled={disabled}>{text}</button>\r\n  }\r\n}\r\n\r\nexport default Button;\r\n","import React, { Component } from 'react';\r\nimport { TextFieldProps } from './types';\r\nimport './TextField.scss';\r\n\r\nclass TextField extends Component<TextFieldProps> {\r\n  render() {\r\n    const { name, placeholder, type, value, onChange, disabled, reference, min, max } = this.props;\r\n    let range = null;\r\n\r\n    if (min || max) {\r\n      range = { min, max };\r\n    }\r\n\r\n    return (\r\n      <div className=\"textfield\">\r\n        { value !== null && !onChange &&\r\n          <input\r\n            type={type}\r\n            name={name}\r\n            placeholder={placeholder || ''}\r\n            value={value}\r\n            disabled={disabled}\r\n            ref={reference}\r\n            {...range}\r\n          />\r\n        }\r\n        { onChange &&\r\n          <input\r\n            type={type}\r\n            name={name}\r\n            placeholder={placeholder || ''}\r\n            disabled={disabled}\r\n            onChange={event => onChange(event.target.value)}\r\n            ref={reference}\r\n            value={value}\r\n            {...range}\r\n          />\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TextField;\r\n","const config = {\r\n  cloudinary: {\r\n    url: 'https://res.cloudinary.com/reyesrico/image/upload/c_scale,f_auto,w_100/v1',\r\n    cloudName: 'reyesrico',\r\n    apiKey: '981789986692969',\r\n    apiSecret: 'xxQPfLvWpN_iIlt1RfMZnB3jRw0'\r\n  },\r\n  cloudinary_headers: {\r\n    'cache-control': 'no-cache',\r\n    'x-apikey': '981789986692969'\r\n  },\r\n  fb: {\r\n    appId: \"1458399831108421\"\r\n  },\r\n  headers: {\r\n    'cache-control': 'no-cache',\r\n    'x-apikey': '5c932ad1cac6621685acc11e' //'20596935c72a29593312b65ac2075c86eb1ac',\r\n  },\r\n  server: 'https://stuffie-98b2.restdb.io/rest/'\r\n};\r\n\r\nexport default config;\r\n","import axios from 'axios';\n\n// Inspired by https://github.com/acdlite/flux-standard-action and\n// https://redux-actions.js.org/docs/api/createAction.html\n\n// Returns an action creator that stores the first argument (probably an object, so you can store multiple key-values\n// and destructure) as the action.payload. And the second argument as action.meta; meta can be useful to provide the\n// reducer with request parameters that aren't included in a payload returned by the server, for example.\nexport const makeStandardActionCreator = (ACTION_TYPE) => {\n  return (payload, meta) => ({\n    meta,\n    payload,\n    type: ACTION_TYPE,\n  });\n};\n\n// TODO: Make all to use this for args!!\n// CREATE FUNCTION TO RECEIVE ARRAY OF ARGS AND NOT ONLY ONE\n// To make action creators that make an API call and dispatch an action creator on success with the response.\n// Doesn't handle dispatching for errors.\nexport const makeApiActionCreator = (apiCall, successActionCreator) => {\n  return (...args) => dispatch => {\n    return apiCall.apply(this, [...args]).then(({ data }) => {\n      dispatch(successActionCreator(data, {...args}));\n      return Promise.resolve(data);\n    });\n  };\n};\n\nexport const makePaginatedApiActionCreator = (apiCall, successActionCreator, requestActionCreator) => {\n  return args => (dispatch) => {\n    const dispatchResultsAndFetchNextIfPresent = ({ data }) => {\n      dispatch(successActionCreator(data, args));\n      if (data.next) {\n        return axios.get(data.next).then(dispatchResultsAndFetchNextIfPresent);\n      } else {\n        return Promise.resolve({ data });\n      }\n    };\n\n    if (requestActionCreator) {\n      dispatch(requestActionCreator(undefined, args));\n    }\n    return apiCall(args).then(dispatchResultsAndFetchNextIfPresent);\n  };\n};\n","import config from './config';\r\n\r\nconst routes = {\r\n  category: {\r\n    add: () => `${config.server}categories`,\r\n    list: () => `${config.server}categories`,\r\n    detail: id => `${config.server}categories?q=${JSON.stringify({ id: parseInt(id) })}`\r\n  },\r\n  cloudinary: {\r\n    exist: () => `https://${config.cloudinary.apiKey}:${config.cloudinary.apiSecret}@api.cloudinary.com/v1_1/${config.cloudinary.cloudName}/resources/image`\r\n  },\r\n  subcategory: {\r\n    add: () => `${config.server}subcategories`,\r\n    list: () => `${config.server}subcategories`,\r\n    detail: id => `${config.server}subcategories?q=${JSON.stringify({ id: parseInt(id) })}`\r\n  },\r\n  stuff: {\r\n    addStuffiersStuff: () => `${config.server}stuffiers-stuff`,\r\n    addStuff: () => `${config.server}stuff`,\r\n    detail: id => `${config.server}stuff?q=${JSON.stringify({ id: parseInt(id) })}`,\r\n    listDetail: ids => `${config.server}stuff?q={\"$or\":${JSON.stringify(ids)}}&metafields=true`,\r\n    listForStuffier: id_stuffier => `${config.server}stuffiers-stuff?q=${JSON.stringify({ id_stuffier })}`,\r\n    listStuffiers: ids_stuffier => `${config.server}stuffiers-stuff?q={\"$or\":${JSON.stringify(ids_stuffier)}}`,\r\n    detailFromCategories: (category, subcategory) => `${config.server}stuff?q={\"$and\":[{\"category\": ${category}}, {\"subcategory\": ${subcategory}}]}`,\r\n    listPendingPics: () =>  `${config.server}stuff?q={\"$or\": [ {\"file_name\": {\"$exists\": false}}, {\"file_name\": \"\"} ]}`,\r\n    updateStuff: (_id) => `${config.server}stuffiers-stuff/${_id}`\r\n  },\r\n  user: {\r\n    detail: email => `${config.server}stuffiers?q=${JSON.stringify({ email })}`,\r\n    listDetail: ids => `${config.server}stuffiers?q={\"$or\":${JSON.stringify(ids)}}`,\r\n    friends: email => `${config.server}friends?q=${JSON.stringify({ email_stuffier: email })}`,\r\n    list: () => `${config.server}stuffiers`,\r\n    loginUser: (email, password) => `${config.server}stuffiers?q=${JSON.stringify({ email, password })}`,\r\n    registerUser: () => `${config.server}stuffiers`,\r\n    lastId: () => `${config.server}stuffiers?q={}&h={\"$fields\": {\"id\":1}, \"$aggregate\":[\"COUNT:\"] }`,\r\n    requestToBeFriend: () => `${config.server}friend-requests`,\r\n    friendsRequest: email_stuffier => `${config.server}friend-requests?q=${JSON.stringify({ email_stuffier })}`,\r\n    friendRequestDetail: (email_stuffier, id_friend) => `${config.server}friend-requests?q=${JSON.stringify({ email_stuffier, id_friend })}`,\r\n    deleteFriendRequest: id => `${config.server}friend-requests/${id}`,\r\n    friend: () => `${config.server}friends`,\r\n    userRequests: () => `${config.server}stuffiers?q={\"request\": true}`,\r\n    deleteUserRequest: id => `${config.server}stuffiers/${id}`\r\n  },\r\n  exchange: {\r\n    request: () => `${config.server}exchange-requests`,\r\n    list: id => `${config.server}exchange-requests?q={ \"$or\": [{ \"id_stuffier\": ${id} } ,{ \"id_friend\": ${id} }] }`,\r\n    deleteRequest: _id => `${config.server}exchange-requests/${_id}`\r\n  },\r\n  loan: {\r\n    request: () => `${config.server}loan-requests`,\r\n    list: id => `${config.server}loan-requests?q={ \"$or\": [{ \"id_stuffier\": ${id} } ,{ \"id_friend\": ${id} }] }`,\r\n    deleteRequest: _id => `${config.server}loan-requests/${_id}`\r\n  },\r\n  covid: {\r\n    default: () => `https://api.covid19api.com/`,\r\n    all: () => `https://api.covid19api.com/all`,\r\n    countries: () => `https://api.covid19api.com/countries`,\r\n    country: country => `https://api.covid19api.com/dayone/country/${country}`,\r\n   //  countryStatus: (country) => `/dayone/country/${country}/status/confirmed/live`\r\n  }\r\n};\r\n\r\nexport default routes;\r\n","import CryptoJS from 'crypto-js';\r\n\r\nconst crypto = {\r\n  encrypt: clear => CryptoJS.SHA256(clear).toString(CryptoJS.enc.Hex)\r\n};\r\n\r\nexport default crypto;\r\n","import axios from 'axios';\r\nimport routes from './routes';\r\nimport config from './config';\r\nimport crypto from '../config/crypto';\r\n\r\nexport const getStuffier = email => (\r\n  axios.get(routes.user.detail(email), { headers: config.headers })\r\n);\r\n\r\nexport const getStuffiers = ids => {\r\n  if (ids.length > 0) {\r\n    return axios.get(routes.user.listDetail(ids), { headers: config.headers })\r\n  }\r\n\r\n  return Promise.resolve({});\r\n}\r\n\r\nexport const getFriends = email => (\r\n  axios.get(routes.user.friends(email), { headers: config.headers })\r\n);\r\n\r\nexport const loginStuffier = (email, password) => (\r\n  axios.get(routes.user.loginUser(email, crypto.encrypt(password)), { headers: config.headers })\r\n);\r\n\r\nexport const getLastStuffierId = () => (\r\n  axios.get(routes.user.lastId(), { headers: config.headers })\r\n);\r\n\r\nexport const registerStuffier = (user) => {\r\n  const password = crypto.encrypt(user.password);\r\n  return getLastStuffierId().then(res => {\r\n    const id = Object.values(res.data)[0] + 1;\r\n    return axios.post(routes.user.registerUser(), { ...user, password, id, request: true }, { headers: config.headers });\r\n  });\r\n};\r\n\r\nexport const getFriendsRequests = (email) => (\r\n  axios.get(routes.user.friendsRequest(email), { headers: config.headers })\r\n);\r\n\r\nexport const requestToBeFriend = (email_friend, id_user) => (\r\n  axios.post(routes.user.requestToBeFriend(), { email_stuffier: email_friend, id_friend: id_user }, { headers: config.headers })\r\n);\r\n\r\nexport const deleteRequest = (email_stuffier, id_friend) => {\r\n  return axios.get(routes.user.friendRequestDetail(email_stuffier, id_friend), { headers: config.headers })\r\n    .then(res => axios.delete(routes.user.deleteFriendRequest(res.data[0]._id), { headers: config.headers }));\r\n}\r\n\r\nexport const addFriend = (email_stuffier, id_friend) => (\r\n  axios.post(routes.user.friend(), { email_stuffier, id_friend }, { headers: config.headers })\r\n);\r\n\r\nexport const getUserRequests = () => (\r\n  axios.get(routes.user.userRequests(), { headers: config.headers })\r\n);\r\n\r\nexport const deleteUserRequest = user => (\r\n  axios.put(routes.user.deleteUserRequest(user._id), { ...user, request: false }, { headers: config.headers })\r\n);\r\n","import { makeStandardActionCreator } from '../action-helpers';\r\n\r\nimport { REVOKE_USER } from '../constants';\r\nimport { LOGIN_USER_FETCHED, USER_FETCHED, USER_REGISTERED, USER_PICTURE_ADDED } from './constants';\r\nimport { loginStuffier, getStuffier, registerStuffier } from '../../services/stuffier';\r\n\r\nexport const loginUserFetched = makeStandardActionCreator(LOGIN_USER_FETCHED);\r\nexport const loginUser = (email, password) => dispatch => {\r\n  return loginStuffier(email, password).then(data  => {\r\n    // dispatch(loginUserFetched(data, { email, password }));   // NOT NEEDED\r\n    return Promise.resolve(data);\r\n  });\r\n};\r\n\r\nconst userFetched = makeStandardActionCreator(USER_FETCHED);\r\nexport const fetchUser = (email) => dispatch => {   //makePaginatedApiActionCreator(getStuffier, userFetched);\r\n  return getStuffier(email).then(res => {\r\n    // TODO: Promise resolve only data about User!!!\r\n    dispatch(userFetched(res.data[0], email));\r\n    return Promise.resolve(res);\r\n  });\r\n}\r\n\r\nconst userRegistered = makeStandardActionCreator(USER_REGISTERED);\r\nexport const registerUser = (user) => dispatch => {\r\n  return registerStuffier(user).then(() => {\r\n    dispatch(userRegistered(user, user.email));\r\n    return Promise.resolve(user);\r\n  });\r\n}\r\n\r\nconst userPictureAdded = makeStandardActionCreator(USER_PICTURE_ADDED);\r\nexport const addUserPicture = (user, picture) => dispatch => {\r\n  const facebookUser = { ...user, picture };\r\n  dispatch(userPictureAdded(facebookUser, facebookUser.email));\r\n}\r\n\r\nexport const logout = () => {\r\n  localStorage.removeItem('picture');\r\n  localStorage.removeItem('username');\r\n\r\n  return {\r\n    type: REVOKE_USER,\r\n  };  \r\n}\r\n","export const LOGIN_USER_FETCHED = 'STUFFIE:LOGIN_USER_FETCHED';\r\nexport const USER_FETCHED = 'STUFFIE:USER_FETCHED';\r\nexport const USER_REGISTERED = 'STUFFIE:USER_REGISTERED';\r\nexport const USER_PICTURE_ADDED = 'STUFFIE:USER_PICTURE_ADDED';\r\n","import React, { Component } from 'react';\r\nimport FacebookLogin from 'react-facebook-login';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport Button from '../shared/Button';\r\nimport FacebookUser from '../types/FacebookUser';\r\nimport TextField from '../shared/TextField';\r\nimport config from '../../services/config';\r\nimport { LoginProps } from './types';\r\nimport { addUserPicture, loginUser, fetchUser } from '../../redux/user/actions';\r\n\r\nimport './Login.scss';\r\n\r\nclass Login extends Component<LoginProps, any> {\r\n  state = {\r\n    email: null,\r\n    password: null,\r\n    loginFB: false\r\n  }\r\n\r\n  onClick = () => {\r\n    const { fetchUser, loginUser, setMessage } = this.props;\r\n    const { email, password } = this.state;\r\n\r\n    if (email && password) {\r\n      loginUser(email, password)\r\n      .then((response: any) => fetchUser(response.data[0].email))\r\n      .then((res: any) => {\r\n        localStorage.setItem('username', res.data[0].email);\r\n        setMessage(\"Login successful\");\r\n      })\r\n      .catch(() => setMessage(\"Error: Couldn't login. Try again.\"));\r\n    }\r\n  }\r\n\r\n  responseFacebook = (response: FacebookUser) => {\r\n    const { addUserPicture, fetchUser, setMessage } = this.props;\r\n\r\n    if (response) {\r\n      fetchUser(response.email)\r\n      .then((res: any) => {\r\n        const picture = response.picture.data.url;\r\n        localStorage.setItem('username', res.data[0].email);\r\n        addUserPicture(res.data[0], picture);\r\n        setMessage(\"Login successful\");\r\n      })\r\n      .catch(() => setMessage(\"Error: Couldn't login. Try again.\"));\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { loginFB } = this.state;\r\n\r\n    return (\r\n      <div className=\"login\">\r\n        <h1>Login</h1>\r\n        <form className=\"login__form\">\r\n          <TextField\r\n            type=\"email\"\r\n            name=\"email\"\r\n            placeholder=\"Email\"\r\n            onChange={(email: string) => this.setState({ email })} />\r\n          <TextField\r\n            type=\"password\"\r\n            name=\"password\"\r\n            placeholder=\"Password\"\r\n            onChange={(password: string) => this.setState({ password })} />\r\n          <Button onClick={() => this.onClick()} text=\"Login\" />\r\n        </form>\r\n        <hr className=\"login__hr\" />\r\n          <FacebookLogin\r\n            appId={config.fb.appId}\r\n            autoLoad={loginFB}\r\n            fields=\"name,email,picture\"\r\n            scope=\"public_profile,user_friends\"\r\n            onClick={(event) => event && this.setState({ loginFB: true })}\r\n            callback={this.responseFacebook} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchProps = {\r\n  addUserPicture,\r\n  loginUser,\r\n  fetchUser\r\n};\r\n\r\nexport default connect(null, mapDispatchProps)(withRouter<any, React.ComponentClass<any>>(Login));\r\n","export const options = [\r\n  { value: 'en', label: 'English' },\r\n  { value: 'es', label: 'Spanish' },\r\n];\r\n","import React, { Component } from 'react';\r\nimport { MenuProps, MenuState } from './types';\r\n\r\n// import enhanceWithClickOutside from 'react-click-outside';\r\nimport './Menu.scss';\r\n\r\nclass Menu extends Component<MenuProps, MenuState> {\r\n  state = {\r\n    isOpen: false,\r\n  };\r\n\r\n  handleClickOutside() {\r\n    this.setState({ isOpen: false });\r\n  }\r\n\r\n  open = () => {\r\n    this.setState({ isOpen: true });\r\n  }\r\n\r\n  toggle = () => {\r\n    this.setState({ isOpen: !this.state.isOpen });\r\n  }\r\n\r\n  render() {\r\n    const isOpen = this.state.isOpen ? 'dropdown--is-open' : '';\r\n\r\n    return (\r\n      <div className=\"dropdown\">\r\n        <div className=\"dropdown__label\" onClick={this.toggle}>\r\n          {this.props.label(this.state.isOpen)}\r\n        </div>\r\n        <div className=\"dropdown__content-container\">\r\n          <div className={`dropdown__content ${isOpen}`}>\r\n            {this.props.children}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Menu;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { options } from '../../config/options';\r\n\r\nimport Menu from '../shared/Menu';\r\nimport State from '../../redux/State';\r\nimport { AppsProps } from './types';\r\nimport './Apps.scss';\r\n\r\nclass Apps extends Component<AppsProps, any> {\r\n  state = {\r\n    lang: options[0]\r\n  };\r\n\r\n  changeLang = (lang:any) => {\r\n    const { i18n } = this.props;\r\n\r\n    this.setState({ lang });\r\n    i18n.changeLanguage(lang.value);\r\n  };\r\n\r\n  renderCurrentLanguage = (isOpen: boolean) => {\r\n    const { t } = this.props;\r\n\r\n    return (\r\n      <div className={isOpen ? 'apps__language-open' : 'apps__language'}>\r\n        {t('Language')}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"apps\">\r\n        <div className=\"apps__title\">Apps &amp; extras</div>\r\n        <div className=\"apps__item\"><Link to='/tickets'>Tickets</Link></div>\r\n        <div className=\"apps__item\"><Link to='/support'>Support</Link></div>\r\n        <div className=\"apps__item\"><Link to='/charts'>Charts</Link></div>\r\n        <div className=\"apps__item\"><Link to='/test'>Test</Link></div>\r\n        <div className=\"apps__item\"><Link to='/covid'>Covid</Link></div>\r\n        <hr />\r\n        <div className=\"apps__item\">\r\n          <Menu label={(isOpen: boolean) => this.renderCurrentLanguage(isOpen)}>\r\n            {options.map(option => {\r\n              return (<div key={option.value} className=\"apps__option\" onClick={() => this.changeLang(option)}>{option.label}</div>);\r\n            })}\r\n          </Menu>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  user: state.user\r\n});\r\n\r\nexport default connect(mapStateToProps, {})(withTranslation()<any>(withRouter<any, React.ComponentClass<any>>(Apps)));\r\n","import React, { Component } from 'react';\r\nimport './Chat.scss';\r\n\r\nclass Chat extends Component {\r\n\r\n  state = {\r\n    messageList: []\r\n  };\r\n \r\n  onMessageWasSent(message) {\r\n    this.setState({\r\n      messageList: [...this.state.messageList, message]\r\n    })\r\n  }\r\n \r\n  sendMessage(text) {\r\n    if (text.length > 0) {\r\n      this.setState({\r\n        messageList: [...this.state.messageList, {\r\n          author: 'them',\r\n          type: 'text',\r\n          data: { text }\r\n        }]\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"chat\">Get new Chat-Window</div>\r\n    )\r\n  }\r\n};\r\n\r\nexport default Chat;\r\n","import axios from 'axios';\r\nimport { map } from 'lodash';\r\nimport routes from './routes';\r\nimport config from './config';\r\n\r\nexport const getStuffList = id_stuffier => (\r\n  axios.get(routes.stuff.listForStuffier(id_stuffier), { headers: config.headers })\r\n);\r\n\r\nexport const getStuffiersList = friends => {\r\n  if (friends.length > 0) {\r\n    const ids = map(friends, friend => { \r\n      return { id_stuffier: friend.id };\r\n    });\r\n  \r\n    return axios.get(routes.stuff.listStuffiers(ids), { headers: config.headers });  \r\n  }\r\n\r\n  return Promise.resolve([]);\r\n};\r\n\r\nexport const getStuff = id => (\r\n  axios.get(routes.stuff.detail(id), { headers: config.headers })\r\n);\r\n\r\nexport const getListStuff = ids => {\r\n  if (ids.length) {\r\n    return axios.get(routes.stuff.listDetail(ids), { headers: config.headers });\r\n  }\r\n\r\n  return Promise.resolve([]);\r\n};\r\n\r\nexport const getProductsFromIds = ids => (\r\n  axios.get(routes.stuff.listDetail(ids), { headers: config.headers })\r\n);\r\n\r\nexport const getCategories = (token = null) => (\r\n  axios.get(routes.category.list(), { headers: config.headers, cancelToken: token })\r\n);\r\n\r\nexport const getSubCategories = (token = null) => (\r\n  axios.get(routes.subcategory.list(), { headers: config.headers, cancelToken: token })\r\n);\r\n\r\nexport const addStuff = ({ name, category, subcategory, fileName }) => (\r\n  axios.post(routes.stuff.addStuff(), { name, category, subcategory, file_name: fileName }, { headers: config.headers })\r\n);\r\n\r\nexport const addStuffStuffier = (id_stuffier, id_stuff) => (\r\n  axios.post(routes.stuff.addStuffiersStuff(), { id_stuffier, id_stuff }, { headers: config.headers })\r\n);\r\n\r\nexport const getStuffFromCategories = (category, subcategory) => (\r\n  axios.get(routes.stuff.detailFromCategories(category, subcategory), { headers: config.headers })\r\n);\r\n\r\nexport const getCategory = id => (\r\n  axios.get(routes.category.detail(id), { headers: config.headers })\r\n);\r\n\r\nexport const getSubcategory = id => (\r\n  axios.get(routes.subcategory.detail(id), { headers: config.headers })\r\n);\r\n\r\nexport const isImageExist = () => (\r\n  axios.get(routes.cloudinary.exist(), { headers: config.cloudinary_headers })\r\n);\r\n\r\nexport const addSubCategoryCall = ({ id, name }) => (\r\n  axios.post(routes.subcategory.add(), { id, name }, { headers: config.headers })\r\n);\r\n\r\nexport const addCategoryCall = ({ id, name }) => (\r\n  axios.post(routes.category.add(), { id, name }, { headers: config.headers })\r\n);\r\n\r\nexport const getPendingProducts = () => (\r\n  axios.get(routes.stuff.listPendingPics(), { headers: config.headers })\r\n);\r\n\r\nexport const updateStuff = (id_stuffier, id_stuff, cost) => {\r\n  return getStuffList(id_stuffier)\r\n    .then(res => {\r\n      const stuff = res.data.find(row => row.id_stuff === id_stuff);\r\n      if (stuff) {\r\n        return axios.put(routes.stuff.updateStuff(stuff._id), {...stuff, cost }, { headers: config.headers });\r\n      }\r\n      return Promise.resolve([]);\r\n    });\r\n};\r\n\r\n/*\r\n* This is to emulate ElasticSearch\r\n*/\r\nexport const getSearchResults = (searchText, products, token) => {\r\n  let results = [];\r\n  const text = searchText.toLowerCase();\r\n\r\n  return Promise.all([getCategories(token), getSubCategories(token)]).then(values => {\r\n    values[0].data.forEach(c => {\r\n      if (c.name.toLowerCase().includes(text)){\r\n        results.push({ type: 'Category', name: c.name, id: c.id });\r\n      }\r\n    });\r\n\r\n    values[1].data.forEach(s => {\r\n      if (s.name.toLowerCase().includes(text)) {\r\n        results.push({ type: 'Subcategory', name: s.name, id: s.id });\r\n      }\r\n    });\r\n\r\n    Object.keys(products).forEach(key => {\r\n      products[key].forEach(p => {\r\n        if (p.name.toLowerCase().includes(text)) {\r\n          results.push({ type: 'Product', name: p.name, id: p.id });\r\n        }  \r\n      });\r\n    });\r\n  \r\n    return Promise.resolve(results);\r\n  });\r\n};\r\n\r\n// For Exchange ElasticSearch\r\nexport const getProductResults = (searchText, products) => (\r\n  products.filter(product => product.name.toLowerCase().includes(searchText.toLowerCase()))\r\n);\r\n","import { makePaginatedApiActionCreator, makeStandardActionCreator } from '../action-helpers';\r\nimport { CATEGORY_ADDED, CATEGORIES_FETCHED, CATEGORY_FETCHED } from './constants';\r\nimport { addCategoryCall, getCategories, getCategory } from '../../services/stuff';\r\n\r\nconst categoriesFetched = makeStandardActionCreator(CATEGORIES_FETCHED);\r\nexport const fetchCategories = makePaginatedApiActionCreator(getCategories, categoriesFetched);\r\n\r\nconst categoryFeteched = makeStandardActionCreator(CATEGORY_FETCHED);\r\nexport const fetchCategory = makePaginatedApiActionCreator(getCategory, categoryFeteched);\r\n\r\nconst categoryAdded = makeStandardActionCreator(CATEGORY_ADDED);\r\nexport const addCategory = makePaginatedApiActionCreator(addCategoryCall, categoryAdded);\r\n","export const CATEGORIES_FETCHED = 'MENU::CATEGORIES_FETCHED';\r\nexport const CATEGORY_FETCHED = 'MENU::CATEGORY_FETCHED';\r\nexport const CATEGORY_ADDED = 'MENU:CATEGORY_ADDED';\r\n","import { makePaginatedApiActionCreator, makeStandardActionCreator } from '../action-helpers';\r\nimport { SUBCATEGORIES_FETCHED, SUBCATEGORY_FETCHED, SUBCATEGORY_ADDED } from './constants';\r\nimport { addSubCategoryCall, getSubCategories, getSubcategory } from '../../services/stuff';\r\n\r\nconst subCategoriesFetched = makeStandardActionCreator(SUBCATEGORIES_FETCHED);\r\nexport const fetchSubCategories = makePaginatedApiActionCreator(getSubCategories, subCategoriesFetched);\r\n\r\nconst subCategoryFetched = makeStandardActionCreator(SUBCATEGORY_FETCHED);\r\nexport const fetchSubCategory = makePaginatedApiActionCreator(getSubcategory, subCategoryFetched);\r\n\r\nconst subCategoryAdded = makeStandardActionCreator(SUBCATEGORY_ADDED);\r\nexport const addSubCategory = makePaginatedApiActionCreator(addSubCategoryCall, subCategoryAdded);\r\n","export const SUBCATEGORIES_FETCHED = 'MENU::SUBCATEGORIES_FETCHED';\r\nexport const SUBCATEGORY_FETCHED = 'MENU::SUBCATEGORY_FETCHED';\r\nexport const SUBCATEGORY_ADDED = 'MENU:SUBCATEGORY_ADDED';\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { map } from 'lodash';\r\n\r\nimport Button from '../shared/Button';\r\nimport Loading from '../shared/Loading';\r\nimport State from '../../redux/State';\r\nimport TextField from '../shared/TextField';\r\nimport { addCategory } from '../../redux/categories/actions';\r\nimport { addSubCategory } from '../../redux/subcategories/actions';\r\n\r\nimport { AddCategoryProps } from './types';\r\nimport './AddCategory.scss';\r\n\r\nconst TYPE = {\r\n  CATEGORY: 'category',\r\n  SUBCATEGORY: 'subcategory'\r\n};\r\n\r\nclass AddCategory extends Component<AddCategoryProps, any> {\r\n  state = {\r\n    isLoading: false,\r\n    id: '',\r\n    name: '',\r\n    categories: [],\r\n    subcategories: [],\r\n    tempObjects: null,\r\n  };\r\n\r\n  componentDidUpdate(prevProps: any) {\r\n    const { type } = this.props;\r\n\r\n    if (prevProps.type === 'subcategory' && type === 'category') {\r\n      this.setState({ label: 'Category' });\r\n    }\r\n\r\n    if (prevProps.type === 'category' && type === 'subcategory') {\r\n      this.setState({ label: 'SubCategory' });\r\n    }\r\n  }\r\n\r\n  createValue = () => {\r\n    const { addCategory, addSubCategory, type } = this.props;\r\n    const { categories, subcategories } = this.state;\r\n\r\n    if (type === TYPE.CATEGORY) {\r\n      this.setState({ isLoading: true});\r\n\r\n      addCategory({ name: this.state.name, id: Number(this.state.id) })\r\n      .then((res: any) => {\r\n        const newCategory =  { _id: res.data._id, id: res.data.id, name: res.data.name };\r\n        this.setState({\r\n          categories: [ ...categories, newCategory ],\r\n          name: '',\r\n          id: ''\r\n        }); \r\n      })\r\n      .finally(() => {\r\n        this.setState({ isLoading: false });\r\n      });\r\n    }\r\n\r\n    if (type === TYPE.SUBCATEGORY) {\r\n      this.setState({ isLoading: true });\r\n\r\n      addSubCategory({ name: this.state.name, id: Number(this.state.id) })\r\n      .then((res: any) => {\r\n        const newSubCategory = { _id: res.data._id, id: res.data.id, name: res.data.name };\r\n        this.setState({\r\n          subcategories: [...subcategories, newSubCategory ],\r\n          name: '',\r\n          id: ''\r\n        });\r\n\r\n      })\r\n      .finally(() => {\r\n        this.setState({ isLoading: false });\r\n      });\r\n    }\r\n  }\r\n\r\n  renderValues = (typeToRender: string) => {\r\n    const { categories, subcategories } = this.props;\r\n    const objects = typeToRender === TYPE.CATEGORY ? categories : subcategories;\r\n  \r\n    return map(objects, (object: any) => {\r\n      return (\r\n        <li className=\"add-category__item\" key={`${typeToRender}_${object.id}`}>\r\n          <span className=\"add-category__id\">({object.id})</span> - {object.name}\r\n        </li>\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { type } = this.props;\r\n    const { isLoading } = this.state;\r\n\r\n    if (isLoading) return <Loading size=\"md\" />\r\n\r\n    const label = type === TYPE.CATEGORY ? 'Category' : 'SubCategory';\r\n    const otherLabel = type !== TYPE.CATEGORY ? 'Category' : 'SubCategory';\r\n    const otherType = type === TYPE.CATEGORY ? TYPE.SUBCATEGORY : TYPE.CATEGORY;\r\n\r\n    return (\r\n      <div className=\"add-category\">\r\n        <form>\r\n          <div className=\"add-category__values\">\r\n            <div>\r\n              <h2>{label}</h2>\r\n              <ul className=\"add-category__list\">\r\n                {this.renderValues(type)}\r\n              </ul>\r\n            </div>\r\n            <div>\r\n              <h2>{otherLabel}</h2>\r\n              <ul className=\"add-category__list\">\r\n                {this.renderValues(otherType)}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n          <hr />\r\n          <div className=\"add-category__row\">\r\n            <label>Id</label>\r\n            <TextField name=\"id\" type=\"text\" onChange={(id: string) => this.setState({ id })} />\r\n          </div>\r\n          <div className=\"add-category__row\">\r\n            <label>{label}</label>\r\n            <TextField name=\"name\" type=\"text\" onChange={(name: string) => this.setState({ name })} />\r\n          </div>\r\n          <hr />\r\n          <Button onClick={() => this.createValue()} text={\"Send\"} />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchProps = {\r\n  addCategory,\r\n  addSubCategory,\r\n};\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  user: state.user,\r\n  categories: state.categories,\r\n  subcategories: state.subcategories\r\n});\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(AddCategory);\r\n","import React, { Component } from 'react';\r\nimport { find } from 'lodash';\r\nimport { DropDownProps, DropDownState } from './types';\r\n\r\nclass DropDown extends Component<DropDownProps, DropDownState> {\r\n  state = {\r\n    valueSelected: null,\r\n  };\r\n\r\n  updateChange = (event: any) => {\r\n    const { onChange, values } = this.props;\r\n\r\n    const id = Number(event.target.value);\r\n    const object = find(values, value=> value.id === id);\r\n\r\n    this.setState({ valueSelected: id });\r\n    onChange(object);\r\n  }\r\n\r\n  render() {\r\n    const { values } = this.props;\r\n    const { valueSelected } = this.state;\r\n\r\n    const value = values ? values[0] ? values[0].id : null: null;\r\n    const objectSelected = valueSelected ? valueSelected : value;\r\n\r\n    return (\r\n      <select onChange={this.updateChange} value={objectSelected}>\r\n        { \r\n          values && values.map((object: any, index: number) => {\r\n            return <option key={index} value={object.id}>{object.name}</option>;\r\n          })\r\n        }\r\n      </select>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DropDown;\r\n","import { ReactNode } from 'react';\r\n\r\nexport interface TextFieldProps {\r\n  name: string,\r\n  type: string,\r\n  placeholder?: string,\r\n  value?: string,\r\n  onChange?: Function,\r\n  disabled?: boolean,\r\n  reference?: any,\r\n  min?: number,\r\n  max?: number\r\n}\r\n\r\nexport interface MenuProps {\r\n  label: Function,\r\n  children: ReactNode\r\n}\r\n\r\nexport interface MenuState {\r\n  isOpen: boolean\r\n}\r\n\r\nexport interface DropDownProps {\r\n  onChange: Function,\r\n  values: any\r\n}\r\n\r\nexport interface DropDownState {\r\n  valueSelected: any\r\n}\r\n\r\nexport type LoadingSize = 'sm' | 'md' | 'lg' | 'xl';\r\n\r\nexport interface LoadingProps {\r\n  size: LoadingSize,\r\n  message?: string\r\n}\r\n\r\nexport interface ButtonProps {\r\n  type?: 'submit' | 'reset' | 'submit',\r\n  onClick?: Function,\r\n  text: string,\r\n  disabled?: boolean\r\n}\r\n\r\nexport enum WarningMessageType {\r\n  ERROR = 'error',\r\n  SUCCESSFUL = 'successful',\r\n  WARNING ='warning',\r\n  EMPTY = ''\r\n}\r\n\r\nexport interface WarningMessageProps {\r\n  message: string,\r\n  type: WarningMessageType,\r\n  show?: boolean\r\n}\r\n","import React, { Component } from 'react';\r\nimport { WarningMessageProps } from './types';\r\nimport './WarningMessage.scss';\r\n\r\nclass WarningMessage extends Component<WarningMessageProps, any> {\r\n  render() {\r\n    const { message, type } = this.props;\r\n\r\n    if (!message) return <div></div>\r\n\r\n    return (\r\n      <div className={`warning-message warning-message__${type}`}>\r\n        {message}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default WarningMessage;\r\n","import { find, forEach, isEmpty, map } from 'lodash';\r\n\r\nimport Category from '../types/Category';\r\nimport ProductsMap from '../types/ProductsMap';\r\nimport Product from '../types/Product';\r\nimport StuffiersStuff from '../types/StuffiersStuff';\r\nimport User from '../types/User';\r\n\r\nexport function mapStuff(stuff: any) {\r\n  return map(stuff, (object: any) => {\r\n    return { id: object.id_stuff };\r\n  });\r\n}\r\n\r\nexport function mapIds(ids: number[]) {\r\n  return map(ids, id => {\r\n    return { id };\r\n  });\r\n}\r\n\r\nexport function getProductsMap(categories: Category[], objects: any): ProductsMap {\r\n  let productsMap: ProductsMap = {};\r\n\r\n  forEach(categories, (category: Category) => {\r\n    productsMap = {\r\n      ...productsMap,\r\n      [category.id as number]: [],\r\n    };\r\n  });\r\n\r\n  if (!isEmpty(productsMap)) {\r\n    // Filling products per category\r\n    forEach(objects, (object: any) => {\r\n      productsMap[object.category].push(object);\r\n    });\r\n  }\r\n\r\n  return productsMap;\r\n}\r\n\r\nexport function getProductFromProducts(productId: number, products: ProductsMap) {\r\n  const values = Object.values(products);\r\n  let product = null;\r\n\r\n  for (let i=0; i < values.length; i++) {\r\n    product = values[i].find((p: Product) => p.id === productId);\r\n    if (product) {\r\n      break;\r\n    }\r\n  }\r\n\r\n  return product;\r\n}\r\n\r\nexport function getFriendProducts(friends: User[], products: Product[], stuffiers_stuff: StuffiersStuff[]) {\r\n  let friendsProducts: User[] = [];\r\n\r\n  forEach(friends, friend => {\r\n    const values = stuffiers_stuff.filter((row: StuffiersStuff) => row.id_stuffier === friend.id)\r\n    .map((row: StuffiersStuff) => {\r\n      let product = find(products, (p: Product) => p.id === row.id_stuff);\r\n      return row.cost !== undefined ? { ...product, cost: row.cost } : product ? product : {};\r\n    });\r\n\r\n    friendsProducts.push({ ...friend, products: values });\r\n  });\r\n\r\n  return friendsProducts;\r\n}\r\n\r\nexport function isProductsEmpty(productsMap: ProductsMap) {\r\n  const products = Object.values(productsMap).filter(row => row.length > 0);\r\n  return !products.length;\r\n}\r\n\r\nexport function getProductsList(productsMap: ProductsMap): Product[] {\r\n  return Object.values(productsMap).filter(row => row.length > 0).flat();\r\n}\r\n\r\nexport function mapCostToProducts(products: Product[], stuff: StuffiersStuff[]) {\r\n  return products.map(p => {\r\n    const extraStuff = stuff.find((s: StuffiersStuff) => s.id_stuff === p.id);\r\n    return extraStuff ? { ...p, cost: extraStuff.cost } : p;\r\n  });\r\n}\r\n\r\nexport function findProduct(idProduct: number, productsMap: ProductsMap): Product {\r\n  return getProductsList(productsMap).find(p => p.id === idProduct) || {};\r\n}\r\n","export const PRODUCT_FETCHED = 'MENU::PRODUCT_FETCHED';\r\nexport const PRODUCTS_FETCHED = 'MENU::PRODUCTS_FETCHED';\r\n\r\nexport const PRODUCT_ADDED = 'PRODUCTS::PRODUCT_ADDED';\r\nexport const PRODUCT_UPDATED = 'PRODUCTS::PRODUCT_UPDATED';\r\n","import { makePaginatedApiActionCreator, makeStandardActionCreator, makeApiActionCreator } from '../action-helpers';\r\nimport { PRODUCT_ADDED, PRODUCT_FETCHED, PRODUCTS_FETCHED, PRODUCT_UPDATED } from './constants';\r\nimport { addStuff, addStuffStuffier, getListStuff, getStuffList, getStuff, updateStuff } from '../../services/stuff';\r\nimport { mapStuff, getProductsMap, mapCostToProducts } from '../../components/helpers/StuffHelper';\r\n\r\nconst productFetched = makeStandardActionCreator(PRODUCT_FETCHED);\r\nconst productsFetched = makeStandardActionCreator(PRODUCTS_FETCHED);\r\nconst productUpdated = makeStandardActionCreator(PRODUCT_UPDATED);\r\n\r\nconst productAdded = makeStandardActionCreator(PRODUCT_ADDED);\r\nexport const addProduct = (product, user) => dispatch => {\r\n  return addStuff(product)\r\n  .then(res => {\r\n    const product = res.data;\r\n    return addStuffStuffier(user.id, product.id);\r\n  })\r\n  .then(() => {\r\n    dispatch(productAdded(product, user.email));\r\n    return Promise.resolve(product);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n\r\nexport const addRegisteredProduct = (user, product) => dispatch => {\r\n  return addStuffStuffier(user.id, product.id)\r\n  .then(() => {\r\n    dispatch(productAdded(product, user.email));\r\n    return Promise.resolve(product);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n\r\nexport const fetchProduct = makePaginatedApiActionCreator(getStuff, productFetched);\r\nexport const fetchProducts = (user, categories) => dispatch => {  // makePaginatedApiActionCreator(getListStuff, productsFetched);\r\n  let extraStuff;\r\n  return getStuffList(user.id)\r\n         .then(res => {\r\n           extraStuff = res.data;               // []Stuff (with cost)\r\n           return getListStuff(mapStuff(res.data));\r\n          })\r\n         .then(res => {                         // []Product\r\n           const objects = mapCostToProducts(res.data, extraStuff);\r\n           const products = getProductsMap(categories, objects);\r\n           dispatch(productsFetched(products, user.email));\r\n           return Promise.resolve(products);\r\n         });\r\n}\r\n\r\nexport const updateProduct = makeApiActionCreator(updateStuff, productUpdated);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { isEmpty } from 'lodash';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport Button from '../shared/Button';\r\nimport Category from '../types/Category';\r\nimport Dropdown from '../shared/DropDown';\r\nimport Product from '../types/Product';\r\nimport State from '../../redux/State';\r\nimport Subcategory from '../types/Subcategory';\r\nimport TextField from '../shared/TextField';\r\nimport WarningMessage from '../shared/WarningMessage';\r\nimport { AddProductProps } from '../sections/types';\r\nimport { WarningMessageType } from '../shared/types';\r\nimport { getProductFromProducts } from '../helpers/StuffHelper';\r\nimport { getStuffFromCategories } from '../../services/stuff';\r\nimport { addRegisteredProduct, addProduct } from '../../redux/products/actions';\r\n\r\nimport './AddProduct.scss';\r\n\r\nclass AddProduct extends Component<AddProductProps, any> {\r\n  state = {\r\n    status: WarningMessageType.EMPTY,\r\n    name: null,\r\n    file_name: null,\r\n    category: this.props.categories[0],\r\n    product: { id: null, name: null },\r\n    subcategory: this.props.subcategories[0],\r\n    stuffStuffier: {},\r\n    productsByCategories: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.renderProducts(this.state.category, this.state.subcategory);\r\n  }\r\n\r\n  createProduct = () => {\r\n    const { addProduct, user } = this.props;\r\n    const { name, category, subcategory } = this.state;\r\n\r\n    if (!name || !category || !subcategory) return;\r\n\r\n    addProduct({ name, category: category.id, subcategory: subcategory.id }, user)\r\n      .then((product: Product) => {\r\n        this.setState({ product, stuffStuffier: product, status: WarningMessageType.SUCCESSFUL });\r\n      })\r\n      .catch(() => {\r\n        const product = { name, category: category.id, subcategory: subcategory.id };\r\n        this.setState({ product, stuffStuffier: product, status: WarningMessageType.ERROR });\r\n      });\r\n  }\r\n\r\n  setProduct() {\r\n    const { addRegisteredProduct, history, user } = this.props;\r\n    const { product } = this.state;\r\n\r\n    addRegisteredProduct(user, product).then((p: Product) => {\r\n      this.setState({ stuffStuffier: p, status: WarningMessageType.SUCCESSFUL });\r\n      history.push('/products');\r\n    });\r\n  }\r\n\r\n  clearState = () => {\r\n    this.setState({\r\n      status: WarningMessageType.EMPTY,\r\n      name: null,\r\n      file_name: null,\r\n      category: this.props.categories[0],\r\n      subcategory: this.props.subcategories[0],\r\n      product: {},\r\n      stuffStuffier: {},\r\n    });\r\n  }\r\n\r\n  getMessage = () => {\r\n    const { stuffStuffier, status, product } = this.state;\r\n    const message = status === WarningMessageType.ERROR ? 'was not added' : 'was added successfully!';\r\n\r\n    if (product && !isEmpty(stuffStuffier)) {\r\n      return `Stuff ${product.name} ${message}`;\r\n    }\r\n\r\n    return \"\";\r\n  }\r\n\r\n  renderProducts(category: Category, subcategory: Subcategory) {\r\n    const { products } = this.props;\r\n\r\n    getStuffFromCategories(category.id, subcategory.id).then(res => {\r\n      const product = res.data[0];\r\n      const productsByCategories = res.data.filter((p: Product) => p.id && !getProductFromProducts(p.id, products));\r\n      this.setState({ productsByCategories, product });\r\n    })\r\n  }\r\n\r\n  updateCategory = (category: Category) => {\r\n    this.renderProducts(category, this.state.subcategory);\r\n    this.setState({ category });\r\n  }\r\n\r\n  updateSubcategory = (subcategory: Subcategory) => {\r\n    this.renderProducts(this.state.category, subcategory);\r\n    this.setState({ subcategory });\r\n  }\r\n\r\n  render() {\r\n    const { categories, subcategories } = this.props;\r\n    const { product, productsByCategories, category, status, subcategory } = this.state;\r\n\r\n    return (\r\n      <div className=\"add-product\">\r\n        <h3>Add Stuff</h3>\r\n        <WarningMessage message={this.getMessage()} type={status} />\r\n        <hr/>\r\n        <form>\r\n          <div>Select Product</div>\r\n          <div className=\"add-product__row\">\r\n            <label>Category</label>\r\n            <Dropdown onChange={(category: any) => this.updateCategory(category)} values={categories} />\r\n          </div>\r\n          <div className=\"add-product__row\">\r\n            <label>SubCategory</label>\r\n            <Dropdown onChange={(subcategory: any) => this.updateSubcategory(subcategory)} values={subcategories} />\r\n          </div>\r\n          { !productsByCategories.length && <div>There are no products</div>}\r\n          { productsByCategories.length > 0 && (\r\n            <div className=\"add-product__row\">\r\n              <label>Product</label>\r\n              <Dropdown onChange={(product: Product) => this.setState({ product })} values={productsByCategories} />\r\n            </div>\r\n          )}\r\n          <hr />\r\n          <Button text=\"Add Product\" disabled={!(category && subcategory && product && product.name)}\r\n            onClick={() => this.setProduct()}>\r\n          </Button>\r\n          <hr />\r\n          <div>Create New Product</div>\r\n          <div className=\"add-product__row\">\r\n            <label>Name</label>\r\n            <TextField name=\"name\" type=\"text\" onChange={(name:string) => this.setState({ name })}/>\r\n          </div>\r\n          <div className=\"add-product__row\">\r\n            <label>Category</label>\r\n            <Dropdown onChange={(category:any) => this.setState({ category })} values={categories} />\r\n          </div>\r\n          <div className=\"add-product__row\">\r\n            <label>SubCategory</label>\r\n            <Dropdown onChange={(subcategory:any) => this.setState({ subcategory })} values={subcategories} />\r\n          </div>\r\n          <hr />\r\n          <Button onClick={() => this.createProduct()} text=\"Send\"></Button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapDispatchProps = {\r\n  addProduct,\r\n  addRegisteredProduct,\r\n};\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  user: state.user,\r\n  categories: state.categories,\r\n  subcategories: state.subcategories,\r\n  products: state.products\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(withRouter<any, React.ComponentClass<any>>(AddProduct));\r\n","import { makeApiActionCreator,  makeStandardActionCreator } from '../action-helpers';\r\n\r\nimport { USER_REQUESTS_FETCHED, USER_REQUEST_DELETED } from './constants';\r\nimport { getUserRequests, deleteUserRequest } from '../../services/stuffier';\r\n\r\nconst userRequestsFetched = makeStandardActionCreator(USER_REQUESTS_FETCHED);\r\nexport const fetchUserRequests = makeApiActionCreator(getUserRequests, userRequestsFetched);\r\n\r\nconst userRequestDeleted = makeStandardActionCreator(USER_REQUEST_DELETED);\r\nexport const deleteRequest = makeApiActionCreator(deleteUserRequest, userRequestDeleted);\r\n","export const USER_REQUESTS_FETCHED = 'STUFFIE:USER_REQUESTS_FETCHED';\r\nexport const USER_REQUEST_DELETED = 'STUFFIE::USER_REQUEST_DELETED';\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Button from '../shared/Button';\r\nimport Product from '../types/Product';\r\nimport State from '../../redux/State';\r\nimport User from '../types/User';\r\nimport { Link } from 'react-router-dom';\r\nimport { deleteRequest } from '../../redux/user-requests/actions';\r\nimport './Admin.scss';\r\n\r\nclass Admin extends Component<any, any> {\r\n  executeRequest = (user: User, isAccepted = false) => {\r\n    const { deleteRequest } = this.props;\r\n  \r\n    if (isAccepted) {\r\n      deleteRequest(user).then(() => alert('Request Accepted and Deleted'));\r\n    }\r\n  }\r\n\r\n  renderRequests = () => {\r\n    const { userRequests } = this.props;\r\n\r\n    return (\r\n      <div className=\"admin__requests\">\r\n        <hr />\r\n        <h3 className=\"admin__title\">\r\n          <div>User Requests</div>\r\n          <div className=\"admin__warning\">{userRequests.length}</div>\r\n        </h3>\r\n        <ul>\r\n          {userRequests.map((user: User, index: number) => {\r\n            return (\r\n              <li className=\"admin__request\" key={index}>\r\n                <div className=\"admin__request-text\">\r\n                  {user.first_name} {user.last_name} ({user.email})\r\n                </div>\r\n                <div className=\"admin__request-button\">\r\n                  <Button onClick={() => this.executeRequest(user, true)} text=\"Accept\"></Button>\r\n                </div>\r\n              </li>\r\n            )}\r\n          )}\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderPendingProducts = () => {\r\n    const { pendingProducts } = this.props;\r\n\r\n    console.log(pendingProducts);\r\n\r\n    return (\r\n      <div className=\"admin__requests\">\r\n        <hr />\r\n        <h3 className=\"admin__title\">\r\n          <div>Products Pending of Pics</div>\r\n          <div className=\"admin__warning\">{pendingProducts.length}</div>\r\n        </h3>\r\n        <ul>\r\n          {pendingProducts.map((product: Product) => {\r\n            return (<li key={product.id} className=\"admin__request\">\r\n              <div>Product: {product.name}</div>\r\n              <div>Id: {product.id} / Category: {product.category} / Subcategory: {product.subcategory}</div>\r\n            </li>)\r\n          })}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { pendingProducts, userRequests } = this.props;\r\n\r\n    return (\r\n      <div className=\"admin\">\r\n        {pendingProducts.length > 0 && this.renderPendingProducts()}\r\n        {userRequests.length > 0 && this.renderRequests()}\r\n        <div className=\"admin__link\"><Link to={`/category/add`}>Add Category</Link></div>\r\n        <hr />\r\n        <div className=\"admin__link\"><Link to={`/subcategory/add`}>Add SubCategory</Link></div>\r\n        <hr />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  userRequests: state.userRequests,\r\n  pendingProducts: state.pendingProducts,\r\n});\r\n\r\nconst mapDispatchProps = {\r\n  deleteRequest\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(Admin);\r\n","import config from './config';\r\nimport axios from 'axios';\r\n\r\nexport const existImage = publicId => (\r\n  axios.get(`${config.cloudinary.url}/${publicId}`)\r\n);\r\n","import React, { Component } from 'react';\r\nimport { Image, Video, Transformation, CloudinaryContext } from 'cloudinary-react';\r\n\r\nimport config from '../../services/config';\r\nimport { existImage } from '../../services/cloudinary-helper';\r\nimport './Media.scss';\r\n\r\nclass Media extends Component {\r\n  state = {\r\n    imageUrl: 'default_product'\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.format !== 'mp4' && this.setUrl();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.fileName !== this.props.fileName) {\r\n      this.props.format !== 'mp4' && this.setUrl();\r\n    }\r\n  }\r\n\r\n  setUrl = () => {\r\n    const { fileName, category, subcategory, isProduct } = this.props;\r\n\r\n    if (isProduct && category && subcategory) {\r\n      const imageUrl = `products/${category}/${subcategory}/${fileName}`;\r\n      existImage(imageUrl)\r\n      .then(() => this.setState({ imageUrl }))\r\n      .catch(() => this.setState({ imageUrl: 'default_product' }));\r\n    } else {\r\n      this.setState({ imageUrl: fileName });\r\n    }\r\n  }\r\n\r\n  renderImage = () => {\r\n    const { format, width } = this.props;\r\n    const { imageUrl } = this.state;\r\n    const f = imageUrl === 'default_product' ? 'png' : format;\r\n\r\n    return (\r\n      <div className=\"media__image\">\r\n        <Image publicId={imageUrl} format={f}>\r\n          <Transformation width={width} fetchFormat=\"auto\" crop=\"scale\" />\r\n      </Image>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderVideo = () => {\r\n    const { fileName, format } = this.props;\r\n    return (<Video publicId={fileName} format={format}></Video>);\r\n  }\r\n  \r\n  render() {\r\n    const isVideo = this.props.format === 'mp4';\r\n\r\n    return (\r\n      <CloudinaryContext cloudName={config.cloudinary.cloudName}>\r\n        {isVideo && this.renderVideo()}\r\n        {!isVideo && this.renderImage()}\r\n      </CloudinaryContext>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Media;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { find } from 'lodash';\r\n\r\nimport Button from '../shared/Button';\r\nimport Loading from '../shared/Loading';\r\nimport Media from '../shared/Media';\r\nimport State from '../../redux/State';\r\nimport TextField from '../shared/TextField';\r\nimport WarningMessage from '../shared/WarningMessage';\r\nimport { ProductProps, ProductState } from '../sections/types';\r\nimport { WarningMessageType } from '../shared/types';\r\nimport { updateProduct } from '../../redux/products/actions';\r\n\r\nimport './Product.scss';\r\n\r\nclass Product extends Component<ProductProps, ProductState> {\r\n  state = {\r\n    id: null,\r\n    cost: 0.0,\r\n    message: '',\r\n    type: WarningMessageType.EMPTY\r\n  }\r\n\r\n  updateCost = (clear: boolean = false) => {\r\n    const { product, user, updateProduct } = this.props;\r\n    const { cost } = this.state;\r\n    const updatedCost = clear ? 0 : cost;\r\n\r\n    updateProduct(user.id, product?.id, updatedCost)\r\n    .then(() => this.setState({ message: `Cost updated successfully`, type: WarningMessageType.SUCCESSFUL }))\r\n    .catch(() => this.setState({ message: `Cost not updated`, type: WarningMessageType.ERROR }));\r\n  }\r\n\r\n  renderCost = () => {\r\n    const { product, hideOfferButton } = this.props;\r\n    const { cost } = this.state;\r\n\r\n    if (product?.cost)\r\n      return (\r\n      <div className=\"product__cost\">\r\n        <div className=\"product__cost-value\">Cost ${product?.cost}</div>\r\n        {!hideOfferButton && (<div className=\"product__cost-button\">\r\n            <Button text=\"Stop Offer\" onClick={() => this.updateCost(true)} />\r\n        </div>)}\r\n      </div>);\r\n    else {\r\n    return (\r\n      <div className=\"product__cost\">\r\n        <div className=\"product__cost-text\">Want to sell it? Just set a cost! (MAX $100)</div>\r\n        <div className=\"product__cost-elements\">\r\n          $<TextField type=\"number\" name=\"costTF\" value={cost.toString()}\r\n            min={0} max={100} onChange={(cost: number) => this.setState({ cost })} />\r\n          <Button text=\"Sell\" onClick={this.updateCost}/>\r\n        </div>\r\n      </div>);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { categories, product, subcategories, showCost } = this.props;\r\n    const { message, type } = this.state;\r\n\r\n    if (!product) return <Loading size=\"lg\" message=\"Loading product...\" />;\r\n\r\n    const category = find(categories, c => c.id === product.category);\r\n    const subcategory = find(subcategories, s => s.id === product.subcategory);\r\n\r\n    return (\r\n      <div className=\"product\">\r\n        <WarningMessage message={message} type={type} />\r\n        <h3>{ product.name }</h3>\r\n        <hr />\r\n          <Media\r\n            fileName={product.id}\r\n            category={product.category}\r\n            subcategory={product.subcategory}\r\n            isProduct=\"true\"\r\n            height=\"200\"\r\n            width=\"100\" />\r\n        <hr />\r\n        <div>Category: { category && category.name }</div>\r\n        <div>Subcategory: { subcategory && subcategory.name }</div>\r\n        {showCost && this.renderCost()}\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  categories: state.categories,\r\n  products: state.products,\r\n  subcategories: state.subcategories,\r\n  user: state.user\r\n});\r\n\r\nconst mapDispatchProps = {\r\n  updateProduct,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(Product);\r\n","import React, { Component } from 'react';\r\nimport { Redirect, withRouter } from 'react-router-dom';\r\n\r\nimport Button from '../shared/Button';\r\nimport Product from '../content/Product';\r\nimport ProductType from '../types/Product';\r\nimport WarningMessage from '../shared/WarningMessage';\r\nimport { getStuffiers } from '../../services/stuffier';\r\nimport { WarningMessageType } from '../shared/types';\r\n\r\nimport './Buy.scss';\r\n\r\nclass Buy extends Component<any, any> {\r\n  _isMounted = false;\r\n\r\n  state = {\r\n    friend: { first_name: '' },\r\n    message: '',\r\n    type: WarningMessageType.EMPTY\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { history, location } = this.props;\r\n    const product: ProductType = location.product;\r\n    this._isMounted = true;\r\n\r\n    if (this._isMounted) {\r\n      if (!product || product === undefined) {\r\n        history.push('/');\r\n      }\r\n  \r\n      getStuffiers([{ id: location.friend }])\r\n      .then((res: any) => this.setState({ friend: res.data[0] }));  \r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  render () {\r\n    const { location } = this.props;\r\n    const { friend, message, type } = this.state;\r\n    const product = location.product;\r\n\r\n    if (!product) return <Redirect to='/' />\r\n\r\n    const match = { params: { id: product.id } };\r\n\r\n    return (\r\n    <div className=\"buy\">\r\n      <WarningMessage message={message} type={type} />\r\n      <div className=\"buy__product\">\r\n        <h2>{friend?.first_name} Product</h2>\r\n        <hr />\r\n        <Product match={match} key={product.id} product={product} showCost={true} hideOfferButton={true} />\r\n      </div>\r\n      <Button type=\"submit\" onClick={() => console.log('submit')} text=\"Request Buy\" />\r\n    </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter<any, React.ComponentClass<any>>(Buy);\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { map } from 'lodash';\r\n\r\nimport State from '../../redux/State';\r\nimport { CategoryPageProps } from './types';\r\n\r\nimport Stuff from '../types/Stuff'; \r\n\r\n/* Category ID never will have 5 digits\r\n   Subcategory ID will have 5 digits or more.\r\n*/\r\nclass CategoryPage extends Component<CategoryPageProps, any> {\r\n  render() {\r\n    const { subcategories, location, products, match } = this.props;\r\n\r\n    let id: string = match.params.id;\r\n    let name = location.category || location.subcategory || '';\r\n    let categoryId = id.length >= 5 ? parseInt(id[0]) : parseInt(id);\r\n\r\n    // Subcategory Prep\r\n    if (id.length >= 5) {\r\n      categoryId = parseInt(id[0]);\r\n      name = subcategories.find(s => s.id === parseInt(id))?.name;  \r\n    }\r\n\r\n    const stuff = products[categoryId]; \r\n\r\n    return (\r\n      <div className=\"category-page\">\r\n        <h3>{ name }</h3>\r\n        <hr />\r\n        {!stuff.length && <div>No products</div>}\r\n        <ul>\r\n          {map(stuff, (object: Stuff) => {\r\n            return (\r\n              <li key={object.id}><Link to={`/product/${object.id}`}>{object.name}</Link></li>\r\n            )\r\n          })}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  products: state.products,\r\n  categories: state.categories,\r\n  subcategories: state.subcategories\r\n});\r\n\r\nexport default connect(mapStateToProps, {})(CategoryPage);\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Media from '../shared/Media';\r\nimport State from '../../redux/State';\r\nimport { FeedRowProps } from './types';\r\nimport { fetchProduct } from '../../redux/products/actions';\r\n\r\nimport './FeedRow.scss';\r\n\r\nclass FeedRow extends Component<FeedRowProps, any> {\r\n  getProductType = () => {\r\n    const { feedPost, subcategories } = this.props;\r\n\r\n    let subcategory = subcategories.find(s => s.id === feedPost.product.subcategory);\r\n    return subcategory ? subcategory.name : null;\r\n  }\r\n\r\n  renderMessage() {\r\n    const { feedPost } = this.props;\r\n  \r\n    return (\r\n    <div className=\"feed-row__description\">\r\n      <span className=\"feed-row__name\">{feedPost.friend_firstName} {feedPost.friend_lastName} </span> added <b>{feedPost.product.name}</b> in {this.getProductType()}\r\n    </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { feedPost } = this.props;\r\n    const exchangeTo = { pathname: `/exchange`, product: feedPost.product, friend: feedPost.friend_id };\r\n    const loanTo = { pathname: `/loan`, product: feedPost.product, friend: feedPost.friend_id };\r\n    const buyTo = { pathname: `/buy`, product: feedPost.product, friend: feedPost.friend_id };\r\n\r\n    return (\r\n      <div className=\"feed-row\">\r\n        {this.renderMessage()}\r\n        <div className=\"feed-row__image\">\r\n          <Media\r\n            fileName={feedPost.product.id}\r\n            category={feedPost.product.category}\r\n            subcategory={feedPost.product.subcategory}\r\n            format=\"jpg\"\r\n            height=\"100\"\r\n            width=\"100\"\r\n            isProduct=\"true\"\r\n          />\r\n        </div>\r\n        <div className=\"feed-row__actions\">\r\n          <div className=\"feed-row__action feed-row__text\">Ask for:</div>\r\n          <div className=\"feed-row__action feed-row__link\">\r\n            <Link to={loanTo}>Borrow</Link>\r\n          </div>\r\n          <div className=\"feed-row__action feed-row__link\">\r\n            <Link to={exchangeTo}>Trade</Link>\r\n          </div>\r\n          {feedPost.product.cost &&\r\n            (<div className=\"feed-row__action feed-row__link\">\r\n              <Link to={buyTo}>Buy</Link>\r\n            </div>)}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchProps = {\r\n  fetchProduct,\r\n};\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  subcategories: state.subcategories\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(FeedRow);\r\n","import { makeStandardActionCreator } from '../action-helpers';\r\nimport { FRIENDS_FETCHED, FRIEND_PRODUCTS_FETCHED } from './constants';\r\n\r\nimport { getFriends, getStuffiers } from '../../services/stuffier';\r\nimport { getListStuff, getStuffiersList } from '../../services/stuff';\r\nimport { mapFriends } from '../../components/helpers/UserHelper';\r\nimport { getFriendProducts, mapStuff } from '../../components/helpers/StuffHelper';\r\n\r\nconst friendsFetched = makeStandardActionCreator(FRIENDS_FETCHED);\r\nexport const fetchFriends = (email) => dispatch => {\r\n  return getFriends(email)\r\n  .then(res => getStuffiers(mapFriends(res.data)))\r\n  .then(res => {\r\n    const friends = res.data || [];   // TODO: Make this call better\r\n    dispatch(friendsFetched(friends, email));\r\n    return Promise.resolve(friends);\r\n  });\r\n}\r\n\r\nconst friendProductsFetched = makeStandardActionCreator(FRIEND_PRODUCTS_FETCHED);\r\nexport const fetchFriendsProducts = (friends) => dispatch => {\r\n  let stuffiers_stuff = [];\r\n\r\n  return getStuffiersList(friends)\r\n  .then(res => {\r\n    stuffiers_stuff = res.data;\r\n    return getListStuff(mapStuff(res.data));\r\n  })\r\n  .then(res => {\r\n    const products = res.data;\r\n    const friendsFilled = getFriendProducts(friends, products, stuffiers_stuff);\r\n    dispatch(friendProductsFetched(friendsFilled))\r\n    return Promise.resolve(friendsFilled);\r\n  });  \r\n}\r\n","export const FRIENDS_FETCHED = 'USER::FRIENDS_FETCHED';\r\nexport const FRIEND_PRODUCTS_FETCHED = 'FRIENDS::PRODUCTS_FETCHED';\r\n","import { sortBy } from 'lodash';\r\n\r\nimport { makeStandardActionCreator } from '../action-helpers';\r\nimport { FEED_FETCHED } from './constants';\r\n\r\nconst generateFeed = (friends) => {\r\n  let feed = [];\r\n\r\n  friends.forEach(friend => {\r\n    if (friend.products) {\r\n      friend.products.forEach(product => {\r\n        feed.push({\r\n          friend_id: friend.id,\r\n          friend_firstName: friend.first_name || '',\r\n          friend_lastName: friend.last_name || '',\r\n          product,\r\n          date: product._created\r\n        });  \r\n      });\r\n    }\r\n  });\r\n\r\n  return sortBy(feed, 'date');\r\n}\r\n\r\nconst feedFetched = makeStandardActionCreator(FEED_FETCHED);\r\nexport const fetchFeed = fullFriends => dispatch => {\r\n  let feed = generateFeed(fullFriends);\r\n  dispatch(feedFetched(feed));\r\n  return feed;\r\n}\r\n","export const FEED_FETCHED = 'FEED::FETCHED';\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { map } from 'lodash';\r\nimport { withTranslation } from 'react-i18next';\r\n\r\nimport FeedPost from '../types/FeedPost';\r\nimport FeedRow from './FeedRow';\r\nimport Loading from '../shared/Loading';\r\nimport State from '../../redux/State';\r\nimport User from '../types/User';\r\nimport { ContentProps, ContentState } from './types';\r\nimport { fetchFriendsProducts } from '../../redux/friends/actions';\r\nimport { fetchFeed } from '../../redux/feed/actions';\r\nimport './Content.scss';\r\n\r\nclass Content extends Component<ContentProps, ContentState> {\r\n  _isMounted = false;\r\n\r\n  state = {\r\n    isLoading: false,\r\n    feed: [],\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { feed } = this.props;\r\n    this._isMounted = true;\r\n\r\n    if (!feed.length) {\r\n      this.setState({ isLoading: true });\r\n    }\r\n\r\n    this.getFeed();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  getFeed = () => {\r\n    const { fetchFriendsProducts, fetchFeed, friends } = this.props;\r\n\r\n    fetchFriendsProducts(friends)\r\n    .then((fullFriends: User[]) => fetchFeed(fullFriends))\r\n    .catch(() => console.log('Error Feed Fetched'))\r\n    .finally(() => this.setState({ isLoading: false }));\r\n  }\r\n\r\n  render() {\r\n    const { feed, friends, t } = this.props;\r\n    const { isLoading } = this.state;\r\n\r\n    if (isLoading) {\r\n      return (\r\n        <div className=\"content__loading\">\r\n          <Loading size=\"xl\" message={t(\"Loading-Feed\")} />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (!friends.length || !feed.length) {\r\n      return <div>No Friends! Add friends!</div>\r\n    }\r\n\r\n    return (\r\n      <div className=\"content\">\r\n        <div className=\"content__info\">\r\n          <div className=\"content__rows\">\r\n            {map(feed, (feedPost: FeedPost, index) => (<FeedRow key={index} feedPost={feedPost} />))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapDispatchProps = {\r\n  fetchFriendsProducts,\r\n  fetchFeed\r\n};\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  user: state.user,\r\n  friends: state.friends,\r\n  subcategories: state.subcategories,\r\n  feed: state.feed\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(withTranslation()<any>(Content));\r\n","export const barChartData = [\r\n  { name: 'Page A', uv: 4000, pv: 2400, amt: 2400 },\r\n  { name: 'Page B', uv: 3000, pv: 1398, amt: 2210 },\r\n  { name: 'Page C', uv: 2000, pv: 9800, amt: 2290 },\r\n  { name: 'Page D', uv: 2780, pv: 3908, amt: 2000 },\r\n  { name: 'Page E', uv: 1890, pv: 4800, amt: 2181 },\r\n  { name: 'Page F', uv: 2390, pv: 3800, amt: 2500 },\r\n  { name: 'Page G', uv: 3490, pv: 4300, amt: 2100 }\r\n];\r\n\r\nexport const treemapChartData = [\r\n  {\r\n    name: 'axis',\r\n    children: [\r\n      { name: 'Axes', size: 1302 },\r\n      { name: 'Axis', size: 24593 },\r\n      { name: 'AxisGridLine', size: 652 },\r\n      { name: 'AxisLabel', size: 636 },\r\n      { name: 'CartesianAxes', size: 6703 },\r\n    ],\r\n  },\r\n  {\r\n    name: 'controls',\r\n    children: [\r\n      { name: 'AnchorControl', size: 2138 },\r\n      { name: 'ClickControl', size: 3824 },\r\n      { name: 'Control', size: 1353 },\r\n      { name: 'ControlList', size: 4665 },\r\n      { name: 'DragControl', size: 2649 },\r\n      { name: 'ExpandControl', size: 2832 },\r\n      { name: 'HoverControl', size: 4896 },\r\n      { name: 'IControl', size: 763 },\r\n      { name: 'PanZoomControl', size: 5222 },\r\n      { name: 'SelectionControl', size: 7862 },\r\n      { name: 'TooltipControl', size: 8435 },\r\n    ],\r\n  },\r\n  {\r\n    name: 'data',\r\n    children: [\r\n      { name: 'Data', size: 20544 },\r\n      { name: 'DataList', size: 19788 },\r\n      { name: 'DataSprite', size: 10349 },\r\n      { name: 'EdgeSprite', size: 3301 },\r\n      { name: 'NodeSprite', size: 19382 },\r\n      {\r\n        name: 'render',\r\n        children: [\r\n          { name: 'ArrowType', size: 698 },\r\n          { name: 'EdgeRenderer', size: 5569 },\r\n          { name: 'IRenderer', size: 353 },\r\n          { name: 'ShapeRenderer', size: 2247 },\r\n        ],\r\n      },\r\n      { name: 'ScaleBinding', size: 11275 },\r\n      { name: 'Tree', size: 7147 },\r\n      { name: 'TreeBuilder', size: 9930 },\r\n    ],\r\n  },\r\n  {\r\n    name: 'events',\r\n    children: [\r\n      { name: 'DataEvent', size: 7313 },\r\n      { name: 'SelectionEvent', size: 6880 },\r\n      { name: 'TooltipEvent', size: 3701 },\r\n      { name: 'VisualizationEvent', size: 2117 },\r\n    ],\r\n  },\r\n  {\r\n    name: 'legend',\r\n    children: [\r\n      { name: 'Legend', size: 20859 },\r\n      { name: 'LegendItem', size: 4614 },\r\n      { name: 'LegendRange', size: 10530 },\r\n    ],\r\n  },\r\n  {\r\n    name: 'operator',\r\n    children: [\r\n      {\r\n        name: 'distortion',\r\n        children: [\r\n          { name: 'BifocalDistortion', size: 4461 },\r\n          { name: 'Distortion', size: 6314 },\r\n          { name: 'FisheyeDistortion', size: 3444 },\r\n        ],\r\n      },\r\n      {\r\n        name: 'encoder',\r\n        children: [\r\n          { name: 'ColorEncoder', size: 3179 },\r\n          { name: 'Encoder', size: 4060 },\r\n          { name: 'PropertyEncoder', size: 4138 },\r\n          { name: 'ShapeEncoder', size: 1690 },\r\n          { name: 'SizeEncoder', size: 1830 },\r\n        ],\r\n      },\r\n      {\r\n        name: 'filter',\r\n        children: [\r\n          { name: 'FisheyeTreeFilter', size: 5219 },\r\n          { name: 'GraphDistanceFilter', size: 3165 },\r\n          { name: 'VisibilityFilter', size: 3509 },\r\n        ],\r\n      },\r\n      { name: 'IOperator', size: 1286 },\r\n      {\r\n        name: 'label',\r\n        children: [\r\n          { name: 'Labeler', size: 9956 },\r\n          { name: 'RadialLabeler', size: 3899 },\r\n          { name: 'StackedAreaLabeler', size: 3202 },\r\n        ],\r\n      },\r\n      {\r\n        name: 'layout',\r\n        children: [\r\n          { name: 'AxisLayout', size: 6725 },\r\n          { name: 'BundledEdgeRouter', size: 3727 },\r\n          { name: 'CircleLayout', size: 9317 },\r\n          { name: 'CirclePackingLayout', size: 12003 },\r\n          { name: 'DendrogramLayout', size: 4853 },\r\n          { name: 'ForceDirectedLayout', size: 8411 },\r\n          { name: 'IcicleTreeLayout', size: 4864 },\r\n          { name: 'IndentedTreeLayout', size: 3174 },\r\n          { name: 'Layout', size: 7881 },\r\n          { name: 'NodeLinkTreeLayout', size: 12870 },\r\n          { name: 'PieLayout', size: 2728 },\r\n          { name: 'RadialTreeLayout', size: 12348 },\r\n          { name: 'RandomLayout', size: 870 },\r\n          { name: 'StackedAreaLayout', size: 9121 },\r\n          { name: 'TreeMapLayout', size: 9191 },\r\n        ],\r\n      },\r\n      { name: 'Operator', size: 2490 },\r\n      { name: 'OperatorList', size: 5248 },\r\n      { name: 'OperatorSequence', size: 4190 },\r\n      { name: 'OperatorSwitch', size: 2581 },\r\n      { name: 'SortOperator', size: 2023 },\r\n    ],\r\n  }\r\n];\r\n\r\nexport const pieChartData01 = [\r\n  { name: 'Group A', value: 400 },\r\n  { name: 'Group B', value: 300 },\r\n  { name: 'Group C', value: 300 },\r\n  { name: 'Group D', value: 200 }\r\n];\r\n\r\nexport const pieChartData02 = [\r\n  { name: 'A1', value: 100 },\r\n  { name: 'A2', value: 300 },\r\n  { name: 'B1', value: 100 },\r\n  { name: 'B2', value: 80 },\r\n  { name: 'B3', value: 40 },\r\n  { name: 'B4', value: 30 },\r\n  { name: 'B5', value: 50 },\r\n  { name: 'C1', value: 100 },\r\n  { name: 'C2', value: 200 },\r\n  { name: 'D1', value: 150 },\r\n  { name: 'D2', value: 50 }\r\n];\r\n\r\nexport const radialChartData = [\r\n  { name: '18-24', uv: 31.47, pv: 2400, fill: '#8884d8' },\r\n  { name: '25-29', uv: 26.69, pv: 4567, fill: '#83a6ed' },\r\n  { name: '30-34', uv: 15.69, pv: 1398, fill: '#8dd1e1' },\r\n  { name: '35-39', uv: 8.22, pv: 9800, fill: '#82ca9d' },\r\n  { name: '40-49', uv: 8.63, pv: 3908, fill: '#a4de6c' },\r\n  { name: '50+', uv: 2.63, pv: 4800, fill: '#d0ed57' },\r\n  { name: 'unknow', uv: 6.67, pv: 4800, fill: '#ffc658' }\r\n];\r\n","import React, { Component } from 'react';\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, LineChart, Line } from 'recharts';\r\nimport { AreaChart, Area } from 'recharts';\r\nimport { Treemap } from 'recharts';\r\nimport { PieChart, Pie } from 'recharts';\r\nimport { ScatterChart, Scatter } from 'recharts';\r\nimport { RadialBarChart, RadialBar } from 'recharts';\r\nimport { barChartData, treemapChartData, pieChartData01, pieChartData02, radialChartData } from '../../services/charts';\r\n\r\nclass Charts extends Component {\r\n  state = {\r\n    barChartData: [],\r\n    treemapChartData: [],\r\n    pieChartData01: [],\r\n    pieChartData02: [],\r\n    radialChartData: [],  \r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <BarChart width={600} height={300} data={barChartData}\r\n          margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\r\n          <XAxis dataKey=\"name\" />\r\n          <YAxis />\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <Tooltip />\r\n          <Legend />\r\n          <Bar dataKey=\"pv\" fill=\"#8884d8\" />\r\n          <Bar dataKey=\"uv\" fill=\"#82ca9d\" />\r\n        </BarChart>\r\n\r\n        <LineChart width={600} height={300} data={barChartData}>\r\n          <XAxis dataKey=\"name\" padding={{ left: 30, right: 30 }} />\r\n          <YAxis />\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <Tooltip />\r\n          <Legend />\r\n          <Line type=\"monotone\" dataKey=\"pv\" stroke=\"#8884d8\" activeDot={{ r: 8 }} />\r\n          <Line type=\"monotone\" dataKey=\"uv\" stroke=\"#82ca9d\" />\r\n        </LineChart>\r\n\r\n        <AreaChart width={730} height={250} data={barChartData}\r\n          margin={{ top: 10, right: 30, left: 0, bottom: 0 }}>\r\n          <defs>\r\n            <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n              <stop offset=\"5%\" stopColor=\"#8884d8\" stopOpacity={0.8} />\r\n              <stop offset=\"95%\" stopColor=\"#8884d8\" stopOpacity={0} />\r\n            </linearGradient>\r\n            <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n              <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8} />\r\n              <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0} />\r\n            </linearGradient>\r\n          </defs>\r\n          <XAxis dataKey=\"name\" />\r\n          <YAxis />\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <Tooltip />\r\n          <Area type=\"monotone\" dataKey=\"uv\" stroke=\"#8884d8\" fillOpacity={1} fill=\"url(#colorUv)\" />\r\n          <Area type=\"monotone\" dataKey=\"pv\" stroke=\"#82ca9d\" fillOpacity={1} fill=\"url(#colorPv)\" />\r\n        </AreaChart>\r\n\r\n        <Treemap\r\n          width={730}\r\n          height={250}\r\n          data={treemapChartData}\r\n          dataKey=\"size\"\r\n          aspectRatio={4 / 3}\r\n          stroke=\"#fff\"\r\n          fill=\"#8884d8\"\r\n        />\r\n\r\n        <PieChart width={800} height={400}>\r\n          <Pie dataKey=\"value\" data={pieChartData01} cx={200} cy={200} outerRadius={60} fill=\"#8884d8\" />\r\n          <Pie dataKey=\"value\" data={pieChartData02} cx={200} cy={200} innerRadius={70} outerRadius={90} fill=\"#82ca9d\" label />\r\n        </PieChart>\r\n\r\n        <ScatterChart width={730} height={250}\r\n          margin={{ top: 20, right: 20, bottom: 10, left: 10 }}>\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <XAxis dataKey=\"value\" name=\"stature\" unit=\"cm\" />\r\n          <YAxis dataKey=\"value\" name=\"weight\" unit=\"cm\" />\r\n          <Tooltip cursor={{ strokeDasharray: '3 3' }} />\r\n          <Legend />\r\n          <Scatter name=\"Data01\" data={pieChartData01} fill=\"#8884d8\" />\r\n          <Scatter name=\"Data02\" data={pieChartData02} fill=\"#82ca9d\" />\r\n        </ScatterChart>\r\n\r\n        <RadialBarChart width={730} height={250} innerRadius=\"10%\" outerRadius=\"80%\" data={radialChartData} startAngle={180} endAngle={0}>\r\n          <RadialBar angleAxisId={15} label={{ fill: '#666', position: 'insideStart' }} background dataKey='uv' />\r\n          <Legend iconSize={10} width={120} height={140} layout='vertical' verticalAlign='middle' align=\"right\" />\r\n          <Tooltip />\r\n        </RadialBarChart>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Charts;\r\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Loading from '../shared/Loading';\r\nimport TextField from '../shared/TextField';\r\nimport { getSearchResults, getProductResults } from '../../services/stuff';\r\nimport './SearchBar.scss';\r\n\r\nclass SearchBar extends Component<any, any> {\r\n  source: any = null;\r\n  node: any = null;\r\n\r\n  state = {\r\n    isLoading: false,\r\n    isOpen: false,\r\n    searchText: '',\r\n    results: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('click', this.handleClickOutside, true);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n      document.removeEventListener('click', this.handleClickOutside, true);\r\n  }\r\n\r\n  handleClickOutside = (event: any) => {\r\n    const domNode = ReactDOM.findDOMNode(this);\r\n\r\n    if (!domNode || !domNode.contains(event.target)) {\r\n      this.setState({ searchText: '', isOpen: false });\r\n    }\r\n  }\r\n\r\n  fetchResults = (searchText: string) => {\r\n    const { products, selectProduct } = this.props;\r\n\r\n    this.source && this.source.cancel('Cancel pending requests.');\r\n    this.source = axios.CancelToken.source();\r\n    this.setState({ searchText, isOpen: true, isLoading: true });\r\n\r\n    if (searchText) {\r\n      if (selectProduct) {\r\n        this.setState({ results: getProductResults(searchText, products), isOpen: true, isLoading: false });\r\n      } else {\r\n        getSearchResults(searchText, products, this.source.token).then((results: any) => {\r\n          if (results.length) {\r\n            this.setState({ results, isOpen: true, isLoading: false });\r\n          } else {\r\n            this.setState({ isOpen: false, isLoading: false });\r\n          }\r\n        });  \r\n      }\r\n    } else {\r\n      this.setState({ isOpen: false, isLoading: false });\r\n    }\r\n  }\r\n\r\n  getLinkTo = (result: any) => {\r\n    return { pathname: `/${result.type.toLowerCase()}/${result.id}`, [result.type.toLowerCase()]: result.name };\r\n  }\r\n\r\n  renderResults() {\r\n    const { results } = this.state;\r\n    const { selectProduct } = this.props;\r\n\r\n    if (results.length) {\r\n      return (\r\n        <div className=\"search__results\">\r\n          {results.map((result: any, index: number) => {\r\n            return (\r\n              <div className=\"search__result\" key={index}>\r\n              {!selectProduct &&\r\n                <Link key={index} className=\"search__result-link\" to={this.getLinkTo(result)}>\r\n                  {this.renderResultName(result)}\r\n                </Link>\r\n              }\r\n              {selectProduct && \r\n                <button key={index} onClick={event => event && selectProduct(result)}>\r\n                  {this.renderResultName(result)}\r\n                </button>\r\n              }\r\n              </div>);\r\n          })}\r\n        </div>\r\n      );  \r\n    }\r\n  }\r\n\r\n  renderResultName = (result: any) => {\r\n    const type = result.type ? result.type[0] : 'P';\r\n\r\n    return (\r\n      <div className=\"search__result-info\">\r\n        <div className=\"search__result-name\">{result.name}</div>\r\n        <div className={`search__result-type search__result-${type}`}>| {type}</div>\r\n      </div>                 \r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { isLoading } = this.state;\r\n    const isOpen = this.state.isOpen ? 'dropdown--is-open' : '';\r\n\r\n    return (\r\n      <div className=\"search-bar\" ref={node => this.node = node}>\r\n        <div className=\"search-bar__form\">\r\n          <TextField \r\n            name=\"search\"\r\n            type=\"input\"\r\n            placeholder=\"Find stuff...\"\r\n            onChange={(value: string) => this.fetchResults(value)}\r\n            value={this.state.searchText}\r\n          >\r\n          </TextField>\r\n          <div className=\"search-bar__button\">\r\n            <i className=\"fas fa-search\"></i>\r\n          </div>\r\n        </div>\r\n        <div className=\"search-bar__content-container\">\r\n          <div className={`search-bar__content ${isOpen}`}>\r\n            {isLoading && <Loading size=\"md\"></Loading>}\r\n            {!isLoading && this.renderResults()}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchBar;\r\n","import { makeStandardActionCreator } from '../action-helpers';\r\nimport { EXCHANGES_FETCHED, EXCHANGE_REQUESTED, EXCHANGE_DELETED } from './constants';\r\nimport { addExchangeRequest, getExchangeRequests, deleteExchangeRequest } from '../../services/exchange';\r\n\r\nconst requestExchange = makeStandardActionCreator(EXCHANGE_REQUESTED);\r\nexport const exchangeRequest = (idOwner, idStuff, idRequestor, idRequestorStuff) => dispatch => {\r\n  return addExchangeRequest(idOwner, idStuff, idRequestor, idRequestorStuff)\r\n  .then(res => {\r\n    dispatch(requestExchange(res.data, idOwner));\r\n    Promise.resolve(res.data);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n\r\nconst requestExchanges = makeStandardActionCreator(EXCHANGES_FETCHED);\r\nexport const fetchExchangeRequests = userId => dispatch => {\r\n  return getExchangeRequests(userId)\r\n  .then(res => {\r\n    dispatch(requestExchanges(res.data, userId));\r\n    Promise.resolve(res.data);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n\r\nconst requestDelete = makeStandardActionCreator(EXCHANGE_DELETED);\r\nexport const deleteRequest = _id => dispatch => {\r\n  return deleteExchangeRequest(_id)\r\n  .then(res => {\r\n    const result = res.data.result[0];\r\n    dispatch(requestDelete(result))\r\n    Promise.resolve(result);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n","export const EXCHANGE_REQUESTED = 'EXCHANGE::REQUESTED';\r\nexport const EXCHANGES_FETCHED = 'EXCHANGES::FETCHED';\r\nexport const EXCHANGE_DELETED = 'EXCHANGE::DELETED';\r\n","import React, { Component } from 'react';\r\nimport { Redirect, withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { get, isEmpty } from 'lodash';\r\n\r\nimport Button from '../shared/Button';\r\nimport Category from '../types/Category';\r\nimport Media from '../shared/Media';\r\nimport Product from '../types/Product';\r\nimport State from '../../redux/State';\r\nimport Subcategory from '../types/Subcategory';\r\nimport SearchBar from '../shared/SearchBar';\r\nimport WarningMessage from '../shared/WarningMessage';\r\nimport { WarningMessageType } from '../shared/types';\r\nimport { ExchangeProps } from './types';\r\nimport { exchangeRequest } from '../../redux/exchange-requests/actions';\r\nimport { getProductsList } from '../helpers/StuffHelper';\r\nimport { getStuffiers } from '../../services/stuffier';\r\n\r\nimport './Exchange.scss';\r\n\r\nclass Exchange extends Component<ExchangeProps, any> {\r\n  state = {\r\n    userProducts: [],\r\n    selectedProduct: {},\r\n    message: '',\r\n    friend: { first_name: '' },\r\n    type: WarningMessageType.EMPTY\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { history, location, products } = this.props;\r\n    const product: Product = location.product;\r\n\r\n    if (!product || product === undefined) {\r\n      history.push('/');\r\n    }\r\n\r\n    const userProducts = getProductsList(products)\r\n      .filter(p => p.category === product.category || p.subcategory === product.subcategory);\r\n\r\n    this.setState({ userProducts });\r\n\r\n    getStuffiers([{ id: location.friend }])\r\n    .then((res: any) => this.setState({ friend: res.data[0] }));  \r\n  }\r\n\r\n  requestExchange = () => {\r\n    const { exchangeRequest, history, location, user } = this.props;\r\n    const { selectedProduct } = this.state;\r\n\r\n    const idOwner = location.friend;\r\n\r\n    console.log('This is to execute request exchange');\r\n\r\n    exchangeRequest(idOwner, location.product.id, user.id, get(selectedProduct, 'id'))\r\n    .then(() => this.setState({ message: 'Exchange request successfully', type: WarningMessageType.SUCCESSFUL }))\r\n    .catch(() => this.setState({ message: 'Exchange request failed', type: WarningMessageType.SUCCESSFUL }))\r\n    .finally(() => history.push('/'));\r\n  }\r\n\r\n  selectProduct = (product: Product) => {\r\n    this.setState({ selectedProduct: product });\r\n  }\r\n\r\n  renderProduct = (product: Product) => {\r\n    const { categories, subcategories } = this.props;\r\n\r\n    const category: Category = categories.filter(c => c.id === product.category)[0];\r\n    const subcategory: Subcategory = subcategories.filter(s => s.id === product.subcategory)[0];\r\n\r\n    return (\r\n      <div className=\"exchange__product\">\r\n        <Media\r\n          fileName={product.id}\r\n          category={product.category}\r\n          subcategory={product.subcategory}\r\n          format=\"jpg\"\r\n          height=\"100\"\r\n          width=\"100\"\r\n          isProduct=\"true\"\r\n        />\r\n        <div className=\"exchange__product-info\">\r\n          <div>{product.name}</div>\r\n          <div>{category.name}</div>\r\n          <div>{subcategory.name}</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { location } = this.props;\r\n    const { friend, selectedProduct, userProducts, message, type } = this.state;\r\n    const product = location.product;\r\n\r\n    if (!userProducts.length) return <div>No products to exchange under same category</div>;\r\n\r\n    if (!product) return <Redirect to='/'/>\r\n\r\n    return (\r\n      <div className=\"exchange\">\r\n        <WarningMessage message={message} type={type} />\r\n        <div className=\"exchange__header\">\r\n          <SearchBar products={userProducts} selectProduct={(p: Product) => this.selectProduct(p)} />\r\n        </div>\r\n        { !isEmpty(selectedProduct) &&\r\n          <div className=\"exchange__content\">\r\n            <div className=\"exchange__compare\">\r\n              <div className=\"exchange__compare-info\">\r\n                <h4>My Product</h4>\r\n                {this.renderProduct(selectedProduct)}\r\n              </div>\r\n              <div className=\"exchange__line\"></div>\r\n              <div className=\"exchange__compare-info\">\r\n                <h4>{friend?.first_name} Product</h4>\r\n                {this.renderProduct(product)}\r\n              </div>\r\n            </div>\r\n            <Button\r\n              type=\"submit\"\r\n              onClick={this.requestExchange}\r\n              text=\"Request Exchange\">\r\n            </Button>\r\n          </div>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  categories: state.categories,\r\n  products: state.products,\r\n  subcategories: state.subcategories,\r\n  user: state.user\r\n});\r\n\r\nconst mapDispatchProps = {\r\n  exchangeRequest\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(withRouter<any, React.ComponentClass<any>>(Exchange));\r\n","import axios from 'axios';\r\nimport routes from './routes';\r\nimport config from './config';\r\n\r\nexport const addExchangeRequest = (id_stuffier, id_stuff, id_friend, id_friend_stuff) => (\r\n  axios.post(routes.exchange.request(), { id_stuffier, id_friend, id_stuff, id_friend_stuff }, { headers: config.headers })\r\n);\r\n\r\nexport const getExchangeRequests = id_stuffier => (\r\n  axios.get(routes.exchange.list(id_stuffier), { headers: config.headers })\r\n);\r\n\r\nexport const deleteExchangeRequest = _id => (\r\n  axios.delete(routes.exchange.deleteRequest(_id), { headers: config.headers })\r\n);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withTranslation } from 'react-i18next';\r\n\r\nimport Button from '../shared/Button';\r\nimport State from '../../redux/State';\r\nimport TextField from '../shared/TextField';\r\nimport User from '../types/User';\r\nimport WarningMessage from '../shared/WarningMessage';\r\nimport { addFriend, deleteRequest, getStuffiers, requestToBeFriend } from '../../services/stuffier';\r\nimport { mapIds } from '../helpers/UserHelper';\r\nimport { FriendsProps } from './types';\r\nimport { WarningMessageType } from '../shared/types';\r\n\r\nimport './Friends.scss';\r\n\r\nclass Friends extends Component<FriendsProps, any> {\r\n  textField = React.createRef<TextField>();\r\n\r\n  state = {\r\n    requests: [],\r\n    emailToRequest: '',\r\n    message: null,\r\n    textfield: null,\r\n    executeStatus: WarningMessageType.EMPTY\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { friendsRequests } = this.props;\r\n\r\n    if (friendsRequests.length > 0) {\r\n      getStuffiers(mapIds(friendsRequests))\r\n      .then((res: any) => this.setState({ requests: res.data }));\r\n    }\r\n  }\r\n\r\n  executeRequest = (friend: User, isAccepted = false) => {\r\n    const { user } = this.props;\r\n    let promises = [deleteRequest(user.email, friend.id)];\r\n    isAccepted && promises.push(addFriend(user.email, friend.id));\r\n\r\n    Promise.all(promises)\r\n    .then((values: any) => {\r\n      !isAccepted && this.setState({ executeStatus: WarningMessageType.WARNING });\r\n      console.log(values[0].data);\r\n      isAccepted && this.setState({ executeStatus: WarningMessageType.SUCCESSFUL });\r\n      isAccepted && console.log(values[1].data);\r\n    })\r\n    .catch(() => this.setState({ executeStatus: WarningMessageType.ERROR }));\r\n  }\r\n\r\n  renderRequests = () => {\r\n    const { requests } = this.state;\r\n\r\n    return (\r\n      <div className=\"friends__requests\">\r\n        <hr />\r\n        <h3 className=\"friends__title\">\r\n          <div>Requests</div>\r\n          <div className=\"friends__warning\">{requests.length}</div>\r\n        </h3>\r\n        <ul>\r\n          {requests.map((friend: User, index: number) => {\r\n            return (\r\n              <li className=\"friends__request\" key={index}>\r\n                <div className=\"friends__request-text\">\r\n                  {friend.first_name} {friend.last_name} ({friend.email})\r\n                </div>\r\n                <div className=\"friends__request-button\">\r\n                  <Button onClick={() => this.executeRequest(friend, true)} text=\"Accept\"></Button>\r\n                </div>\r\n                <div className=\"friends__request-button\">\r\n                  <Button onClick={() => this.executeRequest(friend)} text=\"Reject\"></Button>\r\n                </div>\r\n              </li>\r\n            )}\r\n          )}\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  handleRequest = () => {\r\n    const { user } = this.props;\r\n    const { emailToRequest } = this.state;\r\n\r\n    requestToBeFriend(emailToRequest, user.id)\r\n    .then(() => this.setState({ message: 'Request sent succesfully', emailToRequest: '' }))\r\n    .catch(() => this.setState({ message: 'Request couldnt be sent', emailToRequest: '' }))\r\n  }\r\n\r\n  getMessage = () => {\r\n    const { emailToRequest, executeStatus } = this.state;\r\n    const message =\r\n      executeStatus === WarningMessageType.ERROR ? 'was not added' :\r\n      executeStatus === WarningMessageType.WARNING ? 'was rejected!' :\r\n      executeStatus === WarningMessageType.SUCCESSFUL ? 'was accepted!' : null;\r\n\r\n    if (!message) return '';\r\n\r\n    return `Friend ${emailToRequest} ${message}`;\r\n  }\r\n\r\n  render() {\r\n    const { friends, t, user } = this.props;\r\n    const { requests, message, emailToRequest, executeStatus } = this.state;\r\n\r\n    return (\r\n      <div className=\"friends\">\r\n        <h2 className=\"friends__title\">{t('Friends-Title', { first_name: user.first_name })}</h2>\r\n        <WarningMessage message={this.getMessage()} type={executeStatus}/>\r\n        <ul>\r\n          {friends.map((friend: any) => (<li key={friend.id}>{friend.first_name} {friend.last_name} - {friend.email}</li>))}\r\n        </ul>\r\n        {requests.length > 0 && this.renderRequests()}\r\n        <hr />\r\n        <div>\r\n          <h3 className=\"friends__title\">{t('Add-Friend')}</h3>\r\n          <div className=\"friends__form\">\r\n            <TextField\r\n              placeholder=\"Friend Email\"\r\n              type=\"text\"\r\n              name=\"friend_email\"\r\n              value={emailToRequest}\r\n              onChange={(emailToRequest: string) => this.setState({ emailToRequest })}\r\n            >\r\n            </TextField>\r\n            <div className=\"friends__button\">\r\n              <Button text=\"Request\" onClick={() => this.handleRequest()}></Button>\r\n            </div>\r\n          </div>\r\n          {message && (<div className=\"friends__message\">{message}</div>)}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  user: state.user,\r\n  friends: state.friends,\r\n  friendsRequests: state.friendsRequests\r\n});\r\n\r\nexport default connect(mapStateToProps, {})(withTranslation()<any>(Friends));\r\n","import { map } from 'lodash';\r\n\r\nexport function mapFriends(friends: any) {\r\n  return map(friends, friend => {\r\n    return { id: friend.id_friend };\r\n  });\r\n}\r\n\r\nexport function mapIds(collection: any) {\r\n  return map(collection, collection => {\r\n    return { id: collection.id_friend };\r\n  });\r\n}\r\n","import { makeStandardActionCreator } from '../action-helpers';\r\nimport { LOANS_FETCHED, LOAN_REQUESTED, LOAN_DELETED } from './constants';\r\nimport { addLoanRequest, getLoanRequests, deleteLoanRequest } from '../../services/loan';\r\n\r\nconst requestLoan = makeStandardActionCreator(LOAN_REQUESTED);\r\nexport const loanRequest = (idOwner, idStuff, idRequestor) => dispatch => {\r\n  return addLoanRequest(idOwner, idStuff, idRequestor)\r\n  .then(res => {\r\n    dispatch(requestLoan(res.data, idOwner));\r\n    Promise.resolve(res.data);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n\r\nconst fetchLoans = makeStandardActionCreator(LOANS_FETCHED);\r\nexport const fetchLoanRequests = userId => dispatch => {\r\n  return getLoanRequests(userId)\r\n  .then(res => {\r\n    dispatch(fetchLoans(res.data, userId));\r\n    Promise.resolve(res.data);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n\r\nconst requestDeleteLoan = makeStandardActionCreator(LOAN_DELETED);\r\nexport const deleteRequestLoan = _id => dispatch => {\r\n  return deleteLoanRequest(_id)\r\n  .then(res => {\r\n    const result = res.data.result[0];\r\n    dispatch(requestDeleteLoan(result))\r\n    Promise.resolve(result);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n","export const LOAN_REQUESTED = 'LOAN::REQUESTED';\r\nexport const LOANS_FETCHED = 'LOANS::FETCHED';\r\nexport const LOAN_DELETED = 'LOAN::DELETED';\r\n","import React, { Component } from 'react';\r\nimport { Redirect, withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Button from '../shared/Button';\r\nimport Product from '../content/Product';\r\nimport ProductType from '../types/Product';\r\nimport State from '../../redux/State';\r\nimport WarningMessage from '../shared/WarningMessage';\r\nimport { LoanProps } from './types';\r\nimport { WarningMessageType } from '../shared/types';\r\nimport { getStuffiers } from '../../services/stuffier';\r\nimport { loanRequest } from '../../redux/loan-requests/actions';\r\n\r\nimport './Loan.scss';\r\n\r\nclass Loan extends Component<LoanProps, any> {\r\n  _isMounted = false;\r\n\r\n  state = {\r\n    friend: { first_name: '' },\r\n    message: '',\r\n    type: WarningMessageType.EMPTY\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { history, location } = this.props;\r\n    const product: ProductType = location.product;\r\n    this._isMounted = true;\r\n\r\n    if (this._isMounted) {\r\n      if (!product || product === undefined) {\r\n        history.push('/');\r\n      }\r\n  \r\n      getStuffiers([{ id: location.friend }])\r\n      .then((res: any) => this.setState({ friend: res.data[0] }));  \r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  requestLoan = () => {\r\n    const { loanRequest, location, user } = this.props;\r\n    const idOwner = location.friend;\r\n\r\n    loanRequest(idOwner, location.product.id, user.id)\r\n    .then(() => this.setState({ message: 'Exchange request successfully', type: WarningMessageType.SUCCESSFUL }))\r\n    .catch(() => this.setState({ message: 'Exchange request failed', type: WarningMessageType.SUCCESSFUL }))\r\n  }\r\n\r\n  render() {\r\n    const { location } = this.props;\r\n    const { friend, message, type } = this.state; \r\n    const product = location.product;\r\n\r\n    if (!product) return <Redirect to='/' />\r\n\r\n    const match = { params: { id: product.id } };\r\n\r\n    return (\r\n      <div className=\"loan\">\r\n        <WarningMessage message={message} type={type} />\r\n        <div className=\"loan__product\">\r\n          <h2>{friend?.first_name} Product</h2>\r\n          <hr />\r\n          <Product match={match} key={product.id} product={product} />\r\n        </div>\r\n        <Button type=\"submit\" onClick={this.requestLoan} text=\"Request To Borrow\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  categories: state.categories,\r\n  products: state.products,\r\n  subcategories: state.subcategories,\r\n  user: state.user\r\n});\r\n\r\nconst mapDispatchProps = {\r\n  loanRequest\r\n};\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(withRouter<any, React.ComponentClass<any>>(Loan));\r\n","import axios from 'axios';\r\nimport routes from './routes';\r\nimport config from './config';\r\n\r\nexport const addLoanRequest = (id_stuffier, id_stuff, id_friend) => (\r\n  axios.post(routes.loan.request(), { id_stuffier, id_friend, id_stuff }, { headers: config.headers })\r\n);\r\n\r\nexport const getLoanRequests = id_stuffier => (\r\n  axios.get(routes.loan.list(id_stuffier), { headers: config.headers })\r\n);\r\n\r\nexport const deleteLoanRequest = _id => (\r\n  axios.delete(routes.loan.deleteRequest(_id), { headers: config.headers })\r\n);\r\n","import XLSX from 'xlsx';\r\nimport Product from '../types/Product';\r\n\r\n// const excelType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';\r\nconst excelfileExtension = '.xlsx';\r\n\r\nfunction capitalize(word: string) {\r\n  return word.charAt(0).toUpperCase() + word.slice(1);\r\n}\r\n\r\nfunction getArrayofArrays(productsArray: Array<Product>) {\r\n  return productsArray.map((product: Product) => {\r\n    return [product.id, product.name, product.category, product.subcategory];\r\n  });\r\n}\r\n\r\nfunction getColsName(product: any) {\r\n  return Object.keys(product).map((key: string) => capitalize(key))\r\n}\r\n\r\n/*\r\n*  This is to convert \r\n*  Products = { [category.id]: [ {id: 1, name: 'Product' ...} ] to\r\n*  Res = [ ['Id', 'Name', ...], [1, 'Product', ...] ]\r\n*  needed for XLSX.\r\n*/\r\nexport function getDataToExport(products: any) {\r\n  let data: Array<any> = [];\r\n\r\n  Object.keys(products).forEach(key => {\r\n    if (products[key].length > 0) {\r\n\r\n      // Setting cols names first\r\n      // [ ['id', 'name', ...]]\r\n      if (!data.length) {\r\n        data = [getColsName({\r\n          id: products[key][0].id,\r\n          name: products[key][0].name,\r\n          category: products[key][0].category,\r\n          subcategory: products[key][0].subcategory\r\n        })];\r\n      }\r\n\r\n      let arrayOfCategory = getArrayofArrays(products[key]);\r\n      data = [...data, ...arrayOfCategory];\r\n    }\r\n  });\r\n\r\n  return data;\r\n}\r\n\r\n/*\r\n*  XLSX GitHub project\r\n*  https://github.com/SheetJS/sheetjs\r\n*  Example: https://sheetjs.com/demos/writexlsx.html \r\n*/\r\nexport function downloadExcel(products: any, fileName: string) {\r\n  const data = getDataToExport(products);\r\n\r\n  let worsheet_name = \"Products_Sheet\";\r\n  let worksheet_book = XLSX.utils.book_new();\r\n\r\n  /* convert from array of arrays to workbook */\r\n  let worksheet = XLSX.utils.aoa_to_sheet(data);\r\n\r\n  /* add worksheet to workbook */\r\n  XLSX.utils.book_append_sheet(worksheet_book, worksheet, worsheet_name);\r\n  XLSX.writeFile(worksheet_book, `${fileName}${excelfileExtension}`);\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { get, map, uniq } from 'lodash';\r\n\r\nimport Button from '../shared/Button';\r\nimport Category from '../types/Category';\r\nimport ExchangeRequest from '../types/ExchangeRequest';\r\nimport LoanRequest from '../types/LoanRequest';\r\nimport Product from './Product';\r\nimport State from '../../redux/State';\r\nimport User from '../types/User';\r\nimport WarningMessage from '../shared/WarningMessage';\r\nimport { ProductsProps } from '../sections/types';\r\nimport { WarningMessageType } from '../shared/types';\r\nimport { downloadExcel } from '../helpers/DownloadHelper';\r\nimport { deleteRequest } from '../../redux/exchange-requests/actions';\r\nimport { deleteRequestLoan } from '../../redux/loan-requests/actions';\r\nimport { getProductsFromIds } from '../../services/stuff';\r\nimport { isProductsEmpty } from '../helpers/StuffHelper';\r\nimport { mapIds } from '../helpers/StuffHelper';\r\nimport { default as ProductType } from '../types/Product';\r\n\r\nimport './Products.scss';\r\n\r\nclass Products extends Component<ProductsProps, any> {\r\n  state = {\r\n    requestedProducts: [],\r\n    message: '',\r\n    type: WarningMessageType.EMPTY\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { exchangeRequests, loanRequests } = this.props;\r\n    \r\n    const loanIds = loanRequests.map(req => req.id_stuff);\r\n    const exchangeIds = exchangeRequests.map(req => req.id_stuff);\r\n    const exchangeFriendIds = exchangeRequests.map(req => req.id_friend_stuff);\r\n\r\n    const ids = uniq([...loanIds, ...exchangeIds, ...exchangeFriendIds]);\r\n\r\n    getProductsFromIds(mapIds(ids))\r\n    .then(res => this.setState({ requestedProducts: res.data }));\r\n  }\r\n\r\n  generateReport = () => {\r\n    const { products, user } = this.props;\r\n\r\n    downloadExcel(products, `${user.first_name}_products`);\r\n  }\r\n\r\n  executeDeleteExchange = (_id: number, isLoan = false) => {\r\n    const { deleteRequest, deleteRequestLoan } = this.props;\r\n\r\n    if (isLoan) {\r\n      deleteRequestLoan(_id)\r\n      .then(() => this.setState({ message: `Loan request deleted`, type: WarningMessageType.SUCCESSFUL }))\r\n      .catch(() => this.setState({ message: `Loan request couldn't be deleted`, type: WarningMessageType.ERROR }));\r\n    } else {\r\n      deleteRequest(_id)\r\n      .then(() => this.setState({ message: `Exchange request deleted`, type: WarningMessageType.SUCCESSFUL }))\r\n      .catch(() => this.setState({ message: `Exchange request couldn't be deleted`, type: WarningMessageType.ERROR }));  \r\n    }\r\n  }\r\n\r\n  renderRequests = () => {\r\n    const { exchangeRequests, friends, user } = this.props;\r\n    const { requestedProducts } = this.state;\r\n\r\n    return (\r\n      <div className=\"products__requests\">\r\n        <hr />\r\n        <h3 className=\"products__requests-title\">\r\n          <div>Exchange Requests</div>\r\n          <div className=\"products__warning\">{exchangeRequests.length}</div>\r\n        </h3>\r\n        <ul>\r\n          {exchangeRequests.map((request: ExchangeRequest, index: number) => {\r\n            const owner = request.id_stuffier === user.id ? user : friends.filter((f: User) => f.id === request.id_stuffier)[0];\r\n            const requestor = request.id_friend === user.id ? user : friends.filter((f: User) => f.id === request.id_friend)[0];\r\n            const isUserRequestor = user === requestor;\r\n            const isUserOwner = user === owner;\r\n            const rejectText = isUserRequestor ? 'Cancel' : 'Reject';\r\n            const ownerProduct = requestedProducts.find((p: ProductType) => p.id === request.id_stuff);\r\n            const requestorProduct = requestedProducts.find((p: ProductType) => p.id === request.id_friend_stuff);\r\n\r\n            return (\r\n              <li className=\"products__request\" key={index}>\r\n                <div className=\"products__request-group\">\r\n                  <div className=\"products__request-text\">\r\n                    Owner: {isUserOwner ? 'Me' : `${owner.first_name} ${owner.last_name} (${owner.email})`}\r\n                  </div>\r\n                  <div className=\"products__request-text\">\r\n                    Product: {get(ownerProduct, 'name')}\r\n                  </div>\r\n                  <div className=\"products__request-text\">\r\n                    Requestor: {isUserRequestor ? 'Me' : `${requestor.first_name} ${requestor.last_name} (${requestor.email})`}\r\n                  </div>\r\n                  <div className=\"products__request-text\">\r\n                    Product: {get(requestorProduct, 'name')}\r\n                  </div>\r\n                </div>\r\n                <div className=\"products__request-buttons\">\r\n                  {!isUserRequestor && <div className=\"products__request-button\">\r\n                    <Button onClick={() => console.log(\"Accept Exchange\")} text=\"Accept\"></Button>\r\n                  </div>}\r\n                  <div className=\"products__request-button\">\r\n                    <Button onClick={() => this.executeDeleteExchange(request._id)} text={rejectText}></Button>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            )}\r\n          )}\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderLoans = () => {\r\n    const { loanRequests, friends, user } = this.props;\r\n    const { requestedProducts } = this.state; \r\n\r\n    return (\r\n      <div className=\"products__requests\">\r\n        <hr />\r\n        <h3 className=\"products__requests-title\">\r\n          <div>Loan Requests</div>\r\n          <div className=\"products__warning\">{loanRequests.length}</div>\r\n        </h3>\r\n        <ul>\r\n          {loanRequests.map((request: LoanRequest, index: number) => {\r\n            const owner = request.id_stuffier === user.id ? user : friends.filter((f: User) => f.id === request.id_stuffier)[0];\r\n            const requestor = request.id_friend === user.id ? user : friends.filter((f: User) => f.id === request.id_friend)[0];\r\n            const isUserRequestor = user === requestor;\r\n            const isUserOwner = user === owner;\r\n            const rejectText = isUserRequestor ? 'Cancel' : 'Reject';\r\n            const product = requestedProducts.find((p: ProductType) => p.id === request.id_stuff);\r\n\r\n            return (\r\n              <li className=\"products__request\" key={index}>\r\n                <div className=\"products__request-group\">\r\n                  <div className=\"products__request-text\">\r\n                    Owner: {isUserOwner ? 'Me' : `${owner.first_name} ${owner.last_name} (${owner.email})`}\r\n                  </div>\r\n                  <div className=\"products__request-text\">\r\n                    Requestor: {isUserRequestor ? 'Me' : `${requestor.first_name} ${requestor.last_name} (${requestor.email})`}\r\n                  </div>\r\n                  <div className=\"products__request-text\">\r\n                    Product: {get(product, 'name')}\r\n                  </div>\r\n                </div>\r\n                <div className=\"products__request-buttons\">\r\n                  {!isUserRequestor && <div className=\"products__request-button\">\r\n                    <Button onClick={() => console.log(\"Accept Exchange\")} text=\"Accept\"></Button>\r\n                  </div>}\r\n                  <div className=\"products__request-button\">\r\n                    <Button onClick={() => this.executeDeleteExchange(request._id, true)} text={rejectText}></Button>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            )}\r\n          )}\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n  render() {\r\n    const { categories, exchangeRequests, loanRequests, history, products, user } = this.props;\r\n    const { message, type } = this.state;\r\n\r\n    return (\r\n      <div className=\"products\">\r\n        <WarningMessage message={message} type={type} />\r\n        <div className=\"products__title\">\r\n          <h2>{user.first_name} Stuff</h2>\r\n          <div className=\"products__add-product\">\r\n            <Button text=\"Add Product\" onClick={() => history.push('/product/add')}></Button>\r\n          </div>\r\n        </div>\r\n        {exchangeRequests.length > 0 && this.renderRequests()}\r\n        {loanRequests.length > 0 && this.renderLoans()}\r\n        <hr />\r\n        {isProductsEmpty(products) && (<div>No Stuff! Add Products!</div>)}\r\n        {!isProductsEmpty(products) &&\r\n          (<div>\r\n            {categories.map((category: Category, index: number) => {\r\n              if (!products[category.id] || !products[category.id].length) return <div key={`${category.id}_${index}`}></div>;\r\n\r\n              return (\r\n                <div key={category.id}>\r\n                  <h4 className=\"products__subheader\">{category.name}</h4>\r\n                  <ul className=\"products__list\">\r\n                    {map(products[category.id as number], (product: ProductType) => {\r\n                      const match = { params: { id: product.id } };\r\n                      return <Product key={product.id} match={match} showCost={true} product={product} />\r\n                    })}\r\n                  </ul>\r\n                </div>\r\n              )\r\n            })}\r\n            <hr />\r\n            <Button onClick={() => this.generateReport()} text=\"Generate Report\"></Button>\r\n          </div>)\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  user: state.user,\r\n  categories: state.categories,\r\n  friends: state.friends,\r\n  exchangeRequests: state.exchangeRequests,\r\n  loanRequests: state.loanRequests,\r\n  products: state.products\r\n});\r\n\r\nconst mapDispatchProps = {\r\n  deleteRequest,\r\n  deleteRequestLoan\r\n};\r\n\r\nexport { Products as ProductsComponent };\r\nexport default connect(mapStateToProps, mapDispatchProps)(Products);\r\n","import React, { Component } from 'react';\r\n\r\nclass Support extends Component {\r\n  render() {\r\n    return (\r\n      <iframe \r\n      src='https://webchat.botframework.com/embed/StuffieBot?s=fkpQavtTB78.cwA.pjM.9djZJuhRob4Mt-Lb5-1Wk7yrsHtLAxOKIL6w3gE4910'\r\n      title='WebChat' />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Support;\r\n","import React, { Component } from 'react';\r\nimport Tesseract from 'tesseract.js';\r\n\r\nclass Tickets extends Component<any, any> {\r\n  state = {\r\n    file: '',\r\n    progressValue: 0\r\n  }\r\n\r\n  handleChange(event: any) {\r\n    if (event && event.target && event.target.files) {\r\n      const file = event.target.files[0] as File;\r\n      this.setState({ file });\r\n    }\r\n  }\r\n\r\n  handleSubmit(event: any) {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n\r\n    Tesseract.recognize(this.state.file, 'eng')\r\n      .progress(this.progressUpdate)\r\n      .then(this.result)\r\n  }\r\n\r\n  result(res: any) {\r\n    var log = document.getElementById('info') as HTMLElement;\r\n    var result = document.getElementById('result') as HTMLElement;\r\n\r\n    log.innerHTML = 'Finished!';\r\n    result.innerHTML = res ? res.text : '';\r\n  }\r\n\r\n  progressUpdate(packet: any) {\r\n    if ('progress' in packet) {\r\n      var progress = document.querySelector('progress') as any;\r\n      progress.value = packet.progress;\r\n      progress.max = 1;\r\n      (document.getElementById(\"info\") as HTMLElement).innerHTML = `Analyzing file...`;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"tickets\">\r\n        <h3>Tickets</h3>\r\n        <div className=\"ticketsForm\">\r\n          <form onSubmit={event => this.handleSubmit(event)}>\r\n            <input type='file' id='fileId' name='fileName'\r\n              onChange={event => this.handleChange(event)} />\r\n            <hr />\r\n            <input type=\"submit\" value=\"Analyze\" disabled={!this.state.file} />\r\n          </form>\r\n        </div>\r\n        <hr />\r\n        <div id=\"status\" className=\"ticketsStatus\">\r\n          <progress value={this.state.progressValue} max=\"100\"></progress>\r\n          <span id=\"statusInfo\" className=\"statusInfo\">\r\n            Status: <span id=\"info\" />\r\n          </span>\r\n        </div>\r\n        <hr />\r\n        <div id=\"result\"></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Tickets;\r\n","import React, { Component } from 'react';\r\nimport crypto from '../../config/crypto';\r\n\r\nclass Test extends Component<any, any> {\r\n\r\n  componentDidMount() {\r\n    document.getElementById(\"myButton\")?.addEventListener('click', this.debounce(() => console.log('click'), 4000));\r\n  }\r\n\r\n  authenticate = () => {\r\n    // TEST - ENCRYPT\r\n    console.log(`secreto: ${crypto.encrypt(\"secreto\")}`);\r\n    console.log(`mario: ${crypto.encrypt(\"mario\")}`);\r\n    console.log(`doc: ${crypto.encrypt(\"secrdoceto\")}`);\r\n    console.log(`merol: ${crypto.encrypt(\"merol\")}`);\r\n  }\r\n\r\n  getStuff = () => {\r\n    let stuff = [\r\n      { id: 1, name: 'Carlos Reyes 1' },\r\n      { id: 2, name: 'Carlos Reyes 2' },\r\n      { id: 1, name: 'Carlos Reyes 1' },\r\n      { id: 3, name: 'Carlos Reyes 3' },\r\n    ];\r\n\r\n    console.log(stuff);\r\n\r\n    let r = [1, 1, 2, 3, 4, 5];\r\n\r\n    return r.filter((item, index) => {\r\n      return r.indexOf(item) === index;\r\n    });\r\n  }\r\n\r\n  reverseStuff(name: string) {\r\n    return name.split('').reverse().join('');\r\n  }\r\n\r\n  flat(array: any[]) {\r\n    return array.reduce((acc, value) => [...acc, ...value], []);\r\n  }\r\n\r\n  loop(value: number, test: Function, update: Function, body: Function) {\r\n    for (let i = value; test(i); i = update(i)) {\r\n      body(i);\r\n    }\r\n  }\r\n\r\n  every(array: any[], test: Function) {\r\n    let res = true;\r\n    array.forEach(v => {\r\n      if (!test(v)) {\r\n        res = false;\r\n        return;\r\n      }\r\n    });\r\n\r\n    return res;\r\n  }\r\n\r\n  everySome(array: any[], test: Function) {\r\n    return !array.some((v: any) => !test(v));\r\n  }\r\n\r\n  waysToDecode(message = '4123') {\r\n    let counter = 0;\r\n    let chars = message.split('');\r\n    \r\n    for(let i = 0; i < chars.length; i++) {\r\n      if ((chars[i] === '1' || chars[i] === '2') && i+1 < chars.length) {\r\n        counter++;\r\n      }\r\n    }\r\n\r\n    return counter + 1;\r\n  }\r\n\r\n  getAnagrams(array = [\"star\", \"rats\", \"car\", \"arc\", \"arts\", \"star\", \"stars\"]) {\r\n    let myMap:  { [key:string]: string[] } = { };\r\n\r\n    array.forEach(word => {                                     // N\r\n      let sortedWord = word.split('').sort().join('');          // K log K\r\n\r\n      if (Object.keys(myMap).includes(sortedWord)) {\r\n        if (!myMap[sortedWord].includes(word)) {\r\n          myMap[sortedWord].push(word);\r\n        }\r\n      } else {\r\n        myMap = { ...myMap, [sortedWord]: [word] };\r\n      }\r\n    });\r\n\r\n\r\n    return Object.keys(myMap).map((key: string) => myMap[key]); // N\r\n  }                                                             // N * K log K + N = O(N * K log K)\r\n\r\n  // [1, 2, 3, 4].reduce((acc, value) => acc + value, 0)\r\n  reduce(array: number[], callback: Function, initValue: number) {\r\n    let acc = initValue;\r\n    array.forEach(value => {\r\n      acc = callback(acc, value);\r\n    });\r\n\r\n    return acc;\r\n  }\r\n\r\n  getRoman(decimal: number) {\r\n    let roman = '';\r\n    let currentVal = decimal;\r\n\r\n    let thousands = Math.floor(currentVal / 1000);\r\n    if (thousands) {\r\n      roman += 'M'.repeat(thousands);\r\n      currentVal -= thousands*1000;\r\n    }\r\n\r\n    let hundreds = Math.floor(currentVal / 100);\r\n    if (hundreds) {\r\n      roman += hundreds > 5 ? `D${'C'.repeat(hundreds-5)}` : hundreds === 5 ? 'D' : hundreds === 4 ? 'CD' : 'C'.repeat(hundreds);\r\n      currentVal -= hundreds*100;\r\n    }\r\n\r\n    let decimals = Math.floor(currentVal / 10);\r\n    if (decimals) {\r\n      roman += decimals > 5 ? `L${'X'.repeat(decimals-5)}` : decimals === 5 ? 'L' : decimals === 4 ? 'XL' : 'X'.repeat(decimals);\r\n      currentVal -= decimals*10;\r\n    }\r\n\r\n    roman += currentVal > 5 ? `V${'I'.repeat(currentVal-5)}` : currentVal === 5 ? 'V' : currentVal === 4 ? 'IV' : 'I'.repeat(currentVal);\r\n\r\n    return roman;\r\n  }\r\n\r\n  proto = () => {\r\n    let animal = {\r\n      eats: true\r\n    };\r\n    \r\n    let rabbit: any = {\r\n      jumps: true,\r\n      __proto__: animal\r\n    };\r\n    \r\n    // Object.keys only returns own keys\r\n    // alert(Object.keys(rabbit)); // jumps\r\n    \r\n    // for..in loops over both own and inherited keys\r\n    // for(let prop in rabbit) alert(prop); // jumps, then eats\r\n    \r\n    const pa = rabbit.propertyIsEnumerable(rabbit?.__proto__?.hasOwnProperty);\r\n    \r\n    console.log(pa);    \r\n  }\r\n\r\n  myFlat = (array: Array<any>) => {\r\n    let res: any = [];\r\n    this.myFlatTemp(array, res);\r\n    return res;\r\n  }\r\n                  \r\n  myFlatTemp = (array: Array<any>, res: any) => {\r\n    array.forEach(value => {\r\n      if (!Array.isArray(value)) {\r\n          res.push(value);\r\n      }\r\n      else {\r\n        return this.myFlatTemp(value, res);\r\n      }\r\n    });\r\n  }\r\n\r\n  dom = () => {\r\n    const spans = document.getElementsByTagName('span');\r\n    if (spans && spans !== undefined) {\r\n      console.log(spans);\r\n      console.log(spans[0]);\r\n\r\n      // console.log(spans.parentNode);\r\n      // console.log(spans.parentElement);\r\n    }\r\n  }\r\n \r\n  excludeItems() {\r\n    // could be potentially more than 3 keys in the object above\r\n    let items = [{color: 'red', type: 'tv', age: 18}, {color: 'silver', type: 'phone', age: 20}];\r\n    let excludes = [{k: 'color', v: 'silver'}, {k: 'type', v: 'tv'}];\r\n\r\n    excludes.forEach(pair => {\r\n      items = items.filter(item => (item as any)[pair.k] === pair.v);\r\n    });\r\n\r\n    return items;\r\n  }\r\n\r\n  orderArray(){\r\n    let array = ['a', 'b', 'c', 'd', 'e'];\r\n    let indexes = [1, 3, 2, 4, 0];\r\n\r\n    indexes.forEach((index: number, i: number) => {\r\n      let value = array[i];\r\n      array[i] = array[index];\r\n      array[index] = value;\r\n    });\r\n\r\n    return array;\r\n  }\r\n\r\n  debounce = (callback: Function, time: number) => {\r\n    let timeout: any = null;\r\n\r\n    return () => {\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(() => {\r\n          callback();\r\n        }, time);\r\n    }\r\n  }\r\n  \r\n  render() {\r\n    // console.log(this.myFlat([1, [2, [4, 5]], 3]));\r\n    // console.log(this.flat([[1, 2, 3], [4, 5], [6]]));\r\n    // this.loop(3, (n: any)=> n>0, (n: any)=> n-1, console.log);\r\n    // console.log(this.every([1, 3, 5], (n: any) => n < 10));\r\n    // console.log(this.everySome([1, 3, 5], (n: any) => n < 10));\r\n    // console.log(this.waysToDecode());\r\n    // console.log(this.getAnagrams());\r\n    // console.log(this.reduce([1, 2, 3, 4, 5], (acc: number, value: number) => value, 0));\r\n    // console.log([1, 2, 3, 4, 5].reduce((acc, val) => acc + val));\r\n\r\n    // console.log(this.getRoman(3748));\r\n\r\n    // this.authenticate();\r\n    const x = this.getStuff();\r\n    const a = this.reverseStuff('unodostres');\r\n    this.dom();\r\n    console.log(this.orderArray());\r\n\r\n    return (\r\n      <div>\r\n        <span>This is my test = {a}</span>\r\n        <span>This is my other test = {x}</span>\r\n        <button id=\"myButton\">Click</button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Test;\r\n","import moment from 'moment';\r\nimport { CountryDataRow } from \"../apps/types\";\r\n\r\nexport const hasProvince = (country: CountryDataRow[]): boolean => {\r\n  return country && country.some((row: CountryDataRow) => row.Province !== \"\");\r\n}\r\n\r\nexport const hasCity = (country: CountryDataRow[]): boolean => {\r\n  return country && country.some((row: CountryDataRow) => row.City !== \"\");\r\n}\r\n\r\nexport const createMap = (country: CountryDataRow[]): any => {\r\n  let provinces = {};\r\n\r\n  country.forEach((row: CountryDataRow) => {\r\n    const Province = row.Province === '' ? 'Undefined' : row.Province;\r\n    const City = row.City === '' ? 'Undefined' : row.City;\r\n    const newRow = { ...row, Province, City };\r\n\r\n    let pKeys = Object.keys(provinces);\r\n\r\n    if (pKeys.includes(newRow.Province)) {\r\n      // @ts-ignore\r\n      provinces[newRow.Province].push(newRow);\r\n    } else {\r\n      provinces = { ...provinces, [newRow.Province]: [newRow] };\r\n    }\r\n  });\r\n\r\n  return provinces;\r\n}\r\n\r\nexport const getUniqueCities = (map: any, province: any) => {\r\n  let provinceData: any = map[province.label];\r\n\r\n  return provinceData.map((row: CountryDataRow) => row.City)\r\n  .filter((value: any, index: number, self: any) => self.indexOf(value) === index)\r\n  .sort();\r\n}\r\n\r\nexport const getCityData = (map: any, province: any, city: any) => {\r\n  let provinceData: any = map[province.label];\r\n\r\n  return provinceData.filter((row: CountryDataRow) => row.City === city.label);\r\n}\r\n\r\nexport const manageCountryData = (country: CountryDataRow[]) => {\r\n  if (!country.length) return;\r\n\r\n  let row: CountryDataRow = country[0];\r\n\r\n  let confirmedInc: number[] = [row.Confirmed];\r\n  let dates: string[] = [moment(row.Date).format(\"MMM Do\")];\r\n\r\n  for(let i = 1; i < country.length; i++) {\r\n    row = country[i];\r\n    let lastRow: CountryDataRow = country[i-1];\r\n    let increment = row.Confirmed - lastRow.Confirmed;\r\n    confirmedInc[i] = increment;\r\n    dates.push(moment(row.Date).format(\"MMM Do\"));\r\n  }\r\n\r\n  let countryData = country.map((row: CountryDataRow, index: number) => {\r\n    return { ...row, Confirmed: confirmedInc[index], Date: dates[index] }\r\n  });\r\n\r\n  return countryData;\r\n}\r\n\r\nexport const getProvinces = (usMap: any) => {\r\n  return Object.keys(usMap).sort().map((p: string) => {\r\n    return { name: p, label: p, value: p };\r\n  });\r\n}\r\n","import axios from 'axios';\r\nimport routes from './routes';\r\nimport config from './config';\r\n\r\nexport const getDefault = () => (\r\n  axios.get(routes.covid.default(), { headers: config.headers })\r\n);\r\n\r\nexport const getAll = () => (\r\n  axios.get(routes.covid.all(), { headers: config.headers })\r\n);\r\n\r\nexport const getCountry = (country) => (\r\n  axios.get(routes.covid.country(country), { headers: config.headers })\r\n);\r\n\r\nexport const getCountries = () => (\r\n  axios.get(routes.covid.countries(), { headers: config.headers })\r\n);\r\n","import React, { Component } from 'react';\r\nimport Dropdown from 'react-dropdown';\r\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip } from 'recharts';\r\nimport { isEqual, sortBy } from 'lodash';\r\n\r\nimport Loading from '../shared/Loading';\r\nimport { CountryDataRow } from './types';\r\nimport { hasProvince, hasCity, createMap, getUniqueCities, getCityData, manageCountryData, getProvinces } from '../helpers/CovidHelper';\r\nimport { getCountry, getCountries } from '../../services/covid';\r\n\r\nimport './Covid.scss';\r\n\r\nclass Covid extends Component<any, any> {\r\n  state = {\r\n    defaultCountrySlug: 'mexico',\r\n    menu: { 'fn': null },\r\n    all: null,\r\n    country: [],\r\n    countryData: [],\r\n    countries: [],\r\n    countrySelected: { name: null, Country: '', value: '', label: null },\r\n    isLoading: false,\r\n    provinces: [],\r\n    provinceData: [],\r\n    provinceSelected: { name: null, value: '', label: null },\r\n    cities: [],\r\n    citySelected: { name: null, value: '', label: null },\r\n    usMap: {}\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { defaultCountrySlug } = this.state;\r\n\r\n    getCountries().then((res: any) => {\r\n      let sorted = sortBy(res.data, ['Slug']);\r\n      let id = 0;\r\n      let countries = sorted.map((row: any, index: number) => {\r\n        if (row.Slug === defaultCountrySlug) {\r\n          id = index;\r\n        }\r\n        return { ...row, value: row.Slug, label: row.Country, name: row.Slug };\r\n      });\r\n\r\n      this.setState({ countries, countrySelected: countries[id] });\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps: any, prevState: any) {\r\n    if (!this.state.isLoading) {\r\n      if(!isEqual(prevState.countrySelected, this.state.countrySelected)) {\r\n        this.getCountryInfo();\r\n      } else {\r\n        if (!isEqual(prevState.provinceSelected, this.state.provinceSelected)) {\r\n          if (hasCity(this.state.country)) {\r\n            let cities = getUniqueCities(this.state.usMap, this.state.provinceSelected);\r\n            this.setState({ cities, citySelected: cities[0] });\r\n          }\r\n        }\r\n      }  \r\n    }\r\n  }\r\n\r\n  getCountryInfo = () => {\r\n    const { countrySelected } = this.state;\r\n\r\n    this.setState({ isLoading: true });\r\n\r\n    getCountry(countrySelected.value)\r\n    .then(res => {\r\n      const country = res.data;\r\n      let usMap, provinces, provinceSelected, cities, citySelected;\r\n\r\n      if (hasProvince(country)) {\r\n        usMap = createMap(country);\r\n        provinces = getProvinces(usMap);\r\n        provinceSelected = provinces[0];\r\n\r\n        if (hasCity(country)) {\r\n          cities = getUniqueCities(usMap, provinceSelected);\r\n          citySelected = cities[0];  \r\n        }\r\n\r\n        this.setState({ usMap, country, cities, provinces, provinceSelected, citySelected });\r\n      } else {\r\n        this.setState({\r\n          country,\r\n          usMap: {},\r\n          provinceSelected: { name: null },\r\n          provinces: [],\r\n          provinceData: [],\r\n          citySelected: { name: null },\r\n          cities: []\r\n        });\r\n      }\r\n    })\r\n    .finally(() => this.setState({ isLoading: false }));\r\n  }\r\n\r\n\r\n  renderChart(country: CountryDataRow[], managed: boolean = false) {\r\n    const { provinceSelected, usMap, citySelected } = this.state;\r\n    let data = hasCity(country)? getCityData(usMap, provinceSelected, citySelected):\r\n                // @ts-ignore\r\n               hasProvince(country)? usMap[provinceSelected.label]:\r\n               country;\r\n\r\n    data = managed ? manageCountryData(data) : data;\r\n\r\n    if (!data || !data.length) return <div>No data</div>;\r\n\r\n    return (\r\n      <AreaChart width={500} height={250} data={data}\r\n      margin={{ top: 10, right: 30, left: 0, bottom: 0 }}>\r\n      <defs>\r\n        <linearGradient id=\"colorDeaths\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n          <stop offset=\"5%\" stopColor=\"#8884d8\" stopOpacity={0.8} />\r\n          <stop offset=\"95%\" stopColor=\"#8884d8\" stopOpacity={0} />\r\n        </linearGradient>\r\n        <linearGradient id=\"colorConfirmed\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n          <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8} />\r\n          <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0} />\r\n        </linearGradient>\r\n      </defs>\r\n      <XAxis dataKey=\"Date\" />\r\n      <YAxis />\r\n      <CartesianGrid strokeDasharray=\"3 3\" />\r\n      <Tooltip />\r\n      <Area type=\"monotone\" dataKey=\"Confirmed\" stroke=\"#8884d8\" fillOpacity={1} fill=\"url(#colorConfirmed)\" />\r\n      <Area type=\"monotone\" dataKey=\"Deaths\" stroke=\"#82ca9d\" fillOpacity={1} fill=\"url(#colorDeaths)\" />\r\n    </AreaChart>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { country, countries, countrySelected, isLoading, provinces, provinceSelected, cities, citySelected } = this.state;\r\n\r\n    let countryText = countrySelected.label ?? 'Country';\r\n    if (!countries.length || isLoading) return (<Loading size=\"xl\" message={`Loading ${countryText} Data`} />);\r\n\r\n    let countryHasProvince = hasProvince(country);\r\n    let countryHasCity = hasCity(country);\r\n\r\n    return (\r\n      <div>\r\n        <h2>COVID {countrySelected.label} Charts</h2>\r\n        <hr />\r\n        <div className=\"covid__dropdowns\">\r\n          <Dropdown onChange={(countrySelected: any) => this.setState({ countrySelected })} options={countries} value={countrySelected.value} />\r\n          {countryHasProvince && <Dropdown onChange={(provinceSelected: any) => this.setState({ provinceSelected })} options={provinces} value={provinceSelected.value} />}\r\n          {countryHasCity && <Dropdown onChange={(citySelected: any ) => this.setState({ citySelected })} options={cities} value={citySelected.value}/>}\r\n        </div>\r\n        <hr/>\r\n        {this.renderChart(country)}\r\n        <hr />\r\n        {this.renderChart(country, true)}\r\n        <hr />\r\n        <div className=\"covid__texts\">\r\n          <div className=\"covid__text\">{countrySelected.label}</div>\r\n          {countryHasProvince && <div className=\"covid__text\">{provinceSelected?.label}</div>}\r\n          {countryHasCity && <div className=\"covid__text\">{citySelected?.label}</div>}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Covid;\r\n","import React, { Component } from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\n\r\nimport AddCategory from '../content/AddCategory';\r\nimport AddProduct from '../content/AddProduct';\r\nimport Admin from '../admin/Admin';\r\nimport Buy from '../apps/Buy';\r\nimport CategoryPage from '../content/CategoryPage';\r\nimport Content from '../content/Content';\r\nimport Charts from '../apps/Charts';\r\nimport Exchange from '../apps/Exchange';\r\nimport Friends from '../content/Friends';\r\nimport Loan from '../apps/Loan';\r\nimport Products from '../content/Products';\r\nimport Product from '../content/Product';\r\nimport Support from '../apps/Support';\r\nimport Tickets from '../apps/Tickets';\r\nimport Test from '../apps/Test';\r\nimport Covid from '../apps/Covid';\r\n\r\nimport { MainRoutesProps } from './types';\r\n\r\nclass MainRoutes extends Component<MainRoutesProps, any> {\r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <Route exact path=\"/\" component={Content} />\r\n        <Route exact path=\"/StuffieReact\" component={Content} />\r\n        <Route path=\"/admin\" component={Admin} />\r\n        <Route path=\"/friends\" component={Friends} />\r\n        <Route path=\"/products\" component={Products} />\r\n        <Route path=\"/product/add\" component={AddProduct} />\r\n        <Route path=\"/product/:id\" render={props => <Product { ...props } />} />\r\n        <Route path=\"/category/add\" render={()=> <AddCategory type='category' />} />\r\n        <Route path=\"/category/:id\" render={props => <CategoryPage { ...props } { ...this.props } />} />\r\n        <Route path=\"/subcategory/add\" render={()=> <AddCategory type='subcategory' />} />\r\n        <Route path=\"/subcategory/:id\" render={props => <CategoryPage { ...props } { ...this.props } />} />\r\n        <Route path=\"/exchange\" render={props => <Exchange { ...props } {...this.props } />} />\r\n        <Route path=\"/loan\" render={props => <Loan { ...props } {...this.props } />} />\r\n        <Route path=\"/buy\" render={props => <Buy { ...props } {...this.props } />} />\r\n        <Route path=\"/charts\" component={Charts} />\r\n        <Route path=\"/support\" component={Support} />\r\n        <Route path=\"/tickets\" component={Tickets} />\r\n        <Route path=\"/test\" component={Test} />\r\n        <Route path=\"/covid\" component={Covid} />\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MainRoutes;\r\n","import React, { Component } from 'react';\r\nimport './Footer.scss';\r\n\r\nclass Footer extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"footer\">\r\n        <hr />\r\n        Stuffie&trade; is a platform coded and registered by &nbsp;\r\n        <a href=\"http://stuffie.azurewebsites.net/PM_Carlos-Reyes2.html\" target=\"_blank\" rel=\"noopener noreferrer\">Carlos Reyes-Rico</a>.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default Footer;\r\n","import React, { Component } from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { withTranslation } from 'react-i18next';\r\n\r\nimport Apps from '../sections/Apps';\r\nimport Media from '../shared/Media';\r\nimport SearchBar from '../shared/SearchBar';\r\nimport State from '../../redux/State';\r\nimport { HeaderProps } from './types';\r\nimport { logout } from '../../redux/user/actions';\r\nimport './Header.scss';\r\n\r\nclass Header extends Component<HeaderProps, any> {\r\n  handleLogout = (event: any) => {\r\n    const { logout, history } = this.props;\r\n\r\n    event.preventDefault();\r\n\r\n    logout();\r\n    history.push('/');\r\n  }\r\n\r\n  /* Toggle between showing and hiding the navigation menu links when the user clicks on the hamburger menu / bar icon */\r\n  toggleMenu = () => {\r\n    let x: any = document.getElementById(\"apps\");\r\n    if (x.style.display === \"block\") {\r\n      x.style.display = \"none\";\r\n    } else {\r\n      x.style.cssText = `\r\n        display: block;\r\n        float: right;\r\n        top: 28px; right: 0px;\r\n        position: absolute; background-color: white;\r\n        width: 146px;\r\n        padding: 8px;\r\n        box-shadow: 5px 5px #888888;\r\n        border-radius: 6px;      \r\n      `; \r\n    }    \r\n  }\r\n\r\n  render() {\r\n    const { friendsRequests, exchangeRequests, loanRequests, pendingProducts, products, t, user, userRequests } = this.props;\r\n    const exchangeClass = exchangeRequests.length > 0 ? \"stuffie-header__section-exchange\" : \"\";\r\n    const requests = exchangeRequests.length + loanRequests.length;\r\n\r\n    if (!t) return;\r\n\r\n    return (\r\n      <div className=\"stuffie-header\">\r\n        <div className=\"stuffie-header__left\">\r\n          <div className=\"stuffie-header__info\">\r\n            <div className=\"stuffie-header__logo\">\r\n              <Media fileName=\"logo_2020\" format=\"jpg\" height=\"50\" width=\"50\" />\r\n            </div>\r\n            <div className='stuffie-header__user'>Stuffie</div>\r\n          </div>\r\n          <div className='stuffie-header__sections'>\r\n            <div className='stuffie-header__section-item'><Link to='/StuffieReact'>{t('Feed')}</Link></div>\r\n            <div className='stuffie-header__section-item'>\r\n              <Link to='/friends'>{t('Friends')}</Link>\r\n              {friendsRequests.length > 0 && (<div className=\"stuffie-header__warning\">{friendsRequests.length}</div>)}\r\n            </div>\r\n            <div className={`stuffie-header__section-item ${exchangeClass}`}>\r\n              <Link to='/products'>{window.outerWidth >= 1024 && !requests ? \"Products\" : \"Prods\"}</Link>\r\n              {requests > 0 && (\r\n              <div className=\"stuffie-header__warning\">\r\n                <span className=\"stuffie-header__warning-text\">{requests}</span>\r\n              </div>)}\r\n            </div>\r\n            {user.admin && (\r\n              <div className='stuffie-header__section-item'>\r\n                <Link to='/admin'>{t('Admin')}</Link>\r\n                {(userRequests.length > 0 || pendingProducts.length > 0) && (\r\n                  <div className=\"stuffie-header__warning\">\r\n                    <span className=\"stuffie-header__warning-text\">{userRequests.length + pendingProducts.length}</span>\r\n                  </div>)}\r\n              </div>\r\n            )}\r\n            <div className=\"stuffie-header__section-item\">\r\n              <button className=\"stuffie-header__button\" onClick={this.handleLogout}>{t('Logout')}</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"stuffie-header__search\">\r\n          <SearchBar products={products}></SearchBar>\r\n\r\n          {/* https://www.w3schools.com/howto/howto_js_mobile_navbar.asp */}\r\n          <div className=\"stuffie-header__menu\">\r\n            <div id=\"apps\"><Apps /></div>\r\n            <button className=\"icon\" onClick={event => event && this.toggleMenu()}>\r\n              <i className=\"fa fa-bars\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  user: state.user,\r\n  userRequests: state.userRequests,\r\n  friendsRequests: state.friendsRequests,\r\n  products: state.products,\r\n  exchangeRequests: state.exchangeRequests,\r\n  loanRequests: state.loanRequests,\r\n  pendingProducts: state.pendingProducts,\r\n});\r\n\r\nconst mapDispatchProps = {\r\n  logout\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(withTranslation()<any>(withRouter<any, React.ComponentClass<any>>(Header)));\r\n","export const REVOKE_USER = 'STUFFIE::REVOKE_USER';\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { withTranslation } from 'react-i18next';\r\n\r\nimport Category from '../types/Category';\r\nimport State from '../../redux/State';\r\nimport { MenuProps, MenuState } from './types';\r\nimport { isProductsEmpty } from '../../components/helpers/StuffHelper';\r\nimport './Menu.scss';\r\n\r\nclass Menu extends Component<MenuProps, MenuState> {\r\n  renderCategories = () => {\r\n    const { categories, products } = this.props;\r\n\r\n    if (!categories) return;\r\n\r\n    if (!products) return;\r\n\r\n    return categories\r\n            .filter((category: Category) => products[category.id] && products[category.id].length)\r\n            .map(category => {\r\n              const newTo = { pathname: `/category/${category.id}`, category: category.name };\r\n              return (\r\n              <div key={category.id} className=\"menu__category\">\r\n                <Link className=\"\" key={category.id} to={newTo}>{category.name}</Link>\r\n              </div>);\r\n            });\r\n  }\r\n\r\n  render() {\r\n    const { products, t } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <div className='menu__title'>{t('Summary')}</div>\r\n        {isProductsEmpty(products) && <div>No products</div>}\r\n        <div className=\"menu__list\">\r\n          { this.renderCategories() }\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  user: state.user,\r\n  categories: state.categories,\r\n  products: state.products\r\n});\r\n\r\nexport default connect(mapStateToProps, {})(withTranslation()<any>(Menu));\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withTranslation } from 'react-i18next';\r\n\r\nimport Apps from '../sections/Apps';\r\nimport Chat from '../sections/Chat';\r\nimport MainRoutes from './MainRoutes';\r\nimport Footer from '../sections/Footer';\r\nimport Header from '../sections/Header';\r\nimport Menu from '../sections/Menu';\r\nimport State from '../../redux/State';\r\n\r\nimport { MainProps } from './types'; \r\nimport './Main.scss';\r\n\r\nclass Main extends Component<MainProps, any> {\r\n  render() {\r\n    const { user, t } = this.props;\r\n\r\n    return (\r\n      <div className=\"stuffie\">\r\n        <div className=\"stuffie__header\">\r\n          <Header />\r\n        </div>\r\n        <div className=\"stuffie__main\">\r\n          <div className=\"stuffie__menu\">\r\n            <Menu />\r\n          </div>\r\n          <div className=\"stuffie__content\">\r\n            <MainRoutes />\r\n          </div>\r\n          <div className=\"stuffie__right\">\r\n            <div className=\"stuffie__user\">\r\n              {user.picture && (<img src={user.picture} alt=\"User Pic\"></img>)}\r\n              <div className=\"stuffie__welcome\">{t('Welcome')} {user.first_name}</div>\r\n            </div>\r\n            <div className=\"stuffie__apps\">\r\n              <Apps />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"stuffie_footer\">\r\n          <Footer />\r\n        </div>\r\n        <Chat />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  user: state.user\r\n});\r\n\r\nexport default connect(mapStateToProps, {})(withTranslation()<any>(Main));\r\n","import { makeStandardActionCreator } from '../action-helpers';\r\nimport { FRIENDS_REQUESTS_FETCHED } from './constants';\r\nimport { getFriendsRequests } from '../../services/stuffier';\r\n\r\nconst friendsRequestsFetched = makeStandardActionCreator(FRIENDS_REQUESTS_FETCHED);\r\nexport const fetchFriendsRequests = () => dispatch => {\r\n  return getFriendsRequests()\r\n  .then(res => {\r\n    dispatch(friendsRequestsFetched(res.data));\r\n    return Promise.resolve(res.data);\r\n  });\r\n}\r\n","export const FRIENDS_REQUESTS_FETCHED = 'MENU::FRIENDS_REQUESTS_FETCHED';\r\n","import { makeStandardActionCreator } from '../action-helpers';\r\nimport { PENDING_PRODUCTS_FETCHED } from './constants';\r\nimport { getPendingProducts } from '../../services/stuff';\r\n\r\nconst pendingProductsFetched = makeStandardActionCreator(PENDING_PRODUCTS_FETCHED);\r\nexport const fetchPendingProducts = () => dispatch => {\r\n  return getPendingProducts()\r\n  .then(res => {\r\n    dispatch(pendingProductsFetched(res.data));\r\n    return Promise.resolve(res.data);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n","export const PENDING_PRODUCTS_FETCHED = 'ADMIN::PENDING_PRODUCTS_FETCHED';\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withTranslation } from 'react-i18next';\r\n\r\nimport Loading from '../shared/Loading';\r\nimport Main from './Main';\r\nimport State from '../../redux/State';\r\nimport { FetchDataProps } from './types';\r\n\r\nimport { fetchCategories } from '../../redux/categories/actions';\r\nimport { fetchFriends } from '../../redux/friends/actions';\r\nimport { fetchFriendsRequests } from '../../redux/friends-requests/actions';\r\nimport { fetchProducts } from '../../redux/products/actions';\r\nimport { fetchSubCategories } from '../../redux/subcategories/actions';\r\nimport { fetchExchangeRequests } from '../../redux/exchange-requests/actions';\r\nimport { fetchLoanRequests } from '../../redux/loan-requests/actions';\r\nimport { fetchPendingProducts } from '../../redux/pending-products/actions';\r\nimport { fetchUserRequests } from '../../redux/user-requests/actions';\r\n\r\nimport './FetchData.scss';\r\n\r\nclass FetchData extends Component<FetchDataProps, any> {\r\n  state = {\r\n    isLoading: true\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  fetchData = () => {\r\n    const { user, fetchCategories, fetchFriends, fetchSubCategories, fetchProducts,\r\n      fetchFriendsRequests, fetchExchangeRequests, fetchLoanRequests,\r\n      fetchPendingProducts, fetchUserRequests } = this.props;\r\n\r\n    let promises = [\r\n      fetchCategories(),                  // values[0]\r\n      fetchSubCategories(),               // values[1]\r\n      fetchFriends(user.email),           // values[2]\r\n      fetchFriendsRequests(user.email),   // values[3]\r\n      fetchExchangeRequests(user.id),     // values[4]\r\n      fetchLoanRequests(user.id)          // values[5]\r\n    ];\r\n\r\n    let adminPromises = [\r\n      fetchUserRequests(),                  // values[5]\r\n      fetchPendingProducts()                // values[6]\r\n    ];\r\n\r\n    if (user.admin) {\r\n      promises = [...promises, ...adminPromises];\r\n    }\r\n\r\n    Promise.all(promises)\r\n    .then((values: any) => fetchProducts(user, values[0].data))\r\n    .catch((error: any) => console.log(error))\r\n    .finally(() => this.setState({ isLoading: false }));\r\n  }\r\n\r\n  render() {\r\n    const { t } = this.props;\r\n    const { isLoading } = this.state;\r\n\r\n    if (isLoading) {\r\n      return (\r\n        <div className=\"fetch-data__loading\">\r\n          <Loading size=\"xl\" message={t('Loading-data')} />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Main />);\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  user: state.user,\r\n});\r\n\r\nconst mapDispatchProps = {\r\n  fetchCategories,\r\n  fetchFriends,\r\n  fetchFriendsRequests,\r\n  fetchProducts,\r\n  fetchSubCategories,\r\n  fetchExchangeRequests,\r\n  fetchLoanRequests,\r\n  fetchPendingProducts,\r\n  fetchUserRequests\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(withTranslation()<any>(FetchData));\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport Button from '../shared/Button';\r\nimport Loading from '../shared/Loading';\r\nimport State from '../../redux/State';\r\nimport TextField from '../shared/TextField';\r\nimport User from '../types/User';\r\nimport { RegisterProps } from './types';\r\nimport { registerUser } from '../../redux/user/actions';\r\n\r\nimport './Register.scss';\r\n\r\nclass Register extends Component<RegisterProps, any> {\r\n  state = {\r\n    email: '',\r\n    password: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    isLoading: false\r\n  }\r\n\r\n  enableButton() {\r\n    const { email, password, firstName, lastName } = this.state;\r\n\r\n    return email.length > 0 &&\r\n      password.length > 0 &&\r\n      firstName.length > 0 &&\r\n      lastName.length > 0;\r\n  }\r\n\r\n  handleSubmit = (event: React.FormEvent<EventTarget>) => {\r\n    const { registerUser, setMessage } = this.props;\r\n    const { email, password, firstName, lastName } = this.state;\r\n    const user: User = { email, password, first_name: firstName, last_name: lastName, admin: false };\r\n\r\n    event.preventDefault();\r\n    this.setState({ isLoading: true });\r\n\r\n    registerUser(user)\r\n    .then((res: any) => {\r\n      localStorage.setItem('username', res.email);\r\n      setMessage(\"Register Successful. Request to be accepted by Admin. Do not login yet!\");\r\n    })\r\n    .catch((error: any) => setMessage(\"Error: Couldn't register. Try again.\"))\r\n    .finally(() => this.setState({ isLoading: false }));\r\n  }\r\n\r\n  render() {\r\n    const { isLoading } = this.state;\r\n\r\n    return (\r\n      <div className=\"register\">\r\n        <h1>Register</h1>\r\n        <form className=\"register__form\" onSubmit={event => this.handleSubmit(event)} >\r\n          <div className=\"register__content\">\r\n            <div className=\"register__row\">\r\n              <div className=\"register__text\">Email</div>\r\n              <TextField\r\n                type=\"text\"\r\n                name=\"email\"\r\n                placeholder=\"Email\"\r\n                disabled={isLoading}\r\n                onChange={(email: string) => this.setState({ email })} />\r\n            </div>\r\n            <div className=\"register__row\">\r\n              <div className=\"register__text\">Password</div>\r\n              <TextField\r\n                type=\"password\"\r\n                name=\"password\"\r\n                placeholder=\"Password\"\r\n                disabled={isLoading}\r\n                onChange={(password: string) => this.setState({ password })} />\r\n            </div>\r\n            <div className=\"register__row\">\r\n              <div className=\"register__text\">First Name</div>\r\n              <TextField\r\n                type=\"text\"\r\n                name=\"firstName\"\r\n                placeholder=\"First Name\"\r\n                disabled={isLoading}\r\n                onChange={(firstName: string) => this.setState({ firstName })} />\r\n            </div>\r\n            <div className=\"register__row\">\r\n              <div className=\"register__text\">Last Name</div>\r\n              <TextField\r\n                type=\"text\"\r\n                name=\"lastName\"\r\n                placeholder=\"Last Name\"\r\n                disabled={isLoading}\r\n                onChange={(lastName: string) => this.setState({ lastName })} />\r\n            </div>\r\n          </div>\r\n          <div className=\"register__button\">\r\n            <Button type=\"submit\" text=\"Register\" disabled={!this.enableButton() || isLoading}></Button>\r\n            {isLoading && (<div className=\"register__loading\"><Loading size=\"md\" /></div>)}\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  user: state.user\r\n});\r\n\r\nconst mapDispatchProps = {\r\n  registerUser\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(withRouter<any, React.ComponentClass<any>>(Register));\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { get, isEmpty } from 'lodash';\r\n\r\nimport Loading from '../shared/Loading';\r\nimport Login from './Login';\r\nimport FetchData from './FetchData';\r\nimport Media from '../shared/Media';\r\nimport Register from './Register';\r\nimport State from '../../redux/State';\r\nimport WarningMessage from '../shared/WarningMessage';\r\nimport { WarningMessageType } from '../shared/types';\r\nimport { fetchUser } from '../../redux/user/actions';\r\nimport './Auth.scss';\r\n\r\nclass Auth extends Component<any, any> {\r\n  state = {\r\n    isLoading: true,\r\n    message: ''\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { fetchUser } = this.props;\r\n\r\n    if(localStorage.getItem('username')) {\r\n      fetchUser(localStorage.getItem('username'))\r\n      .finally(() => this.setState({ isLoading: false }));\r\n    } else {\r\n      this.setState({ isLoading: false });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps: any, prevState: any) {\r\n    if (prevProps.user !== this.props.user) {\r\n      this.setState({ message: '' });\r\n    }\r\n  }\r\n\r\n  getMessageType = (message: string) => {\r\n    if (message.toLowerCase().includes('Error')) {\r\n      return WarningMessageType.ERROR;\r\n    } else if(message.toLowerCase().includes('successful')) {\r\n      return WarningMessageType.SUCCESSFUL;\r\n    }\r\n\r\n    return WarningMessageType.WARNING;\r\n  }\r\n\r\n  render() {\r\n    const { user } = this.props;\r\n    const { isLoading, message } = this.state;\r\n    const request = get(user, 'request');\r\n    let msg = request ? \"User already registered, wait for authorization. Don't register again.\" : message;\r\n\r\n    if (isLoading) {\r\n      return (\r\n        <div className=\"auth__loading\">\r\n          <Loading size=\"xl\" message=\"Loading\" />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (isEmpty(user) || request) {  \r\n      return (\r\n        <div className=\"auth\">\r\n          <div className=\"auth__header\">\r\n            <Media fileName=\"logo_2020_2\" format=\"jpg\" height=\"50\" width=\"50\" />\r\n            <h1 className=\"auth__title\">\r\n              <span className=\"auth__stuffie\">Stuffie</span>\r\n              <span className=\"auth__slogan\">Connecting Life</span>\r\n            </h1>\r\n          </div>\r\n          <div className=\"auth__horizontal-line\"></div>\r\n          <WarningMessage message={msg} type={this.getMessageType(msg)} />\r\n          <div className=\"auth__content\">\r\n            <Register setMessage={(message: string) => this.setState({ message })} />\r\n            <div className=\"auth__line\"></div>\r\n            <Login setMessage={(message: string) => this.setState({ message })} />\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (!isEmpty(user)) {\r\n      return <FetchData />\r\n    }\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state: State) => ({\r\n  user: state.user\r\n});\r\n\r\nconst mapDispatchProps = {\r\n  fetchUser\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(Auth);\r\n","import React, { Component } from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { withTranslation } from 'react-i18next';\r\n\r\nimport Auth from './Auth';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\n\r\nclass Routes extends Component<any, any> {  \r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <Route path=\"/\" component={Auth} />\r\n        <Route path=\"/login\" component={Login} />\r\n        <Route path=\"/register\" component={Register} />\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withTranslation()<any>(Routes);\r\n","import React, { Component } from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport { I18nextProvider, withTranslation } from 'react-i18next';\nimport { Provider } from 'react-redux';\n\nimport i18n from './config/i18n';\nimport Routes from './components/main/Routes';\nimport './App.scss';\nimport '../node_modules/@fortawesome/fontawesome-free/css/all.css';\n\nclass App extends Component<any, any>{\n\trender() {\n\t\tconst { store } = this.props;\n\n\t\treturn (\n\t\t\t<div className=\"stuffie__app\">\n\t\t\t\t<Provider store={store}>\n\t\t\t\t\t<I18nextProvider i18n={ i18n }>\n\t\t\t\t\t\t<BrowserRouter>\n\t\t\t\t\t\t\t<Routes />\n\t\t\t\t\t\t</BrowserRouter>\n\t\t\t\t\t</I18nextProvider>\n\t\t\t\t</Provider>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\nexport default withTranslation()<any>(App);\n","import { combineReducers } from 'redux';\r\nimport { REVOKE_USER } from './constants';\r\n\r\n// For reducers\r\nimport categories from './categories/reducer';\r\nimport friends from './friends/reducer';\r\nimport products from './products/reducer';\r\nimport subcategories from './subcategories/reducer';\r\nimport user from './user/reducer';\r\nimport userRequests from './user-requests/reducer';\r\nimport friendsRequests from './friends-requests/reducer';\r\nimport exchangeRequests from './exchange-requests/reducer';\r\nimport pendingProducts from './pending-products/reducer';\r\nimport loanRequests from './loan-requests/reducer';\r\nimport feed from './feed/reducer';\r\n\r\n// To add object in state:\r\n// 1. Add reducer here\r\n// 2. Add type in State.ts\r\nconst appReducer = combineReducers({\r\n  user,\r\n  userRequests,\r\n  categories,\r\n  friends,\r\n  friendsRequests,\r\n  products,\r\n  subcategories,\r\n  exchangeRequests,\r\n  pendingProducts,\r\n  loanRequests,\r\n  feed                    // Make feed the last one?\r\n});\r\n\r\nconst rootReducer = (state, action) => {\r\n  if (action.type === REVOKE_USER) {\r\n    // Reducers are supposed to return the initial state when\r\n    // they are called with undefined as the first argument.\r\n    state = undefined;\r\n  }\r\n\r\n  return appReducer(state, action);\r\n};\r\n\r\nexport default rootReducer;\r\n","import { LOGIN_USER_FETCHED, USER_FETCHED, USER_PICTURE_ADDED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case LOGIN_USER_FETCHED:\r\n      return action.payload;\r\n    case USER_FETCHED:\r\n      return action.payload;\r\n    case USER_PICTURE_ADDED:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { USER_REQUESTS_FETCHED, USER_REQUEST_DELETED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case USER_REQUESTS_FETCHED:\r\n      return action.payload;\r\n    case USER_REQUEST_DELETED:\r\n      const userRequests = state.filter(item => item._id !== action.payload._id);\r\n      return userRequests;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { CATEGORY_ADDED, CATEGORIES_FETCHED, CATEGORY_FETCHED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case CATEGORY_ADDED:\r\n      const category = action.payload;\r\n      return [...state, category];\r\n    case CATEGORIES_FETCHED:\r\n      return action.payload;\r\n    case CATEGORY_FETCHED:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { FRIENDS_FETCHED, FRIEND_PRODUCTS_FETCHED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case FRIENDS_FETCHED:\r\n      return action.payload;\r\n    case FRIEND_PRODUCTS_FETCHED:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { FRIENDS_REQUESTS_FETCHED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case FRIENDS_REQUESTS_FETCHED:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { PRODUCT_ADDED, PRODUCTS_FETCHED, PRODUCT_UPDATED } from './constants';\r\nimport { findProduct } from '../../components/helpers/StuffHelper';\r\n\r\nexport default (state = [], action) => {\r\n  let product, products;\r\n\r\n  switch (action.type) {\r\n    case PRODUCT_ADDED:\r\n      product = action.payload;\r\n      products = state[product.category];\r\n\r\n      return {\r\n        ...state,\r\n        [product.category]: [...products, product]\r\n      };\r\n    case PRODUCT_UPDATED:\r\n      product = findProduct(action.payload.id_stuff, state);\r\n      products = state[product.category].filter(p => p.id !== product.id);\r\n      const productUpdated = {...product, cost: action.payload.cost};\r\n\r\n      return {\r\n        ...state,\r\n        [product.category]:  [...products, productUpdated]\r\n      };\r\n    case PRODUCTS_FETCHED:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { SUBCATEGORY_ADDED, SUBCATEGORIES_FETCHED, SUBCATEGORY_FETCHED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case SUBCATEGORY_ADDED:\r\n      const subcategory = action.payload;\r\n      return [...state, subcategory];\r\n    case SUBCATEGORIES_FETCHED:\r\n      return action.payload;\r\n    case SUBCATEGORY_FETCHED:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { EXCHANGES_FETCHED, EXCHANGE_DELETED, EXCHANGE_REQUESTED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case EXCHANGE_REQUESTED:\r\n      return [...state, action.payload];\r\n    case EXCHANGES_FETCHED:\r\n      return action.payload;\r\n    case EXCHANGE_DELETED:\r\n      const requests = state.filter(item => item._id !== action.payload);\r\n      return requests;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { PENDING_PRODUCTS_FETCHED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case PENDING_PRODUCTS_FETCHED:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { LOANS_FETCHED, LOAN_DELETED, LOAN_REQUESTED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case LOAN_REQUESTED:\r\n      return [...state, action.payload];\r\n    case LOANS_FETCHED:\r\n      return action.payload;\r\n    case LOAN_DELETED:\r\n      const requests = state.filter(item => item._id !== action.payload);\r\n      return requests;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { FEED_FETCHED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case FEED_FETCHED:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { applyMiddleware, createStore, compose } from 'redux';\nimport thunk from 'redux-thunk';\n\nimport App from './App';\nimport reducersApp from './redux/reducers';\nimport { unregister } from './serviceWorker';\n\nimport './sass/main.scss';\nimport './index.css';\n\nlet middleware = [thunk];\nconst composeEnhancers = (typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) || compose;\nmiddleware.push(require('redux-freeze'));\nconst store = createStore(reducersApp, composeEnhancers(applyMiddleware(...middleware)));\n\nReactDOM.render(\n  <App store={ store }/>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nunregister();\n"],"sourceRoot":""}