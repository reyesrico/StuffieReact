{"version":3,"sources":["config/i18n.js","components/shared/types.ts","components/shared/Loading.tsx","components/shared/Button.tsx","components/shared/TextField.tsx","services/config.js","redux/action-helpers.js","services/routes.js","config/crypto.js","services/stuffier.js","redux/user/actions.js","redux/user/constants.js","components/main/Login.tsx","config/options.js","components/shared/Menu.tsx","components/sections/Apps.tsx","components/sections/Chat.tsx","services/stuff.js","redux/categories/actions.js","redux/categories/constants.js","redux/subcategories/actions.js","redux/subcategories/constants.js","components/content/AddCategory.tsx","components/shared/DropDown.tsx","components/shared/WarningMessage.tsx","components/helpers/StuffHelper.ts","redux/products/constants.js","redux/products/actions.js","components/content/AddProduct.tsx","redux/user-requests/actions.js","redux/user-requests/constants.js","components/admin/Admin.tsx","components/shared/Media.tsx","services/cloudinary-helper.js","components/content/Product.tsx","components/apps/Buy.tsx","components/content/CategoryPage.tsx","components/content/FeedRow.tsx","components/helpers/UserHelper.ts","redux/friends/actions.js","redux/friends/constants.js","redux/feed/actions.js","redux/feed/constants.js","components/content/Content.tsx","services/charts.js","components/apps/Charts.tsx","components/shared/SearchBar.tsx","services/exchange.js","redux/exchange-requests/actions.js","redux/exchange-requests/constants.js","components/apps/Exchange.tsx","components/content/Friends.tsx","services/loan.js","redux/loan-requests/actions.js","redux/loan-requests/constants.js","components/apps/Loan.tsx","components/content/Products.tsx","components/apps/Support.tsx","components/apps/Tickets.tsx","components/apps/Test.tsx","config/cards.js","components/apps/Cards.tsx","components/apps/Test4.tsx","components/main/MainRoutes.tsx","components/sections/Footer.tsx","components/sections/Header.tsx","redux/constants.js","components/sections/Menu.tsx","components/main/Main.tsx","redux/friends-requests/actions.js","redux/friends-requests/constants.js","redux/pending-products/actions.js","redux/pending-products/constants.js","components/main/FetchData.tsx","components/main/Register.tsx","components/main/Auth.tsx","components/main/TopRoutes.tsx","App.tsx","redux/reducers.js","redux/user/reducer.js","redux/user-requests/reducer.js","redux/categories/reducer.js","redux/friends/reducer.js","redux/friends-requests/reducer.js","redux/products/reducer.js","redux/subcategories/reducer.js","redux/exchange-requests/reducer.js","redux/pending-products/reducer.js","redux/loan-requests/reducer.js","redux/spotify/reducer.js","redux/spotify/constants.js","redux/feed/reducer.js","serviceWorker.js","index.js"],"names":["i18n","use","initReactI18next","init","lng","resources","en","es","fallbackLng","debug","process","ns","defaultNS","keySeparator","interpolation","escapeValue","formatSeparator","react","wait","err","t","console","info","language","WarningMessageType","Loading","props","useState","message","size","getSize","className","type","color","height","width","Button","disabled","text","onClick","event","TextField","placeholder","value","onChange","reference","min","max","range","ref","config","cloudinary","url","cloudName","apiKey","apiSecret","cloudinary_headers","fb","appId","headers","server","makeStandardActionCreator","ACTION_TYPE","payload","meta","makeApiActionCreator","apiCall","successActionCreator","args","dispatch","apply","then","data","Promise","resolve","makePaginatedApiActionCreator","requestActionCreator","undefined","dispatchResultsAndFetchNextIfPresent","next","axios","get","routes","category","add","list","detail","id","JSON","stringify","parseInt","exist","subcategory","stuff","addStuffiersStuff","addStuff","listDetail","ids","listForStuffier","id_stuffier","listStuffiers","ids_stuffier","detailFromCategories","listPendingPics","updateStuff","_id","user","email","friends","email_stuffier","loginUser","password","registerUser","lastId","requestToBeFriend","friendsRequest","friendRequestDetail","id_friend","deleteFriendRequest","friend","userRequests","deleteUserRequest","exchange","request","deleteRequest","loan","covid","default","all","countries","country","spotify","fetch","crypto","encrypt","clear","CryptoJS","SHA256","toString","enc","Hex","digest","cryptoLib","createHash","update","pbkdf2","salt","reject","derivedKey","getStuffier","getStuffiers","length","getFriends","loginStuffier","res","catch","registerStuffier","values","Object","post","getFriendsRequests","delete","addFriend","getUserRequests","put","userFetched","userRegistered","userPictureAdded","Login","setMessage","setIsLoading","setEmail","setPassword","loginFB","setLoginFB","useSelector","state","useDispatch","e","loginUserHook","response","_","finally","fetchUserHookWithMessage","localStorage","setItem","name","target","onKeyPress","key","autoLoad","fields","scope","callback","fetchUser","picture","facebookUser","addUserPicture","options","label","Menu","children","isOpen","setIsOpen","Apps","useTranslation","to","href","renderCurrentLanguage","map","option","lang","changeLanguage","Chat","messageEl","useRef","messages","setMessages","newMessage","setNewMessage","disabledButton","setDisabledButton","status","setStatus","socket","useEffect","current","addEventListener","currentTarget","scroll","top","scrollHeight","behavior","WebSocket","onopen","log","onclose","onerror","wsCurrent","close","onmessage","getChatBubble","userName","chatMessage","sendMessage","readyState","OPEN","first_name","last_name","send","CONNECTING","index","parse","row","getStuffList","getStuffiersList","getListStuff","getCategories","token","cancelToken","getSubCategories","fileName","file_name","addStuffStuffier","id_stuff","addSubCategoryCall","addCategoryCall","getPendingProducts","cost","find","categoriesFetched","dispatchCategoriesFetched","categories","categoryAdded","subCategoriesFetched","fetchSubCategoriesHook","sessionStorage","dispatchSubCategoriesFetched","subcategories","subCategoryAdded","TYPE","AddCategory","isLoading","setId","setName","setLabel","createValue","addCategoryHook","Number","subCategory","addSubCategoryHook","renderValues","typeToRender","objects","object","otherLabel","otherType","DropDown","valueSelected","setValueSelected","objectSelected","WarningMessage","mapStuff","getProductsMap","productsMap","forEach","isEmpty","push","getProductFromProducts","productId","products","product","i","p","getFriendProducts","stuffiers_stuff","friendsProducts","filter","isProductsEmpty","getProductsList","flat","mapCostToProducts","extraStuff","s","findProduct","idProduct","productFetched","productsFetched","productUpdated","productAdded","dispatchProductsFetched","updateProductHook","userId","updatedCost","setType","SUCCESSFUL","ERROR","AddProduct","navigate","useNavigate","EMPTY","setCategory","setProduct","setSubcategory","stuffStuffier","setStuffStuffier","productsByCategories","setProductsByCategories","renderProducts","createProduct","error","addProductHook","registerProduct","addRegisteredProductHook","getStuffFromCategories","getMessage","updateCategory","updateSubcategory","userRequestsFetched","userRequestDeleted","deleteRequestHook","Admin","pendingProducts","isAccepted","executeRequest","Media","format","imageUrl","setImageUrl","didMountRef","prevProps","setUrl","publicId","isProduct","isVideo","renderVideo","f","fetchFormat","crop","renderImage","Product","hideOfferButton","showCost","useParams","setCost","productRendered","setProductRendered","pRendered","NaN","cat","c","subcat","updateCost","Buy","location","useLocation","match","params","setFriend","CategoryPage","categoryId","FeedRow","feedPost","exchangeTo","pathname","friend_id","loanTo","buyTo","friend_firstName","friend_lastName","getProductType","mapFriends","friendsFetched","dispatchFriendsFetched","friendProductsFetched","generateFeed","feed","date","_created","sortBy","feedFetched","dispatchFeedFetched","getFeed","getItem","friendsFilled","fetchFriendsProductsHook","fullFriends","fetchFeedHook","Content","stableGetFeed","useCallback","window","barChartData","uv","pv","amt","treemapChartData","pieChartData01","pieChartData02","radialChartData","fill","Charts","margin","right","left","bottom","dataKey","strokeDasharray","padding","stroke","activeDot","r","x1","y1","x2","y2","offset","stopColor","stopOpacity","fillOpacity","aspectRatio","cx","cy","outerRadius","innerRadius","unit","cursor","startAngle","endAngle","angleAxisId","position","background","iconSize","layout","verticalAlign","align","SearchBar","source","searchBarRef","searchText","setSearchText","results","setResults","document","handleClickOutside","removeEventListener","domNode","ReactDOM","findDOMNode","contains","fetchResults","selectProduct","cancel","CancelToken","toLowerCase","includes","getProductResults","keys","getSearchResults","getLinkTo","result","renderResultName","isOpenCss","renderResults","addExchangeRequest","id_friend_stuff","getExchangeRequests","deleteExchangeRequest","requestExchange","requestExchanges","fetchExchangeRequestsHook","requestDelete","Exchange","userProducts","setUserProducts","selectedProduct","setSelectedProduct","uProducts","renderProduct","idOwner","idStuff","idRequestor","idRequestorStuff","requestExchangeHook","Friends","friendsRequests","requests","setRequests","emailToRequest","setEmailToRequest","executeStatus","setExecuteStatus","collection","promises","WARNING","handleRequest","email_friend","id_user","addLoanRequest","getLoanRequests","deleteLoanRequest","requestLoan","fetchLoans","fetchLoanRequestsHook","requestDeleteLoan","deleteRequestLoanHook","Loan","FAILURE","loanRequestHook","Products","exchangeRequests","loanRequests","requestedProducts","setRequestProducts","loanIds","req","exchangeIds","exchangeFriendIds","getProductsFromIds","mapIds","uniq","executeDeleteExchange","isLoan","requestor","isUserRequestor","rejectText","ownerProduct","requestorProduct","Support","src","title","Tickets","file","setFile","getElementById","innerHTML","onSubmit","stopPropagation","preventDefault","Tesseract","recognize","logger","m","handleSubmit","files","fileT","handleChange","Test","debounce","test","myFlatTemp","array","Array","isArray","time","timeout","clearTimeout","setTimeout","x","item","indexOf","getStuff","a","split","reverse","join","spans","getElementsByTagName","dom","orderArray","myFlat","reduce","acc","body","loop","n","v","every","some","counter","chars","waysToDecode","myMap","word","sortedWord","sort","getAnagrams","initValue","val","decimal","roman","currentVal","thousands","Math","floor","repeat","hundreds","decimals","getRoman","cards","Cards","card","onExecuteAction","action","style","border","renderCard","allMovies","Test4","movies","setMovies","loading","setLoading","getMoviesFiltered","promise","filteredMovies","MainRoutes","path","element","Footer","rel","Header","exchangeClass","outerWidth","admin","removeItem","display","cssText","toggleMenu","toggleApps","newTo","renderCategories","Main","alt","friendsRequestsFetched","fetchFriendsRequestsHook","pendingProductsFetched","fetchPendingProductsHook","dispatchPedingProducts","fetchBasis","cats","fetchCategoriesHook","subcats","fetchFriendsHook","fetchAdmin","hookPromises","uRequests","pRequests","fetchProducts","prods","fetchProductsHook","FetchData","stableFetchBasis","stableFetchProducts","stableFetchAdmin","stableFetchFriendsRequests","stableFetchExchangeRequests","stableFetchLoanRequests","Register","firstName","setFirstName","lastName","setLastName","enableButton","registerUserHook","getMessageType","fetchUserHook","Auth","stableFetchUser","msg","TopRoutes","App","store","appReducer","combineReducers","spotifyConf","rootReducer","Boolean","hostname","middleware","thunk","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","require","createStore","reducersApp","applyMiddleware","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0bcd70c3.chunk.js","sourcesContent":["import i18n from 'i18next';\r\nimport { initReactI18next } from 'react-i18next';\r\n\r\nimport en from '../locale/en';\r\nimport es from '../locale/es';\r\n\r\ni18n\r\n  .use(initReactI18next)\r\n  .init({\r\n    lng: 'en',\r\n    resources: {\r\n      en,\r\n      es,\r\n    },\r\n    fallbackLng: 'en',\r\n    debug: process.env.NODE_ENV !== 'production',\r\n    ns: ['translations'],\r\n    defaultNS: 'translations',\r\n    keySeparator: false,\r\n    interpolation: {\r\n      escapeValue: false,\r\n      formatSeparator: ',',\r\n    },\r\n    react: {\r\n      wait: true,\r\n    },\r\n  }, (err, t) => {\r\n    if (err) {\r\n      console.info('i18n.language', i18n.language);\r\n    }\r\n  });\r\n\r\nexport default i18n;\r\n","import { ReactNode } from 'react';\r\n\r\nexport interface TextFieldProps {\r\n  name: string,\r\n  type: string,\r\n  placeholder?: string,\r\n  value?: string,\r\n  onKeyPress?: any,\r\n  onChange?: any,\r\n  disabled?: boolean,\r\n  reference?: any,\r\n  min?: number,\r\n  max?: number,\r\n  children?: any\r\n}\r\n\r\nexport interface MenuProps {\r\n  label: Function,\r\n  children: ReactNode\r\n}\r\n\r\nexport interface MenuState {\r\n  isOpen: boolean\r\n}\r\n\r\nexport interface DropDownProps {\r\n  onChange: Function,\r\n  values: any\r\n}\r\n\r\nexport interface DropDownState {\r\n  valueSelected: any\r\n}\r\n\r\nexport type LoadingSize = 'sm' | 'md' | 'lg' | 'xl';\r\n\r\nexport interface LoadingProps {\r\n  size: LoadingSize,\r\n  message?: string\r\n}\r\n\r\nexport interface ButtonProps {\r\n  type?: 'submit' | 'reset',\r\n  onClick?: Function,\r\n  text: string,\r\n  disabled?: boolean,\r\n  children?: any\r\n}\r\n\r\nexport enum WarningMessageType {\r\n  ERROR = 'error',\r\n  SUCCESSFUL = 'successful',\r\n  WARNING ='warning',\r\n  EMPTY = ''\r\n}\r\n\r\nexport interface WarningMessageProps {\r\n  message: string,\r\n  type: WarningMessageType,\r\n  show?: boolean\r\n}\r\n","import React, { useState } from 'react';\r\nimport ReactLoading from 'react-loading';\r\nimport { LoadingProps, LoadingSize } from './types';\r\n\r\nimport './Loading.scss';\r\n\r\nexport const getSize = (size: LoadingSize) => {\r\n  switch (size) {\r\n    case 'sm':\r\n      return 8;\r\n    case 'md':\r\n      return 16;\r\n    case 'lg':\r\n      return 32;\r\n    case 'xl':\r\n      return 64;\r\n    default:\r\n      return 16;\r\n  }\r\n}\r\n\r\nconst Loading = (props: LoadingProps) => {\r\n  let [message] = useState(props.message);\r\n  let size = getSize(props.size || 'md');\r\n\r\n  return (\r\n    <div className=\"stuffie-loading\">\r\n      <ReactLoading type=\"spin\" color=\"#00f\" height={size} width={size} />\r\n      {message && (<div className=\"stuffie-loading__message\">{message}</div>)}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Loading;\r\n","import React from 'react';\r\nimport { ButtonProps } from './types';\r\nimport './Button.scss';\r\n\r\nconst Button = (props: ButtonProps) => {\r\n  const { disabled, type, text, onClick } = props;\r\n\r\n  if (onClick) {\r\n    return (<button className=\"button\" type={type || \"button\"} onClick={event => event && onClick()} disabled={disabled}>{text}</button>); \r\n  }\r\n\r\n  return <button className=\"button\" type={type || \"button\"} disabled={disabled}>{text}</button>\r\n}\r\n\r\nexport default Button;\r\n","import React from 'react';\r\nimport { TextFieldProps } from './types';\r\nimport './TextField.scss';\r\n\r\nconst TextField = (props: TextFieldProps) => {\r\n  const { placeholder, value, onChange, disabled, reference, min, max } = props;\r\n  let range = null;\r\n\r\n  if (min || max) {\r\n    range = { min, max };\r\n  }\r\n\r\n  return (\r\n    <div className=\"textfield\">\r\n      {value !== null && !onChange &&\r\n        <input\r\n          placeholder={placeholder || ''}\r\n          value={value}\r\n          disabled={disabled}\r\n          ref={reference}\r\n          {...range}\r\n          {...props}\r\n        />\r\n      }\r\n      {onChange &&\r\n        <input\r\n          placeholder={placeholder || ''}\r\n          disabled={disabled}\r\n          ref={reference}\r\n          value={value}\r\n          {...range}\r\n          {...props}\r\n        />\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TextField;\r\n","const config = {\r\n  cloudinary: {\r\n    url: 'https://res.cloudinary.com/reyesrico/image/upload/c_scale,f_auto,w_100/v1',\r\n    cloudName: 'reyesrico',\r\n    apiKey: '981789986692969',\r\n    apiSecret: 'xxQPfLvWpN_iIlt1RfMZnB3jRw0'\r\n  },\r\n  cloudinary_headers: {\r\n    'cache-control': 'no-cache',\r\n    'x-apikey': '981789986692969'\r\n  },\r\n  fb: {\r\n    appId: \"1458399831108421\"\r\n  },\r\n  headers: {\r\n    'cache-control': 'no-cache',\r\n    'x-apikey': '5c932ad1cac6621685acc11e' //'20596935c72a29593312b65ac2075c86eb1ac',\r\n  },\r\n  server: 'https://stuffie-98b2.restdb.io/rest/'\r\n};\r\n\r\nexport default config;\r\n","import axios from 'axios';\n\n// Inspired by https://github.com/acdlite/flux-standard-action and\n// https://redux-actions.js.org/docs/api/createAction.html\n\n// Returns an action creator that stores the first argument (probably an object, so you can store multiple key-values\n// and destructure) as the action.payload. And the second argument as action.meta; meta can be useful to provide the\n// reducer with request parameters that aren't included in a payload returned by the server, for example.\nexport const makeStandardActionCreator = (ACTION_TYPE) => {\n  return (payload, meta) => ({\n    meta,\n    payload,\n    type: ACTION_TYPE,\n  });\n};\n\n// TODO: Make all to use this for args!!\n// CREATE FUNCTION TO RECEIVE ARRAY OF ARGS AND NOT ONLY ONE\n// To make action creators that make an API call and dispatch an action creator on success with the response.\n// Doesn't handle dispatching for errors.\nexport const makeApiActionCreator = (apiCall, successActionCreator) => {\n  return (...args) => dispatch => {\n    return apiCall.apply(this, [...args]).then(({ data }) => {\n      dispatch(successActionCreator(data, {...args}));\n      return Promise.resolve(data);\n    });\n  };\n};\n\nexport const makePaginatedApiActionCreator = (apiCall, successActionCreator, requestActionCreator) => {\n  return args => (dispatch) => {\n    const dispatchResultsAndFetchNextIfPresent = ({ data }) => {\n      dispatch(successActionCreator(data, args));\n      if (data.next) {\n        return axios.get(data.next).then(dispatchResultsAndFetchNextIfPresent);\n      } else {\n        return Promise.resolve({ data });\n      }\n    };\n\n    if (requestActionCreator) {\n      dispatch(requestActionCreator(undefined, args));\n    }\n    return apiCall(args).then(dispatchResultsAndFetchNextIfPresent);\n  };\n};\n","import config from './config';\r\n\r\nconst routes = {\r\n  category: {\r\n    add: () => `${config.server}categories`,\r\n    list: () => `${config.server}categories`,\r\n    detail: id => `${config.server}categories?q=${JSON.stringify({ id: parseInt(id) })}`\r\n  },\r\n  cloudinary: {\r\n    exist: () => `https://${config.cloudinary.apiKey}:${config.cloudinary.apiSecret}@api.cloudinary.com/v1_1/${config.cloudinary.cloudName}/resources/image`\r\n  },\r\n  subcategory: {\r\n    add: () => `${config.server}subcategories`,\r\n    list: () => `${config.server}subcategories`,\r\n    detail: id => `${config.server}subcategories?q=${JSON.stringify({ id: parseInt(id) })}`\r\n  },\r\n  stuff: {\r\n    addStuffiersStuff: () => `${config.server}stuffiers-stuff`,\r\n    addStuff: () => `${config.server}stuff`,\r\n    detail: id => `${config.server}stuff?q=${JSON.stringify({ id: parseInt(id) })}`,\r\n    listDetail: ids => `${config.server}stuff?q={\"$or\":${JSON.stringify(ids)}}&metafields=true`,\r\n    listForStuffier: id_stuffier => `${config.server}stuffiers-stuff?q=${JSON.stringify({ id_stuffier })}`,\r\n    listStuffiers: ids_stuffier => `${config.server}stuffiers-stuff?q={\"$or\":${JSON.stringify(ids_stuffier)}}`,\r\n    detailFromCategories: (category, subcategory) => `${config.server}stuff?q={\"$and\":[{\"category\": ${category}}, {\"subcategory\": ${subcategory}}]}`,\r\n    listPendingPics: () =>  `${config.server}stuff?q={\"$or\": [ {\"file_name\": {\"$exists\": false}}, {\"file_name\": \"\"} ]}`,\r\n    updateStuff: (_id) => `${config.server}stuffiers-stuff/${_id}`\r\n  },\r\n  user: {\r\n    detail: email => `${config.server}stuffiers?q=${JSON.stringify({ email })}`,\r\n    listDetail: ids => `${config.server}stuffiers?q={\"$or\":${JSON.stringify(ids)}}`,\r\n    friends: email => `${config.server}friends?q=${JSON.stringify({ email_stuffier: email })}`,\r\n    list: () => `${config.server}stuffiers`,\r\n    loginUser: (email, password) => `${config.server}stuffiers?q=${JSON.stringify({ email, password })}`,\r\n    registerUser: () => `${config.server}stuffiers`,\r\n    lastId: () => `${config.server}stuffiers?q={}&h={\"$fields\": {\"id\":1}, \"$aggregate\":[\"COUNT:\"] }`,\r\n    requestToBeFriend: () => `${config.server}friend-requests`,\r\n    friendsRequest: email_stuffier => `${config.server}friend-requests?q=${JSON.stringify({ email_stuffier })}`,\r\n    friendRequestDetail: (email_stuffier, id_friend) => `${config.server}friend-requests?q=${JSON.stringify({ email_stuffier, id_friend })}`,\r\n    deleteFriendRequest: id => `${config.server}friend-requests/${id}`,\r\n    friend: () => `${config.server}friends`,\r\n    userRequests: () => `${config.server}stuffiers?q={\"request\": true}`,\r\n    deleteUserRequest: id => `${config.server}stuffiers/${id}`\r\n  },\r\n  exchange: {\r\n    request: () => `${config.server}exchange-requests`,\r\n    list: id => `${config.server}exchange-requests?q={ \"$or\": [{ \"id_stuffier\": ${id} } ,{ \"id_friend\": ${id} }] }`,\r\n    deleteRequest: _id => `${config.server}exchange-requests/${_id}`\r\n  },\r\n  loan: {\r\n    request: () => `${config.server}loan-requests`,\r\n    list: id => `${config.server}loan-requests?q={ \"$or\": [{ \"id_stuffier\": ${id} } ,{ \"id_friend\": ${id} }] }`,\r\n    deleteRequest: _id => `${config.server}loan-requests/${_id}`\r\n  },\r\n  covid: {\r\n    default: () => `https://api.covid19api.com/`,\r\n    all: () => `https://api.covid19api.com/all`,\r\n    countries: () => `https://api.covid19api.com/countries`,\r\n    country: country => `https://api.covid19api.com/dayone/country/${country}`,\r\n   //  countryStatus: (country) => `/dayone/country/${country}/status/confirmed/live`\r\n  },\r\n  spotify: {\r\n    fetch: () => `${config.server}conf?q={\"platform\": \"spotify\"}`\r\n  }\r\n};\r\n\r\nexport default routes;\r\n","import CryptoJS from 'crypto-js';\r\nimport cryptoLib from 'crypto';\r\n\r\nconst crypto = {\r\n  encrypt: clear => CryptoJS.SHA256(clear).toString(CryptoJS.enc.Hex),\r\n  digest: clear => cryptoLib.createHash('sha256').update(clear).digest('hex'),\r\n  pbkdf2: (clear, salt) => {\r\n    return new Promise((resolve, reject) => {\r\n      cryptoLib.pbkdf2(clear, salt, 100, 256, 'sha256',\r\n        (err, derivedKey) => err ? reject(err) : resolve(derivedKey.toString('hex'))\r\n      );\r\n    });\r\n  }\r\n};\r\n\r\nexport default crypto;\r\n","import axios from 'axios';\r\nimport routes from './routes';\r\nimport config from './config';\r\nimport crypto from '../config/crypto';\r\n\r\nexport const getStuffier = email => (\r\n  axios.get(routes.user.detail(email), { headers: config.headers })\r\n);\r\n\r\nexport const getStuffiers = ids => {\r\n  if (ids.length > 0) {\r\n    return axios.get(routes.user.listDetail(ids), { headers: config.headers })\r\n  }\r\n\r\n  return Promise.resolve({});\r\n}\r\n\r\nexport const getFriends = email => (\r\n  axios.get(routes.user.friends(email), { headers: config.headers })\r\n);\r\n\r\nexport const loginStuffier = (email, password) => (\r\n  crypto.pbkdf2(password, email)\r\n    .then(res => axios.get(routes.user.loginUser(email, res), { headers: config.headers }))\r\n    .catch(err => Promise.reject(err))\r\n);\r\n\r\nexport const getLastStuffierId = () => (\r\n  axios.get(routes.user.lastId(), { headers: config.headers })\r\n);\r\n\r\nexport const registerStuffier = (user) => (\r\n  Promise.all([getLastStuffierId(), crypto.pbkdf2(user.password, user.email)])\r\n    .then(values => {\r\n      const id = Object.values(values[0].data)[0] + 1;\r\n      const password = values[1];\r\n      return axios.post(routes.user.registerUser(), { ...user, password, id, request: true }, { headers: config.headers });\r\n    })\r\n    .catch(err => Promise.reject(err))\r\n);\r\n\r\nexport const getFriendsRequests = (email) => (\r\n  axios.get(routes.user.friendsRequest(email), { headers: config.headers })\r\n);\r\n\r\nexport const requestToBeFriend = (email_friend, id_user) => (\r\n  axios.post(routes.user.requestToBeFriend(), { email_stuffier: email_friend, id_friend: id_user }, { headers: config.headers })\r\n);\r\n\r\nexport const deleteRequest = (email_stuffier, id_friend) => {\r\n  return axios.get(routes.user.friendRequestDetail(email_stuffier, id_friend), { headers: config.headers })\r\n    .then(res => axios.delete(routes.user.deleteFriendRequest(res.data[0]._id), { headers: config.headers }));\r\n}\r\n\r\nexport const addFriend = (email_stuffier, id_friend) => (\r\n  axios.post(routes.user.friend(), { email_stuffier, id_friend }, { headers: config.headers })\r\n);\r\n\r\nexport const getUserRequests = () => (\r\n  axios.get(routes.user.userRequests(), { headers: config.headers })\r\n);\r\n\r\nexport const deleteUserRequest = user => (\r\n  axios.put(routes.user.deleteUserRequest(user._id), { ...user, request: false }, { headers: config.headers })\r\n);\r\n","import { makeStandardActionCreator } from '../action-helpers';\r\n\r\nimport { REVOKE_USER } from '../constants';\r\nimport { LOGIN_USER_FETCHED, USER_FETCHED, USER_REGISTERED, USER_PICTURE_ADDED } from './constants';\r\nimport { loginStuffier, getStuffier, registerStuffier } from '../../services/stuffier';\r\n\r\nexport const loginUserFetched = makeStandardActionCreator(LOGIN_USER_FETCHED);\r\nexport const loginUser = (email, password) => dispatch => {\r\n  return loginStuffier(email, password).then(data => {\r\n    // dispatch(loginUserFetched(data, { email, password }));   // NOT NEEDED\r\n    return Promise.resolve(data);\r\n  });\r\n};\r\n\r\nexport const loginUserHook = (email, password) => {\r\n  return loginStuffier(email, password);\r\n};\r\n\r\n\r\n// https://reactgo.com/redux-hooks-fetch-data/\r\nconst userFetched = makeStandardActionCreator(USER_FETCHED);\r\nexport const fetchUser = (email) => dispatch => {   //makePaginatedApiActionCreator(getStuffier, userFetched);\r\n  return getStuffier(email).then(res => {\r\n    // TODO: Promise resolve only data about User!!!\r\n    dispatch(userFetched(res.data[0], email));\r\n    return Promise.resolve(res);\r\n  });\r\n}\r\n\r\n// https://kurthutten.com/blog/react-hook-lazy-loading-pattern/\r\nexport const fetchUserHook = (email, setIsLoading, dispatch) => {\r\n  setIsLoading(true);\r\n  return getStuffier(email)\r\n    .then(res => dispatch(userFetched(res.data[0], email)))\r\n    .catch(err => err)\r\n    .finally(() => setIsLoading(false));\r\n}\r\n\r\nexport const fetchUserHookWithMessage = (email, setIsLoading, setMessage, dispatch) => {\r\n  setIsLoading(true);\r\n  return getStuffier(email)\r\n    .then(res => {\r\n      dispatch(userFetched(res.data[0], email));\r\n      setMessage(\"Login successful\");\r\n    })\r\n    .catch(_ => setMessage(\"Error: Couldn't login. Try again.\"))\r\n    .finally(() => setIsLoading(true));\r\n}\r\n\r\nconst userRegistered = makeStandardActionCreator(USER_REGISTERED);\r\nexport const registerUser = (user) => dispatch => {\r\n  return registerStuffier(user)\r\n    .then(() => dispatch(userRegistered(user, user.email)))\r\n    .catch(err => err);\r\n}\r\n\r\nexport const registerUserHook = (user, setIsLoading, setMessage) => dispatch => {\r\n  setIsLoading(true);\r\n  return registerStuffier(user)\r\n    .then(() => dispatch(userRegistered(user, user.email)))\r\n    .then(() => {\r\n      localStorage.setItem('username', (user.email || ''));\r\n      setMessage(\"Register Successful. Request to be accepted by Admin. Do not login yet!\");\r\n    })\r\n    .catch(err => setMessage(`Error: Couldn't register. Try again. ${err}`))\r\n    .finally(() => setIsLoading(false));\r\n}\r\n\r\nconst userPictureAdded = makeStandardActionCreator(USER_PICTURE_ADDED);\r\nexport const addUserPicture = (user, picture) => dispatch => {\r\n  const facebookUser = { ...user, picture };\r\n  dispatch(userPictureAdded(facebookUser, facebookUser.email));\r\n}\r\n\r\nexport const logout = () => {\r\n  localStorage.removeItem('picture');\r\n  localStorage.removeItem('username');\r\n  window.sessionStorage.clear();\r\n\r\n  return {\r\n    type: REVOKE_USER,\r\n  };\r\n}\r\n","export const LOGIN_USER_FETCHED = 'STUFFIE:LOGIN_USER_FETCHED';\r\nexport const USER_FETCHED = 'STUFFIE:USER_FETCHED';\r\nexport const USER_REGISTERED = 'STUFFIE:USER_REGISTERED';\r\nexport const USER_PICTURE_ADDED = 'STUFFIE:USER_PICTURE_ADDED';\r\n","import React, { useState } from 'react';\r\nimport FacebookLogin from 'react-facebook-login';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Button from '../shared/Button';\r\nimport FacebookUser from '../types/FacebookUser';\r\nimport TextField from '../shared/TextField';\r\nimport config from '../../services/config';\r\nimport { addUserPicture, fetchUser, fetchUserHookWithMessage, loginUserHook } from '../../redux/user/actions';\r\n\r\nimport './Login.scss';\r\nimport State from '../../redux/State';\r\n\r\nconst Login = ({ setMessage, setIsLoading }: any) => {\r\n  const [ email, setEmail ] = useState('');\r\n  const [ password, setPassword ] = useState('');\r\n  const [ loginFB, setLoginFB ] = useState(false);\r\n  const user = useSelector((state: State) => state.user);\r\n  const dispatch = useDispatch();\r\n\r\n  const onClick = (e: any) => {\r\n    if (email && password) {\r\n      loginUserHook(email, password)\r\n        .then((response: any) => {\r\n          fetchUserHookWithMessage(response.data[0].email, setIsLoading, setMessage, dispatch);\r\n          localStorage.setItem('username', response.data[0].email);\r\n        })\r\n        .catch(() => setMessage(\"Error: Couldn't login. Try again.\"))\r\n    }\r\n  }\r\n\r\n  const handleKeypress = (e: any) => {\r\n    if (email && password && e.key === 'Enter') {\r\n      onClick(e);\r\n    }\r\n  }\r\n\r\n  const responseFacebook = (response: FacebookUser) => {\r\n    if (response) {\r\n      try {\r\n        dispatch(fetchUser(response.email));\r\n        const picture = response.picture.data.url;\r\n        localStorage.setItem('username', (user.email || ''));\r\n        dispatch(addUserPicture(user, picture));\r\n        setMessage(\"Login successful\");\r\n      } catch(_) {\r\n        setMessage(\"Error: Couldn't login. Try again.\");\r\n      }\r\n    }\r\n  }\r\n\r\n  // if (isLoading) return <Loading size=\"md\" />\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <h1>Login</h1>\r\n      <form className=\"login__form\">\r\n        <TextField\r\n          type=\"email\"\r\n          name=\"email\"\r\n          placeholder=\"Email\"\r\n          onChange={(e: any) => setEmail(e.target.value)} />\r\n        <TextField\r\n          type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Password\"\r\n          onKeyPress={handleKeypress}\r\n          onChange={(e: any) => setPassword(e.target.value)} />\r\n        <Button onClick={onClick} text=\"Login\" />\r\n      </form>\r\n      <hr className=\"login__hr\" />\r\n      <FacebookLogin\r\n        appId={config.fb.appId}\r\n        autoLoad={loginFB}\r\n        fields=\"name,email,picture\"\r\n        scope=\"public_profile,user_friends\"\r\n        onClick={(event) => event && setLoginFB(true)}\r\n        callback={responseFacebook} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","export const options = [\r\n  { value: 'en', label: 'English' },\r\n  { value: 'es', label: 'Spanish' },\r\n];\r\n","import React, { useState } from 'react';\r\nimport { MenuProps } from './types';\r\n\r\nimport './Menu.scss';\r\n\r\nconst Menu = (props: MenuProps) => {\r\n  const { label, children } = props;\r\n  let [isOpen, setIsOpen] = useState(false);\r\n\r\n\r\n  // const handleClickOutside = () => {\r\n  //   setIsOpen(false);\r\n  // }\r\n\r\n  // const open = () => {\r\n  //   setIsOpen(true);\r\n  // }\r\n\r\n  const toggle = () => {\r\n    setIsOpen(!isOpen);\r\n  }\r\n\r\n  return (\r\n    <div className=\"dropdown\">\r\n      <div className=\"dropdown__label\" onClick={toggle}>\r\n        {label(isOpen)}\r\n      </div>\r\n      <div className=\"dropdown__content-container\">\r\n        <div className={`dropdown__content ${isOpen ? 'dropdown--is-open' : ''}`}>\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Menu;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { options } from '../../config/options';\r\n\r\nimport Menu from '../shared/Menu';\r\nimport './Apps.scss';\r\n\r\nconst Apps = (props: any) => {\r\n  const { t, i18n } = useTranslation();\r\n\r\n  const changeLang = (lang: any) => {\r\n    i18n.changeLanguage(lang.value);\r\n  };\r\n\r\n  const renderCurrentLanguage = (isOpen: boolean) => {\r\n    return (\r\n      <div className={isOpen ? 'apps__language-open' : 'apps__language'}>\r\n        {t('Language')}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"apps\">\r\n      <div className=\"apps__title\">Apps &amp; extras</div>\r\n      <div className=\"apps__item\"><Link to='/tickets'>Tickets</Link></div>\r\n      <div className=\"apps__item\"><Link to='/support'>{t('Support')}</Link></div>\r\n      <div className=\"apps__item\"><Link to='/charts'>Charts</Link></div>\r\n      <div className=\"apps__item\"><Link to='/spotify'>Spotify</Link></div>\r\n      <div className=\"apps__item\"><Link to='/test'>Test</Link></div>\r\n      <div className=\"apps__item\"><a href='https://reyesrico.github.io/CovidCharts'>Covid Charts</a></div>\r\n      <div className=\"apps__item\"><Link to='/test2'>Test2</Link></div>\r\n      <div className=\"apps__item\"><Link to='/cards'>Cards</Link></div>\r\n      <div className=\"apps__item\"><Link to='/test4'>Test4</Link></div>\r\n      <hr />\r\n      <div className=\"apps__item\">\r\n        <Menu label={(isOpen: boolean) => renderCurrentLanguage(isOpen)}>\r\n          {options.map(option => {\r\n            return (<div key={option.value} className=\"apps__option\" onClick={() => changeLang(option)}>{option.label}</div>);\r\n          })}\r\n        </Menu>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Apps;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { map } from 'lodash';\r\nimport { useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport Button from '../shared/Button';\r\nimport State from '../../redux/State';\r\nimport TextField from '../shared/TextField';\r\n\r\nimport './Chat.scss';\r\n\r\nlet url = 'wss://stuffie-server.herokuapp.com';\r\n// let urlDev = 'ws://localhost:8080/';\r\n\r\nconst Chat = () => {\r\n  const user = useSelector((state: State) => state.user);\r\n  const { t } = useTranslation();\r\n  const messageEl = useRef(null);\r\n\r\n  let [messages, setMessages] = useState<any>([]);\r\n  let [newMessage, setNewMessage] = useState('');\r\n  let [disabledButton, setDisabledButton] = useState(true);\r\n  let [status, setStatus] = useState('');\r\n\r\n  // https://stackoverflow.com/questions/60152922/proper-way-of-using-react-hooks-websockets\r\n  const socket: any = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (messageEl && messageEl.current) {\r\n      (messageEl.current as any).addEventListener('DOMNodeInserted', (event: any) => {\r\n        const { currentTarget: target } = event;\r\n        target.scroll({ top: target.scrollHeight, behavior: 'smooth' });\r\n      });\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    socket.current = new WebSocket(url);\r\n\r\n    socket.current.onopen = () => {\r\n      console.log('Connected to the server');\r\n      setStatus('Connected to the server');\r\n      setDisabledButton(false);\r\n    };\r\n\r\n    socket.current.onclose = () => {\r\n      console.log('Disconnected. Check internet or server.');\r\n      setStatus('Disconnected. Check internet and refresh page.');\r\n      setDisabledButton(true);\r\n    };\r\n\r\n    socket.current.onerror = (e: any) => {\r\n      console.log(e.message);\r\n      setStatus(`Error: ${e.message}`);\r\n    };\r\n\r\n    const wsCurrent = socket.current;\r\n\r\n    return () => {\r\n      console.log('Unmounting...');\r\n      wsCurrent.close();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!socket.current) return;\r\n\r\n    socket.current.onmessage = (e: any) => {\r\n      console.log('Receiving message');\r\n      setStatus('Receiving message');\r\n      setDisabledButton(false);\r\n      const message = e.data;\r\n      setMessages((messages: any[]) => [...messages, message]);\r\n    };\r\n  }, []);\r\n\r\n  const handleKeypress = (e: any) => {\r\n    if (!disabledButton && e.key === 'Enter') {\r\n      sendMessage();\r\n    }\r\n  }\r\n\r\n  const getChatBubble = (userName: string, message: any) => {\r\n    let chatMessage = 'chat__message';\r\n    if (userName === 'Stuffie') {\r\n      return chatMessage + '-stuffie';\r\n    }\r\n\r\n    return chatMessage + (user.id === message.id ? '-user' : '-other');\r\n  }\r\n\r\n  const showMessages = () => {\r\n    return map(messages, (message, index) => {\r\n      message = JSON.parse(message);\r\n      let text = (typeof message === 'string') ? message : message.text;\r\n      let userName = (typeof message === 'string') ? 'Stuffie' : message.user;\r\n      let row = user.id === message.id ? 'chat__message-row-right' : 'chat__message-row-left'\r\n      return (\r\n        <div className={row} key={index}>\r\n          <div className={getChatBubble(userName, message)}>\r\n            <div className='chat__message-text'>{text}</div>\r\n            {user.id !== message.id && <div className='chat__message-name'>{userName}</div>}\r\n          </div>\r\n        </div>\r\n      );\r\n    })\r\n  }\r\n\r\n  const sendMessage = () => {\r\n    console.log(`Sending Message ${newMessage}`);\r\n    if (socket.current.readyState === WebSocket.OPEN) {\r\n      let message = { id: user.id, user: `${user.first_name} ${user.last_name}`, text: newMessage };\r\n      socket.current.send(JSON.stringify(message) as string);\r\n      setStatus('Sending Message');\r\n      setDisabledButton(true);\r\n      setNewMessage('');\r\n    } else {\r\n      setStatus(`Wait: ${socket.readyState} / ${socket.CONNECTING}`);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"chat\">\r\n      <div className='chat__title'>{t('Chat')}</div>\r\n      <div className=\"chat__messages\" ref={messageEl}>\r\n        {showMessages()}\r\n      </div>\r\n      <div className=\"chat__form\">\r\n        <TextField name=\"id\" type=\"text\" onChange={(e: any) => setNewMessage(e.target.value)} value={newMessage} onKeyPress={handleKeypress} />\r\n        <div className=\"chat__form-bottom\">\r\n          <div className=\"chat__status\">Status: {status}</div>\r\n          <Button disabled={disabledButton} onClick={() => sendMessage()} text={\"Submit\"} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import axios from 'axios';\r\nimport { map } from 'lodash';\r\nimport routes from './routes';\r\nimport config from './config';\r\n\r\nexport const getStuffList = id_stuffier => (\r\n  axios.get(routes.stuff.listForStuffier(id_stuffier), { headers: config.headers })\r\n);\r\n\r\nexport const getStuffiersList = friends => {\r\n  if (friends.length > 0) {\r\n    const ids = map(friends, friend => {\r\n      return { id_stuffier: friend.id };\r\n    });\r\n\r\n    return axios.get(routes.stuff.listStuffiers(ids), { headers: config.headers });\r\n  }\r\n\r\n  return Promise.resolve([]);\r\n};\r\n\r\nexport const getStuff = id => (\r\n  axios.get(routes.stuff.detail(id), { headers: config.headers })\r\n);\r\n\r\nexport const getListStuff = ids => {\r\n  if (ids.length) {\r\n    return axios.get(routes.stuff.listDetail(ids), { headers: config.headers });\r\n  }\r\n\r\n  return Promise.resolve([]);\r\n};\r\n\r\nexport const getProductsFromIds = ids => (\r\n  axios.get(routes.stuff.listDetail(ids), { headers: config.headers })\r\n);\r\n\r\nexport const getCategories = (token = null) => (\r\n  axios.get(routes.category.list(), { headers: config.headers, cancelToken: token })\r\n);\r\n\r\nexport const getSubCategories = (token = null) => (\r\n  axios.get(routes.subcategory.list(), { headers: config.headers, cancelToken: token })\r\n);\r\n\r\nexport const addStuff = ({ name, category, subcategory, fileName }) => (\r\n  axios.post(routes.stuff.addStuff(), { name, category, subcategory, file_name: fileName }, { headers: config.headers })\r\n);\r\n\r\nexport const addStuffStuffier = (id_stuffier, id_stuff) => (\r\n  axios.post(routes.stuff.addStuffiersStuff(), { id_stuffier, id_stuff }, { headers: config.headers })\r\n);\r\n\r\nexport const getStuffFromCategories = (category, subcategory) => (\r\n  axios.get(routes.stuff.detailFromCategories(category, subcategory), { headers: config.headers })\r\n);\r\n\r\nexport const getCategory = id => (\r\n  axios.get(routes.category.detail(id), { headers: config.headers })\r\n);\r\n\r\nexport const getSubcategory = id => (\r\n  axios.get(routes.subcategory.detail(id), { headers: config.headers })\r\n);\r\n\r\nexport const isImageExist = () => (\r\n  axios.get(routes.cloudinary.exist(), { headers: config.cloudinary_headers })\r\n);\r\n\r\nexport const addSubCategoryCall = ({ id, name }) => (\r\n  axios.post(routes.subcategory.add(), { id, name }, { headers: config.headers })\r\n);\r\n\r\nexport const addCategoryCall = ({ id, name }) => (\r\n  axios.post(routes.category.add(), { id, name }, { headers: config.headers })\r\n);\r\n\r\nexport const getPendingProducts = () => (\r\n  axios.get(routes.stuff.listPendingPics(), { headers: config.headers })\r\n);\r\n\r\nexport const updateStuff = (id_stuffier, id_stuff, cost) => {\r\n  return getStuffList(id_stuffier)\r\n    .then(res => {\r\n      const stuff = res.data.find(row => row.id_stuff === id_stuff);\r\n      if (stuff) {\r\n        return axios.put(routes.stuff.updateStuff(stuff._id), {...stuff, cost }, { headers: config.headers });\r\n      }\r\n      return Promise.resolve([]);\r\n    });\r\n};\r\n\r\n/*\r\n* This is to emulate ElasticSearch\r\n*/\r\nexport const getSearchResults = (searchText, products, token) => {\r\n  let results = [];\r\n  const text = searchText.toLowerCase();\r\n\r\n  return Promise.all([getCategories(token), getSubCategories(token)]).then(values => {\r\n    values[0].data.forEach(c => {\r\n      if (c.name.toLowerCase().includes(text)){\r\n        results.push({ type: 'Category', name: c.name, id: c.id });\r\n      }\r\n    });\r\n\r\n    values[1].data.forEach(s => {\r\n      if (s.name.toLowerCase().includes(text)) {\r\n        results.push({ type: 'Subcategory', name: s.name, id: s.id });\r\n      }\r\n    });\r\n\r\n    Object.keys(products).forEach(key => {\r\n      products[key].forEach(p => {\r\n        if (p.name.toLowerCase().includes(text)) {\r\n          results.push({ type: 'Product', name: p.name, id: p.id });\r\n        }  \r\n      });\r\n    });\r\n  \r\n    return Promise.resolve(results);\r\n  });\r\n};\r\n\r\n// For Exchange ElasticSearch\r\nexport const getProductResults = (searchText, products) => (\r\n  products.filter(product => product.name.toLowerCase().includes(searchText.toLowerCase()))\r\n);\r\n","import { makePaginatedApiActionCreator, makeStandardActionCreator } from '../action-helpers';\r\nimport { CATEGORY_ADDED, CATEGORIES_FETCHED, CATEGORY_FETCHED } from './constants';\r\nimport { addCategoryCall, getCategories, getCategory } from '../../services/stuff';\r\n\r\nconst categoriesFetched = makeStandardActionCreator(CATEGORIES_FETCHED);\r\nexport const fetchCategories = makePaginatedApiActionCreator(getCategories, categoriesFetched);\r\n\r\nexport const fetchCategoriesHook = (sessionStorage, dispatch) => {\r\n  getCategories().then(res =>{\r\n    sessionStorage.setItem('categories', JSON.stringify(res.data));\r\n    dispatchCategoriesFetched(res.data, dispatch);\r\n  });\r\n}\r\n\r\nexport const dispatchCategoriesFetched = (categories, dispatch) => {\r\n  dispatch(categoriesFetched(categories));\r\n}\r\n\r\nconst categoryFeteched = makeStandardActionCreator(CATEGORY_FETCHED);\r\nexport const fetchCategory = makePaginatedApiActionCreator(getCategory, categoryFeteched);\r\n\r\nconst categoryAdded = makeStandardActionCreator(CATEGORY_ADDED);\r\nexport const addCategory = makePaginatedApiActionCreator(addCategoryCall, categoryAdded);\r\nexport const addCategoryHook = (category, dispatch) => {\r\n  return addCategoryCall(category).then(res => {\r\n    dispatch(categoryAdded(res.data));\r\n    return Promise.resolve(res.data);\r\n  }).catch(err => Promise.reject(err));\r\n};\r\n","export const CATEGORIES_FETCHED = 'MENU::CATEGORIES_FETCHED';\r\nexport const CATEGORY_FETCHED = 'MENU::CATEGORY_FETCHED';\r\nexport const CATEGORY_ADDED = 'MENU:CATEGORY_ADDED';\r\n","import { makePaginatedApiActionCreator, makeStandardActionCreator } from '../action-helpers';\r\nimport { SUBCATEGORIES_FETCHED, SUBCATEGORY_FETCHED, SUBCATEGORY_ADDED } from './constants';\r\nimport { addSubCategoryCall, getSubCategories, getSubcategory } from '../../services/stuff';\r\n\r\nconst subCategoriesFetched = makeStandardActionCreator(SUBCATEGORIES_FETCHED);\r\nexport const fetchSubCategories = makePaginatedApiActionCreator(getSubCategories, subCategoriesFetched);\r\n\r\nexport const fetchSubCategoriesHook = (sessionStorage, dispatch) => {\r\n  getSubCategories().then(res =>{\r\n    sessionStorage.setItem('subcategories', JSON.stringify(res.data));\r\n    dispatchSubCategoriesFetched(res.data, dispatch);\r\n  });\r\n}\r\n\r\nexport const dispatchSubCategoriesFetched = (subcategories, dispatch) => {\r\n  dispatch(subCategoriesFetched(subcategories));\r\n}\r\n\r\nconst subCategoryFetched = makeStandardActionCreator(SUBCATEGORY_FETCHED);\r\nexport const fetchSubCategory = makePaginatedApiActionCreator(getSubcategory, subCategoryFetched);\r\n\r\nconst subCategoryAdded = makeStandardActionCreator(SUBCATEGORY_ADDED);\r\nexport const addSubCategory = makePaginatedApiActionCreator(addSubCategoryCall, subCategoryAdded);\r\nexport const addSubCategoryHook = (subCategory, dispatch) => {\r\n  return addSubCategoryCall(subCategory).then(res => {\r\n    dispatch(subCategoryAdded(res.data));\r\n    return Promise.resolve(res.data);\r\n  }).catch(err => Promise.reject(err));\r\n};\r\n","export const SUBCATEGORIES_FETCHED = 'MENU::SUBCATEGORIES_FETCHED';\r\nexport const SUBCATEGORY_FETCHED = 'MENU::SUBCATEGORY_FETCHED';\r\nexport const SUBCATEGORY_ADDED = 'MENU:SUBCATEGORY_ADDED';\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { map } from 'lodash';\r\n\r\nimport Button from '../shared/Button';\r\nimport Loading from '../shared/Loading';\r\nimport State from '../../redux/State';\r\nimport TextField from '../shared/TextField';\r\nimport { addCategoryHook } from '../../redux/categories/actions';\r\nimport { addSubCategoryHook } from '../../redux/subcategories/actions';\r\n\r\nimport { AddCategoryProps } from './types';\r\nimport './AddCategory.scss';\r\n\r\nconst TYPE = {\r\n  CATEGORY: 'category',\r\n  SUBCATEGORY: 'subcategory'\r\n};\r\n\r\nconst AddCategory = (props: AddCategoryProps) => {\r\n  const dispatch = useDispatch();\r\n  const { type } = props;\r\n\r\n  let categories = useSelector((state: State) => state.categories);\r\n  let subcategories = useSelector((state: State) => state.subcategories);\r\n\r\n  let [isLoading, setIsLoading] = useState(false);\r\n  let [id, setId] = useState('');\r\n  let [name, setName] = useState('');\r\n  // let [categoriesS, setCategories] = useState<any>([]);\r\n  // let [subcategoriesS, setSubcategories] = useState<any>([]);\r\n  let [label, setLabel] = useState('');\r\n\r\n  useEffect(() => {\r\n    let label = type === 'category' ? 'Category' : 'SubCategory';\r\n    setLabel(label);\r\n  }, [type]);\r\n\r\n  const createValue = () => {\r\n    if (type === TYPE.CATEGORY) {\r\n      setIsLoading(true);\r\n\r\n      addCategoryHook({ name, id: Number(id) }, dispatch)\r\n        .then((res: any) => {\r\n          // const newCategory = { _id: res.data._id, id: res.data.id, name: res.data.name };\r\n          // setCategories([...categories, newCategory]);\r\n          setName('');\r\n          setId('');\r\n        })\r\n        .finally(() => setIsLoading(false));\r\n    }\r\n\r\n    if (type === TYPE.SUBCATEGORY) {\r\n      setIsLoading(true);\r\n\r\n      addSubCategoryHook({ name, id: Number(id) }, dispatch)\r\n        .then((res: any) => {\r\n          // const newSubCategory = { _id: res.data._id, id: res.data.id, name: res.data.name };\r\n          // setSubcategories([...subcategories, newSubCategory]);\r\n          setName('');\r\n          setId('');\r\n        })\r\n        .finally(() => setIsLoading(false));\r\n    }\r\n  }\r\n\r\n  const renderValues = (typeToRender: string) => {\r\n    const objects = typeToRender === TYPE.CATEGORY ? categories : subcategories;\r\n\r\n    return map(objects, (object: any) => {\r\n      return (\r\n        <li className=\"add-category__item\" key={`${typeToRender}_${object.id}`}>\r\n          <span className=\"add-category__id\">({object.id})</span> - {object.name}\r\n        </li>\r\n      );\r\n    });\r\n  }\r\n\r\n  if (isLoading) return <Loading size=\"md\" />\r\n\r\n  const otherLabel = type !== TYPE.CATEGORY ? 'Category' : 'SubCategory';\r\n  const otherType = type === TYPE.CATEGORY ? TYPE.SUBCATEGORY : TYPE.CATEGORY;\r\n\r\n  return (\r\n    <div className=\"add-category\">\r\n      <form>\r\n        <div className=\"add-category__values\">\r\n          <div>\r\n            <h2>{label}</h2>\r\n            <ul className=\"add-category__list\">\r\n              {renderValues(type)}\r\n            </ul>\r\n          </div>\r\n          <div>\r\n            <h2>{otherLabel}</h2>\r\n            <ul className=\"add-category__list\">\r\n              {renderValues(otherType)}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <hr />\r\n        <div className=\"add-category__row\">\r\n          <label>Id</label>\r\n          <TextField name=\"id\" type=\"text\" onChange={(e: any) => setId(e.target.value)} />\r\n        </div>\r\n        <div className=\"add-category__row\">\r\n          <label>{label}</label>\r\n          <TextField name=\"name\" type=\"text\" onChange={(e: any) => setName(e.target.value)} />\r\n        </div>\r\n        <hr />\r\n        <Button onClick={() => createValue()} text={\"Send\"} />\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddCategory;\r\n","import React, { useState } from 'react';\r\nimport { find } from 'lodash';\r\nimport { DropDownProps } from './types';\r\n\r\nconst DropDown = (props: DropDownProps) => {\r\n  const [valueSelected, setValueSelected] = useState<number>();\r\n  const { values } = props;\r\n\r\n  const updateChange = (event: any) => {\r\n    const { onChange, values } = props;\r\n\r\n    const id = Number(event.target.value);\r\n    const object = find(values, value => value.id === id);\r\n\r\n    setValueSelected(id);\r\n    onChange(object);\r\n  }\r\n\r\n  const value = values ? values[0] ? values[0].id : null : null;\r\n  const objectSelected = valueSelected ? valueSelected : value;\r\n\r\n  return (\r\n    <select onChange={updateChange} value={objectSelected}>\r\n      {\r\n        values && values.map((object: any, index: number) => {\r\n          return <option key={index} value={object.id}>{object.name}</option>;\r\n        })\r\n      }\r\n    </select>\r\n  );\r\n}\r\n\r\nexport default DropDown;\r\n","import React from 'react';\r\nimport { WarningMessageProps } from './types';\r\nimport './WarningMessage.scss';\r\n\r\nconst WarningMessage = (props: WarningMessageProps) => {\r\n  const { message, type } = props;\r\n\r\n  if (!message) return <div></div>\r\n\r\n  return (\r\n    <div className={`warning-message warning-message__${type}`}>\r\n      {message}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default WarningMessage;\r\n","import { find, forEach, isEmpty, map } from 'lodash';\r\n\r\nimport Category from '../types/Category';\r\nimport ProductsMap from '../types/ProductsMap';\r\nimport Product from '../types/Product';\r\nimport StuffiersStuff from '../types/StuffiersStuff';\r\nimport User from '../types/User';\r\n\r\nexport function mapStuff(stuff: any) {\r\n  return map(stuff, (object: any) => {\r\n    return { id: object.id_stuff };\r\n  });\r\n}\r\n\r\nexport function mapIds(ids: number[]) {\r\n  return map(ids, id => {\r\n    return { id };\r\n  });\r\n}\r\n\r\nexport function getProductsMap(categories: Category[], objects: any): ProductsMap {\r\n  let productsMap: ProductsMap = {};\r\n\r\n  forEach(categories, (category: Category) => {\r\n    productsMap = {\r\n      ...productsMap,\r\n      [category.id as number]: [],\r\n    };\r\n  });\r\n\r\n  if (!isEmpty(productsMap)) {\r\n    // Filling products per category\r\n    forEach(objects, (object: any) => {\r\n      productsMap[object.category].push(object);\r\n    });\r\n  }\r\n\r\n  return productsMap;\r\n}\r\n\r\nexport function getProductFromProducts(productId: number, products: ProductsMap) {\r\n  const values = Object.values(products);\r\n  let product = null;\r\n\r\n  for (let i=0; i < values.length; i++) {\r\n    product = values[i].find((p: Product) => p.id === productId);\r\n    if (product) {\r\n      break;\r\n    }\r\n  }\r\n\r\n  return product;\r\n}\r\n\r\nexport function getFriendProducts(friends: User[], products: Product[], stuffiers_stuff: StuffiersStuff[]) {\r\n  let friendsProducts: User[] = [];\r\n\r\n  forEach(friends, friend => {\r\n    const values = stuffiers_stuff.filter((row: StuffiersStuff) => row.id_stuffier === friend.id)\r\n    .map((row: StuffiersStuff) => {\r\n      let product = find(products, (p: Product) => p.id === row.id_stuff);\r\n      return row.cost !== undefined ? { ...product, cost: row.cost } : product ? product : {};\r\n    });\r\n\r\n    friendsProducts.push({ ...friend, products: values });\r\n  });\r\n\r\n  return friendsProducts;\r\n}\r\n\r\nexport function isProductsEmpty(productsMap: ProductsMap) {\r\n  const products = Object.values(productsMap).filter(row => row.length > 0);\r\n  return !products.length;\r\n}\r\n\r\nexport function getProductsList(productsMap: ProductsMap): Product[] {\r\n  return Object.values(productsMap).filter(row => row.length > 0).flat();\r\n}\r\n\r\nexport function mapCostToProducts(products: Product[], stuff: StuffiersStuff[]) {\r\n  if (!products || products.length === 0) return {};\r\n\r\n  return products.map(p => {\r\n    const extraStuff = stuff.find((s: StuffiersStuff) => s.id_stuff === p.id);\r\n    return extraStuff ? { ...p, cost: extraStuff.cost } : p;\r\n  });\r\n}\r\n\r\nexport function findProduct(idProduct: number, productsMap: ProductsMap): Product {\r\n  return getProductsList(productsMap).find(p => p.id === idProduct) || {};\r\n}\r\n","export const PRODUCT_FETCHED = 'MENU::PRODUCT_FETCHED';\r\nexport const PRODUCTS_FETCHED = 'MENU::PRODUCTS_FETCHED';\r\n\r\nexport const PRODUCT_ADDED = 'PRODUCTS::PRODUCT_ADDED';\r\nexport const PRODUCT_UPDATED = 'PRODUCTS::PRODUCT_UPDATED';\r\n","import { makePaginatedApiActionCreator, makeStandardActionCreator, makeApiActionCreator } from '../action-helpers';\r\nimport { PRODUCT_ADDED, PRODUCT_FETCHED, PRODUCTS_FETCHED, PRODUCT_UPDATED } from './constants';\r\nimport { addStuff, addStuffStuffier, getListStuff, getStuffList, getStuff, updateStuff } from '../../services/stuff';\r\nimport { mapStuff, getProductsMap, mapCostToProducts } from '../../components/helpers/StuffHelper';\r\nimport { WarningMessageType } from '../../components/shared/types';\r\n\r\nconst productFetched = makeStandardActionCreator(PRODUCT_FETCHED);\r\nconst productsFetched = makeStandardActionCreator(PRODUCTS_FETCHED);\r\nconst productUpdated = makeStandardActionCreator(PRODUCT_UPDATED);\r\n\r\nconst productAdded = makeStandardActionCreator(PRODUCT_ADDED);\r\nexport const addProduct = (product, user) => dispatch => {\r\n  return addStuff(product)\r\n  .then(res => {\r\n    const product = res.data;\r\n    return addStuffStuffier(user.id, product.id);\r\n  })\r\n  .then(() => {\r\n    dispatch(productAdded(product, user.email));\r\n    return Promise.resolve(product);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n\r\nexport const addProductHook = (product, user, dispatch) => {\r\n  return addStuff(product)\r\n  .then(res => {\r\n    const product = res.data;\r\n    return addStuffStuffier(user.id, product.id);\r\n  })\r\n  .then(() => {\r\n    dispatch(productAdded(product, user.email));\r\n    return Promise.resolve(product);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n\r\nexport const addRegisteredProduct = (user, product) => dispatch => {\r\n  return addStuffStuffier(user.id, product.id)\r\n  .then(() => {\r\n    dispatch(productAdded(product, user.email));\r\n    return Promise.resolve(product);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n\r\nexport const addRegisteredProductHook = (user, product, dispatch) => {\r\n  return addStuffStuffier(user.id, product.id)\r\n  .then(() => {\r\n    dispatch(productAdded(product, user.email));\r\n    return Promise.resolve(product);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n\r\n\r\nexport const fetchProduct = makePaginatedApiActionCreator(getStuff, productFetched);\r\nexport const fetchProducts = (user, categories, setLoading) => dispatch => {  // makePaginatedApiActionCreator(getListStuff, productsFetched);\r\n  let extraStuff;\r\n  setLoading(true);\r\n  return getStuffList(user.id)\r\n         .then(res => {\r\n           extraStuff = res.data;               // []Stuff (with cost)\r\n           return getListStuff(mapStuff(res.data));\r\n          })\r\n         .then(res => {                         // []Product\r\n           const objects = mapCostToProducts(res.data, extraStuff);\r\n           const products = getProductsMap(categories, objects);\r\n           dispatch(productsFetched(products, user.email));\r\n           return Promise.resolve(products);\r\n         })\r\n         .finally(() => setLoading(false));\r\n}\r\n\r\nexport const fetchProductsHook = (user, categories, setLoading, sessionStorage, dispatch)  => {\r\n  let extraStuff;\r\n  setLoading(true);\r\n  return getStuffList(user.id)\r\n         .then(res => {\r\n           extraStuff = res.data;               // []Stuff (with cost)\r\n           return getListStuff(mapStuff(res.data));\r\n          })\r\n         .then(res => {                         // []Product\r\n           const objects = mapCostToProducts(res.data, extraStuff);\r\n           const products = getProductsMap(categories, objects);\r\n           sessionStorage.setItem('products', JSON.stringify(products));\r\n           dispatchProductsFetched(products, user.email, dispatch);\r\n         })\r\n         .finally(() => setLoading(false));\r\n}\r\n\r\nexport const dispatchProductsFetched = (products, email, dispatch) => {\r\n  dispatch(productsFetched(products, email));\r\n}\r\n\r\nexport const updateProduct = makeApiActionCreator(updateStuff, productUpdated);\r\nexport const updateProductHook = (userId, productId, updatedCost, dispatch, setMessage, setType) => {\r\n  updateStuff(userId, productId, updatedCost)\r\n  .then(() => {\r\n    dispatch(productUpdated(userId, productId, updatedCost));\r\n    setMessage(`Cost updated successfully`);\r\n    setType(WarningMessageType.SUCCESSFUL);\r\n  })\r\n  .catch(() => {\r\n    setMessage(`Cost not updated`);\r\n    setType(WarningMessageType.ERROR);\r\n  });\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { isEmpty } from 'lodash';\r\n\r\nimport Button from '../shared/Button';\r\nimport Category from '../types/Category';\r\nimport Dropdown from '../shared/DropDown';\r\nimport Product from '../types/Product';\r\nimport State from '../../redux/State';\r\nimport Subcategory from '../types/Subcategory';\r\nimport TextField from '../shared/TextField';\r\nimport WarningMessage from '../shared/WarningMessage';\r\nimport { WarningMessageType } from '../shared/types';\r\nimport { getProductFromProducts } from '../helpers/StuffHelper';\r\nimport { getStuffFromCategories } from '../../services/stuff';\r\nimport { addProductHook, addRegisteredProductHook } from '../../redux/products/actions';\r\n\r\nimport './AddProduct.scss';\r\n\r\nconst AddProduct = () => {\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n\r\n  let user = useSelector((state: State) => state.user);\r\n  let categories = useSelector((state: State) => state.categories);\r\n  let subcategories = useSelector((state: State) => state.subcategories);\r\n  let products = useSelector((state: State) => state.products);\r\n\r\n  let [status, setStatus] = useState(WarningMessageType.EMPTY);\r\n  let [name, setName] = useState('');\r\n  // let [file_name, setFileName] = useState(null);\r\n  let [category, setCategory] = useState(categories[0]);\r\n  let [product, setProduct] = useState<any>({ id: null, name: null });\r\n  let [subcategory, setSubcategory] = useState(subcategories[0]);\r\n  let [stuffStuffier, setStuffStuffier] = useState({});\r\n  let [productsByCategories, setProductsByCategories] = useState([]);\r\n\r\n  useEffect(() => {\r\n    renderProducts(category, subcategory);\r\n  });\r\n\r\n  // useEffect(() => {\r\n  //   renderProducts(category, subcategory);\r\n  // }, [subcategory]);\r\n\r\n\r\n  const createProduct = () => {\r\n    if (!name || !category || !subcategory) return;\r\n\r\n    addProductHook({ name, category: category.id, subcategory: subcategory.id }, user)\r\n      .then((product: Product) => {\r\n        setProduct(product);\r\n        setStuffStuffier(product);\r\n        setStatus(WarningMessageType.SUCCESSFUL);\r\n      })\r\n      .catch(() => {\r\n        const product = { name, category: category.id, subcategory: subcategory.id };\r\n        setProduct(product);\r\n        setStuffStuffier(product);\r\n        setStatus(WarningMessageType.ERROR);\r\n      });\r\n  }\r\n\r\n  const registerProduct = () => {\r\n    addRegisteredProductHook(user, product, dispatch).then((p: Product) => {\r\n      setStuffStuffier(p);\r\n      setStatus(WarningMessageType.SUCCESSFUL);\r\n      navigate('/products');\r\n    });\r\n  }\r\n\r\n  // const clearState = () => {\r\n  //   setStatus(WarningMessageType.EMPTY);\r\n  //   setName('');\r\n  //   // setFileName(null);\r\n  //   setCategory(categories[0]);\r\n  //   setSubcategory(subcategories[0]);\r\n  //   setProduct({});\r\n  //   setStuffStuffier({});\r\n  // }\r\n\r\n  const getMessage = () => {\r\n    const message = status === WarningMessageType.ERROR ? 'was not added' : 'was added successfully!';\r\n    return (product && !isEmpty(stuffStuffier)) ? `Stuff ${product.name} ${message}` : \"\";\r\n  }\r\n\r\n  const renderProducts = (category: Category, subcategory: Subcategory) => {\r\n    getStuffFromCategories(category.id, subcategory.id).then(res => {\r\n      const product = res.data[0];\r\n      const productsByCategories = res.data.filter((p: Product) => p.id && !getProductFromProducts(p.id, products));\r\n      setProductsByCategories(productsByCategories);\r\n      setProduct(product);\r\n    });\r\n  }\r\n\r\n  const updateCategory = (category: Category) => {\r\n    renderProducts(category, subcategory);\r\n    setCategory(category);\r\n  }\r\n\r\n  const updateSubcategory = (subcategory: Subcategory) => {\r\n    renderProducts(category, subcategory);\r\n    setSubcategory(subcategory);\r\n  }\r\n\r\n  return (\r\n    <div className=\"add-product\">\r\n      <h3>Add Stuff</h3>\r\n      <WarningMessage message={getMessage()} type={status} />\r\n      <hr />\r\n      <form>\r\n        <div>Select Product</div>\r\n        <div className=\"add-product__row\">\r\n          <label>Category</label>\r\n          <Dropdown onChange={(category: any) => updateCategory(category)} values={categories} />\r\n        </div>\r\n        <div className=\"add-product__row\">\r\n          <label>SubCategory</label>\r\n          <Dropdown onChange={(subcategory: any) => updateSubcategory(subcategory)} values={subcategories} />\r\n        </div>\r\n        {!productsByCategories.length && <div>There are no products</div>}\r\n        {productsByCategories.length > 0 && (\r\n          <div className=\"add-product__row\">\r\n            <label>Product</label>\r\n            <Dropdown onChange={(product: Product) => setProduct(product)} values={productsByCategories} />\r\n          </div>\r\n        )}\r\n        <hr />\r\n        <Button text=\"Add Product\" disabled={!(category && subcategory && product && product.name)}\r\n          onClick={() => registerProduct()}>\r\n        </Button>\r\n        <hr />\r\n        <div>Create New Product</div>\r\n        <div className=\"add-product__row\">\r\n          <label>Name</label>\r\n          <TextField name=\"name\" type=\"text\" onChange={(e: any) => setName(e.target.value)} />\r\n        </div>\r\n        <div className=\"add-product__row\">\r\n          <label>Category</label>\r\n          <Dropdown onChange={(category: any) => setCategory(category)} values={categories} />\r\n        </div>\r\n        <div className=\"add-product__row\">\r\n          <label>SubCategory</label>\r\n          <Dropdown onChange={(subcategory: any) => setSubcategory(subcategory)} values={subcategories} />\r\n        </div>\r\n        <hr />\r\n        <Button onClick={() => createProduct()} text=\"Send\"></Button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddProduct;\r\n","import { makeApiActionCreator,  makeStandardActionCreator } from '../action-helpers';\r\n\r\nimport { USER_REQUESTS_FETCHED, USER_REQUEST_DELETED } from './constants';\r\nimport { getUserRequests, deleteUserRequest } from '../../services/stuffier';\r\n\r\nconst userRequestsFetched = makeStandardActionCreator(USER_REQUESTS_FETCHED);\r\nexport const fetchUserRequests = makeApiActionCreator(getUserRequests, userRequestsFetched);\r\n\r\nexport const fetchUserRequestsHook = (sessionStorage, dispatch) => {\r\n  getUserRequests().then(res =>{\r\n    sessionStorage.setItem('user-requests', JSON.stringify(res.data));\r\n    dispatchUserRequests(res.data, dispatch);\r\n  });\r\n}\r\n\r\nexport const dispatchUserRequests = (requests, dispatch) => {\r\n  dispatch(userRequestsFetched(requests));\r\n}\r\n\r\nconst userRequestDeleted = makeStandardActionCreator(USER_REQUEST_DELETED);\r\nexport const deleteRequest = makeApiActionCreator(deleteUserRequest, userRequestDeleted);\r\nexport const deleteRequestHook = (user, dispatch) => {\r\n  deleteUserRequest(user).then(() => dispatch(userRequestDeleted));\r\n}\r\n","export const USER_REQUESTS_FETCHED = 'STUFFIE:USER_REQUESTS_FETCHED';\r\nexport const USER_REQUEST_DELETED = 'STUFFIE::USER_REQUEST_DELETED';\r\n","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Button from '../shared/Button';\r\nimport Product from '../types/Product';\r\nimport State from '../../redux/State';\r\nimport User from '../types/User';\r\nimport { Link } from 'react-router-dom';\r\nimport { deleteRequestHook } from '../../redux/user-requests/actions';\r\nimport './Admin.scss';\r\n\r\nconst Admin = () => {\r\n  const dispatch = useDispatch();\r\n  let userRequests = useSelector((state: State) => state.userRequests);\r\n  let pendingProducts = useSelector((state: State) => state.pendingProducts);\r\n\r\n  const executeRequest = (user: User, isAccepted = false) => {\r\n    if (isAccepted) {\r\n      deleteRequestHook(user, dispatch);\r\n    }\r\n  }\r\n\r\n  const renderRequests = () => {\r\n    return (\r\n      <div className=\"admin__requests\">\r\n        <hr />\r\n        <h3 className=\"admin__title\">\r\n          <div>User Requests</div>\r\n          <div className=\"admin__warning\">{userRequests.length}</div>\r\n        </h3>\r\n        <ul>\r\n          {userRequests.map((user: User, index: number) => {\r\n            return (\r\n              <li className=\"admin__request\" key={index}>\r\n                <div className=\"admin__request-text\">\r\n                  {user.first_name} {user.last_name} ({user.email})\r\n                </div>\r\n                <div className=\"admin__request-button\">\r\n                  <Button onClick={() => executeRequest(user, true)} text=\"Accept\"></Button>\r\n                </div>\r\n              </li>\r\n            )\r\n          }\r\n          )}\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const renderPendingProducts = () => {\r\n    return (\r\n      <div className=\"admin__requests\">\r\n        <hr />\r\n        <h3 className=\"admin__title\">\r\n          <div>Products Pending of Pics</div>\r\n          <div className=\"admin__warning\">{pendingProducts.length}</div>\r\n        </h3>\r\n        <ul>\r\n          {pendingProducts.map((product: Product) => {\r\n            return (<li key={product.id} className=\"admin__request\">\r\n              <div>Product: {product.name}</div>\r\n              <div>Id: {product.id} / Category: {product.category} / Subcategory: {product.subcategory}</div>\r\n            </li>)\r\n          })}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"admin\">\r\n      {pendingProducts.length > 0 && renderPendingProducts()}\r\n      {userRequests.length > 0 && renderRequests()}\r\n      <div className=\"admin__link\"><Link to={`/category/add`}>Add Category</Link></div>\r\n      <hr />\r\n      <div className=\"admin__link\"><Link to={`/subcategory/add`}>Add SubCategory</Link></div>\r\n      <hr />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Admin;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Image, Video, Transformation, CloudinaryContext } from 'cloudinary-react';\r\n\r\nimport config from '../../services/config';\r\nimport { existImage } from '../../services/cloudinary-helper';\r\nimport './Media.scss';\r\n\r\nconst Media = (props: any) => {\r\n  let { format } = props;\r\n  let [imageUrl, setImageUrl] = useState('default_product');\r\n\r\n  const didMountRef = useRef(false);\r\n  const prevProps = useRef(props);\r\n\r\n  useEffect(() => {\r\n    // componentDidUpdate\r\n    if (didMountRef.current) {\r\n      if (prevProps.current.fileName !== props.fileName) {\r\n        if (format !== 'mp4') {\r\n          setUrl();\r\n        }\r\n      }\r\n    } else {\r\n      if (format !== 'mp4') {\r\n        setUrl();\r\n      }\r\n      didMountRef.current = true;\r\n    }\r\n  });\r\n\r\n  const setUrl = () => {\r\n    const { fileName, category, subcategory, isProduct } = props;\r\n\r\n    if (isProduct && category && subcategory) {\r\n      const imageUrl = `products/${category}/${subcategory}/${fileName}`;\r\n      existImage(imageUrl)\r\n        .then(() => setImageUrl(imageUrl))\r\n        .catch(() => setImageUrl('default_product'));\r\n    } else {\r\n      setImageUrl(fileName);\r\n    }\r\n  }\r\n\r\n  const renderImage = () => {\r\n    const { format, width } = props;\r\n    const f = imageUrl === 'default_product' ? 'png' : format;\r\n\r\n    return (\r\n      <div className=\"media__image\">\r\n        <Image publicId={imageUrl} format={f}>\r\n          <Transformation width={width} fetchFormat=\"auto\" crop=\"scale\" />\r\n        </Image>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const renderVideo = () => {\r\n    const { fileName, format } = props;\r\n    return (<Video publicId={fileName} format={format}></Video>);\r\n  }\r\n\r\n  const isVideo = props.format === 'mp4';\r\n  return (\r\n    <CloudinaryContext cloudName={config.cloudinary.cloudName}>\r\n      {isVideo && renderVideo()}\r\n      {!isVideo && renderImage()}\r\n    </CloudinaryContext>\r\n  );\r\n}\r\n\r\nexport default Media;\r\n","import config from './config';\r\nimport axios from 'axios';\r\n\r\nexport const existImage = publicId => (\r\n  axios.get(`${config.cloudinary.url}/${publicId}`)\r\n);\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\nimport { find, isEmpty } from 'lodash';\r\n\r\nimport Button from '../shared/Button';\r\nimport Loading from '../shared/Loading';\r\nimport Media from '../shared/Media';\r\nimport State from '../../redux/State';\r\nimport TextField from '../shared/TextField';\r\nimport WarningMessage from '../shared/WarningMessage';\r\nimport { WarningMessageType } from '../shared/types';\r\nimport { getProductFromProducts } from '../helpers/StuffHelper';\r\nimport { updateProductHook } from '../../redux/products/actions';\r\n\r\nimport './Product.scss';\r\n\r\nconst Product = (props: any) => {\r\n  const { hideOfferButton, product, showCost } = props;\r\n  const { id } = useParams();\r\n  const dispatch = useDispatch();\r\n  let categories = useSelector((state: State) => state.categories);\r\n  let subcategories = useSelector((state: State) => state.subcategories);\r\n  let products = useSelector((state: State) => state.products);\r\n  let user = useSelector((state: State) => state.user);\r\n  let [cost, setCost] = useState(0.0);\r\n  let [message, setMessage] = useState('');\r\n  let [type, setType] = useState(WarningMessageType.EMPTY);\r\n  let [category, setCategory] = useState<any>(null);\r\n  let [subcategory, setSubcategory] = useState<any>(null);\r\n  let [productRendered, setProductRendered] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n    if (!isEmpty(products) && !productRendered) {\r\n      let idP = id ? parseInt(id) : product ? product.id : NaN;\r\n      let pRendered = getProductFromProducts(idP, products);\r\n      setProductRendered(pRendered);\r\n    }\r\n\r\n    if (!isEmpty(products) && productRendered) {\r\n      let cat = find(categories, c => c.id === productRendered.category);\r\n      setCategory(cat);\r\n      let subcat = find(subcategories, s => s.id === productRendered.subcategory);\r\n      setSubcategory(subcat);\r\n    }\r\n  }, [categories, subcategories, productRendered, products, product, id]);\r\n\r\n  const updateCost = (clear: boolean = false) => {\r\n    const updatedCost = clear ? 0 : cost;\r\n    updateProductHook(user.id, productRendered?.id, updatedCost, dispatch, setMessage, setType)\r\n  }\r\n\r\n  const renderCost = () => {\r\n    if (product?.cost)\r\n      return (\r\n      <div className=\"product__cost\">\r\n        <div className=\"product__cost-value\">Cost ${productRendered?.cost}</div>\r\n        {!hideOfferButton && (<div className=\"product__cost-button\">\r\n            <Button text=\"Stop Offer\" onClick={() => updateCost(true)} />\r\n        </div>)}\r\n      </div>);\r\n    else {\r\n    return (\r\n      <div className=\"product__cost\">\r\n        <div className=\"product__cost-text\">Want to sell it? Just set a cost! (MAX $100)</div>\r\n        <div className=\"product__cost-elements\">\r\n          $<TextField type=\"number\" name=\"costTF\" value={cost.toString()}\r\n            min={0} max={100} onChange={(e: any) => setCost(e.target.value)} />\r\n          <Button text=\"Sell\" onClick={updateCost}/>\r\n        </div>\r\n      </div>);\r\n    }\r\n  }\r\n\r\n  if (!productRendered) return <Loading size=\"lg\" message=\"Loading product...\" />;\r\n\r\n  return (\r\n    <div className=\"product\">\r\n      <WarningMessage message={message} type={type} />\r\n      <h3>{ productRendered.name }</h3>\r\n      <hr />\r\n        <Media\r\n          fileName={productRendered.id}\r\n          category={productRendered.category}\r\n          subcategory={productRendered.subcategory}\r\n          isProduct=\"true\"\r\n          height=\"200\"\r\n          width=\"100\" />\r\n      <hr />\r\n      <div>Category: { category && category.name }</div>\r\n      <div>Subcategory: { subcategory && subcategory.name }</div>\r\n      {showCost && renderCost()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\n\r\nimport Button from '../shared/Button';\r\nimport Product from '../content/Product';\r\nimport WarningMessage from '../shared/WarningMessage';\r\nimport { getStuffiers } from '../../services/stuffier';\r\nimport { WarningMessageType } from '../shared/types';\r\n\r\nimport './Buy.scss';\r\n\r\nconst Buy = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const product = (location.state as any)[\"product\"];\r\n  const match = { params: { id: product.id } };\r\n\r\n  let [friend, setFriend] = useState({ first_name: '' });\r\n  let [message, setMessage] = useState('');\r\n  let [type, setType] = useState(WarningMessageType.EMPTY);\r\n\r\n  useEffect(() => {\r\n    if (!product || product === undefined) {\r\n      navigate('/');\r\n    }\r\n\r\n    getStuffiers([{ id: (location.state as any)[\"friend\"] }])\r\n      .then((res: any) => setFriend(res.data[0]));\r\n  });\r\n\r\n  const buy = () => {\r\n    setMessage('Buy');\r\n    setType(WarningMessageType.SUCCESSFUL);\r\n  }\r\n\r\n  if (!product) { navigate('/'); }\r\n\r\n  return (\r\n    <div className=\"buy\">\r\n      <WarningMessage message={message} type={type} />\r\n      <div className=\"buy__product\">\r\n        <h2>{friend?.first_name} Product</h2>\r\n        <hr />\r\n        <Product match={match} key={product.id} product={product} showCost={true} hideOfferButton={true} />\r\n      </div>\r\n      <Button type=\"submit\" onClick={() => buy()} text=\"Request Buy\" />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Buy;\r\n","import React from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { map } from 'lodash';\r\n\r\nimport State from '../../redux/State';\r\nimport Stuff from '../types/Stuff';\r\n\r\n/* Category ID never will have 5 digits\r\n   Subcategory ID will have 5 digits or more.\r\n*/\r\nconst CategoryPage = () => {\r\n  let products = useSelector((state: State) => state.products);\r\n  let categories = useSelector((state: State) => state.categories);\r\n  // let subcategories = useSelector((state: State) => state.subcategories);\r\n  // const location = useLocation();\r\n\r\n\r\n  let { id } = useParams();\r\n  let categoryId = id ? parseInt(id) : -1;\r\n  let category: any = categories.find(c => c.id === categoryId);\r\n\r\n  // console.log(location);\r\n  // let name = location.state[\"category\"] || location.state[\"subcategory\"] || '';\r\n  // let categoryId = id.length >= 5 ? parseInt(id[0]) : parseInt(id);\r\n\r\n  /*\r\n  // Subcategory Prep\r\n  if (id.length >= 5) {\r\n    categoryId = parseInt(id[0]);\r\n    name = subcategories.find((s: any) => s.id === parseInt(id))?.name;\r\n  }\r\n  */\r\n\r\n  const stuff: any = products[category.id];\r\n  const name = category.name;\r\n  return (\r\n    <div className=\"category-page\">\r\n      <h3>{name}</h3>\r\n      <hr />\r\n      {!products && <div>No products</div>}\r\n      <ul>\r\n        {map(stuff, (object: Stuff) => {\r\n          return (\r\n            <li key={object.id}><Link to={`/product/${object.id}`}>{object.name}</Link></li>\r\n          )\r\n        })}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CategoryPage;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Media from '../shared/Media';\r\nimport State from '../../redux/State';\r\nimport { FeedRowProps } from './types';\r\n\r\nimport './FeedRow.scss';\r\nimport Subcategory from '../types/Subcategory';\r\n\r\nconst FeedRow = (props: FeedRowProps) => {\r\n  let subcategories: Subcategory[] = useSelector((state: State) => state.subcategories);\r\n  const { feedPost } = props;\r\n\r\n  const getProductType = () => {\r\n    let subcategory = subcategories.find(s => s.id === feedPost.product.subcategory);\r\n    return subcategory ? subcategory.name : null;\r\n  }\r\n\r\n  const renderMessage = () => {\r\n    return (\r\n    <div className=\"feed-row__description\">\r\n      <span className=\"feed-row__name\">{feedPost.friend_firstName} {feedPost.friend_lastName} </span> added <b>{feedPost.product.name}</b> in {getProductType()}\r\n    </div>\r\n    );\r\n  }\r\n\r\n  const exchangeTo = { pathname: `/exchange`, state: { product: feedPost.product, friend: feedPost.friend_id } };\r\n  const loanTo = { pathname: `/loan`, state: { product: feedPost.product, friend: feedPost.friend_id } };\r\n  const buyTo = { pathname: `/buy`, state: { product: feedPost.product, friend: feedPost.friend_id } };\r\n\r\n  return (\r\n    <div className=\"feed-row\">\r\n      {renderMessage()}\r\n      <div className=\"feed-row__image\">\r\n        <Media\r\n          fileName={feedPost.product.id}\r\n          category={feedPost.product.category}\r\n          subcategory={feedPost.product.subcategory}\r\n          format=\"jpg\"\r\n          height=\"100\"\r\n          width=\"100\"\r\n          isProduct=\"true\"\r\n        />\r\n      </div>\r\n      <div className=\"feed-row__actions\">\r\n        <div className=\"feed-row__action feed-row__text\">Ask for:</div>\r\n        <div className=\"feed-row__action feed-row__link\">\r\n          <Link to={loanTo}>Borrow</Link>\r\n        </div>\r\n        <div className=\"feed-row__action feed-row__link\">\r\n          <Link to={exchangeTo}>Trade</Link>\r\n        </div>\r\n        {feedPost.product.cost &&\r\n          (<div className=\"feed-row__action feed-row__link\">\r\n            <Link to={buyTo}>Buy</Link>\r\n          </div>)}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FeedRow;\r\n","import { map } from 'lodash';\r\n\r\nexport function mapFriends(friends: any) {\r\n  return map(friends, friend => {\r\n    return { id: friend.id_friend };\r\n  });\r\n}\r\n\r\nexport function mapIds(collection: any) {\r\n  return map(collection, collection => {\r\n    return { id: collection.id_friend };\r\n  });\r\n}\r\n","import { makeStandardActionCreator } from '../action-helpers';\r\nimport { FRIENDS_FETCHED, FRIEND_PRODUCTS_FETCHED } from './constants';\r\n\r\nimport { getFriends, getStuffiers } from '../../services/stuffier';\r\nimport { getListStuff, getStuffiersList } from '../../services/stuff';\r\nimport { mapFriends } from '../../components/helpers/UserHelper';\r\nimport { getFriendProducts, mapStuff } from '../../components/helpers/StuffHelper';\r\n\r\nconst friendsFetched = makeStandardActionCreator(FRIENDS_FETCHED);\r\nexport const fetchFriends = (email) => dispatch => {\r\n  return getFriends(email)\r\n  .then(res => getStuffiers(mapFriends(res.data)))\r\n  .then(res => {\r\n    const friends = res.data || [];   // TODO: Make this call better\r\n    dispatch(friendsFetched(friends, email));\r\n    return Promise.resolve(friends);\r\n  });\r\n}\r\n\r\nexport const fetchFriendsHook = (email, sessionStorage, dispatch) => {\r\n  getFriends(email)\r\n    .then(res => getStuffiers(mapFriends(res.data)))\r\n    .then(res => {\r\n      const friends = res.data || [];   // TODO: Make this call better\r\n      sessionStorage.setItem('friends', JSON.stringify(friends));\r\n      dispatchFriendsFetched(friends, email, dispatch);\r\n    });\r\n}\r\n\r\nexport const dispatchFriendsFetched = (friends, email, dispatch) => {\r\n  dispatch(friendsFetched(friends, email));\r\n}\r\n\r\nconst friendProductsFetched = makeStandardActionCreator(FRIEND_PRODUCTS_FETCHED);\r\nexport const fetchFriendsProducts = (friends) => dispatch => {\r\n  let stuffiers_stuff = [];\r\n\r\n  return getStuffiersList(friends)\r\n  .then(res => {\r\n    stuffiers_stuff = res.data;\r\n    return getListStuff(mapStuff(res.data));\r\n  })\r\n  .then(res => {\r\n    const products = res.data;\r\n    const friendsFilled = getFriendProducts(friends, products, stuffiers_stuff);\r\n    dispatch(friendProductsFetched(friendsFilled))\r\n    return Promise.resolve(friendsFilled);\r\n  });\r\n}\r\n\r\nexport const fetchFriendsProductsHook = (friends, dispatch) => {\r\n  let stuffiers_stuff = [];\r\n  return getStuffiersList(friends)\r\n  .then(res => {\r\n    stuffiers_stuff = res.data;\r\n    return getListStuff(mapStuff(res.data));\r\n  })\r\n  .then(res => {\r\n    const products = res.data;\r\n    const friendsFilled = getFriendProducts(friends, products, stuffiers_stuff);\r\n    dispatch(friendProductsFetched(friendsFilled))\r\n    return Promise.resolve(friendsFilled);\r\n  });\r\n}\r\n","export const FRIENDS_FETCHED = 'USER::FRIENDS_FETCHED';\r\nexport const FRIEND_PRODUCTS_FETCHED = 'FRIENDS::PRODUCTS_FETCHED';\r\n","import { sortBy } from 'lodash';\r\n\r\nimport { makeStandardActionCreator } from '../action-helpers';\r\nimport { FEED_FETCHED } from './constants';\r\n// import { setFriendsProducts } from '../../services/feed';\r\n\r\nexport const generateFeed = friends => {\r\n  let feed = [];\r\n\r\n  friends.forEach(friend => {\r\n    // f.forEach(friend => {\r\n      if (friend.products) {\r\n        console.log(friend.products.length);\r\n        friend.products.forEach(product => {\r\n          console.log({ product });\r\n          feed.push({\r\n            friend_id: friend.id,\r\n            friend_firstName: friend.first_name || '',\r\n            friend_lastName: friend.last_name || '',\r\n            product,\r\n            date: product._created\r\n          });\r\n        });\r\n      }\r\n    // })\r\n  });\r\n\r\n  console.log({ feed });\r\n  return sortBy(feed, 'date');\r\n}\r\n\r\nconst feedFetched = makeStandardActionCreator(FEED_FETCHED);\r\nexport const fetchFeed = fullFriends => dispatch => {\r\n  let feed = generateFeed(fullFriends);\r\n  dispatch(feedFetched(feed));\r\n  return feed;\r\n}\r\n\r\nexport const fetchFeedHook = (friends, sessionStorage, dispatch) => {\r\n  let feed = generateFeed(friends);\r\n  sessionStorage.setItem('feed', JSON.stringify(feed));\r\n  dispatchFeedFetched(feed, dispatch);\r\n}\r\n\r\nexport const dispatchFeedFetched = (feed, dispatch) => {\r\n  dispatch(feedFetched(feed));\r\n}\r\n","export const FEED_FETCHED = 'FEED::FETCHED';\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { map } from 'lodash';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport FeedPost from '../types/FeedPost';\r\nimport FeedRow from './FeedRow';\r\nimport Loading from '../shared/Loading';\r\nimport State from '../../redux/State';\r\nimport User from '../types/User';\r\nimport { fetchFriendsProductsHook } from '../../redux/friends/actions';\r\nimport { dispatchFeedFetched, fetchFeedHook } from '../../redux/feed/actions';\r\nimport './Content.scss';\r\n\r\nconst getFeed = (friends: any, dispatch: any, sessionStorage: Storage, setIsLoading: Function) => {\r\n  if (sessionStorage.getItem('feed')) {\r\n    let feed = JSON.parse(sessionStorage.getItem('feed') || '');\r\n    dispatchFeedFetched(feed, dispatch);\r\n  } else {\r\n    fetchFriendsProductsHook(friends, dispatch)\r\n      .then((fullFriends: User[]) => fetchFeedHook(fullFriends, sessionStorage, dispatch))\r\n      .catch(() => console.log('Error Feed Fetched'))\r\n      .finally(() => setIsLoading(false));\r\n  }\r\n}\r\n\r\nconst Content = () => {\r\n  const { t } = useTranslation();\r\n  const dispatch = useDispatch();\r\n  const feed = useSelector((state: State) => state.feed);\r\n  let [isLoading, setIsLoading] = useState(true);\r\n  let friends = useSelector((state: State) => state.friends);\r\n  const stableGetFeed = useCallback(getFeed, []);\r\n\r\n  useEffect(() => {\r\n    let sessionStorage = window.sessionStorage;\r\n\r\n    if (feed && feed.length) {\r\n      setIsLoading(false);\r\n    } else {\r\n      if (friends && friends.length) {\r\n        stableGetFeed(friends, dispatch, sessionStorage, setIsLoading);\r\n      }\r\n    }\r\n  }, [stableGetFeed, feed, friends, dispatch]);\r\n\r\n  if (isLoading) return (\r\n    <div className=\"content__loading\">\r\n      <Loading size=\"xl\" message={t(\"Loading-Feed\")} />\r\n    </div>\r\n  );\r\n\r\n  if (!friends.length) return <div>{t('No Friends')}</div>\r\n  if (!feed || !feed.length) return <div>{t('No Feed')}</div>\r\n\r\n  return (\r\n    <div className=\"content\">\r\n      <div className=\"content__info\">\r\n        <div className=\"content__rows\">\r\n          {map(feed, (feedPost: FeedPost, index) => (<FeedRow key={index} feedPost={feedPost} />))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Content;\r\n","export const barChartData = [\r\n  { name: 'Page A', uv: 4000, pv: 2400, amt: 2400 },\r\n  { name: 'Page B', uv: 3000, pv: 1398, amt: 2210 },\r\n  { name: 'Page C', uv: 2000, pv: 9800, amt: 2290 },\r\n  { name: 'Page D', uv: 2780, pv: 3908, amt: 2000 },\r\n  { name: 'Page E', uv: 1890, pv: 4800, amt: 2181 },\r\n  { name: 'Page F', uv: 2390, pv: 3800, amt: 2500 },\r\n  { name: 'Page G', uv: 3490, pv: 4300, amt: 2100 }\r\n];\r\n\r\nexport const treemapChartData = [\r\n  {\r\n    name: 'axis',\r\n    children: [\r\n      { name: 'Axes', size: 1302 },\r\n      { name: 'Axis', size: 24593 },\r\n      { name: 'AxisGridLine', size: 652 },\r\n      { name: 'AxisLabel', size: 636 },\r\n      { name: 'CartesianAxes', size: 6703 },\r\n    ],\r\n  },\r\n  {\r\n    name: 'controls',\r\n    children: [\r\n      { name: 'AnchorControl', size: 2138 },\r\n      { name: 'ClickControl', size: 3824 },\r\n      { name: 'Control', size: 1353 },\r\n      { name: 'ControlList', size: 4665 },\r\n      { name: 'DragControl', size: 2649 },\r\n      { name: 'ExpandControl', size: 2832 },\r\n      { name: 'HoverControl', size: 4896 },\r\n      { name: 'IControl', size: 763 },\r\n      { name: 'PanZoomControl', size: 5222 },\r\n      { name: 'SelectionControl', size: 7862 },\r\n      { name: 'TooltipControl', size: 8435 },\r\n    ],\r\n  },\r\n  {\r\n    name: 'data',\r\n    children: [\r\n      { name: 'Data', size: 20544 },\r\n      { name: 'DataList', size: 19788 },\r\n      { name: 'DataSprite', size: 10349 },\r\n      { name: 'EdgeSprite', size: 3301 },\r\n      { name: 'NodeSprite', size: 19382 },\r\n      {\r\n        name: 'render',\r\n        children: [\r\n          { name: 'ArrowType', size: 698 },\r\n          { name: 'EdgeRenderer', size: 5569 },\r\n          { name: 'IRenderer', size: 353 },\r\n          { name: 'ShapeRenderer', size: 2247 },\r\n        ],\r\n      },\r\n      { name: 'ScaleBinding', size: 11275 },\r\n      { name: 'Tree', size: 7147 },\r\n      { name: 'TreeBuilder', size: 9930 },\r\n    ],\r\n  },\r\n  {\r\n    name: 'events',\r\n    children: [\r\n      { name: 'DataEvent', size: 7313 },\r\n      { name: 'SelectionEvent', size: 6880 },\r\n      { name: 'TooltipEvent', size: 3701 },\r\n      { name: 'VisualizationEvent', size: 2117 },\r\n    ],\r\n  },\r\n  {\r\n    name: 'legend',\r\n    children: [\r\n      { name: 'Legend', size: 20859 },\r\n      { name: 'LegendItem', size: 4614 },\r\n      { name: 'LegendRange', size: 10530 },\r\n    ],\r\n  },\r\n  {\r\n    name: 'operator',\r\n    children: [\r\n      {\r\n        name: 'distortion',\r\n        children: [\r\n          { name: 'BifocalDistortion', size: 4461 },\r\n          { name: 'Distortion', size: 6314 },\r\n          { name: 'FisheyeDistortion', size: 3444 },\r\n        ],\r\n      },\r\n      {\r\n        name: 'encoder',\r\n        children: [\r\n          { name: 'ColorEncoder', size: 3179 },\r\n          { name: 'Encoder', size: 4060 },\r\n          { name: 'PropertyEncoder', size: 4138 },\r\n          { name: 'ShapeEncoder', size: 1690 },\r\n          { name: 'SizeEncoder', size: 1830 },\r\n        ],\r\n      },\r\n      {\r\n        name: 'filter',\r\n        children: [\r\n          { name: 'FisheyeTreeFilter', size: 5219 },\r\n          { name: 'GraphDistanceFilter', size: 3165 },\r\n          { name: 'VisibilityFilter', size: 3509 },\r\n        ],\r\n      },\r\n      { name: 'IOperator', size: 1286 },\r\n      {\r\n        name: 'label',\r\n        children: [\r\n          { name: 'Labeler', size: 9956 },\r\n          { name: 'RadialLabeler', size: 3899 },\r\n          { name: 'StackedAreaLabeler', size: 3202 },\r\n        ],\r\n      },\r\n      {\r\n        name: 'layout',\r\n        children: [\r\n          { name: 'AxisLayout', size: 6725 },\r\n          { name: 'BundledEdgeRouter', size: 3727 },\r\n          { name: 'CircleLayout', size: 9317 },\r\n          { name: 'CirclePackingLayout', size: 12003 },\r\n          { name: 'DendrogramLayout', size: 4853 },\r\n          { name: 'ForceDirectedLayout', size: 8411 },\r\n          { name: 'IcicleTreeLayout', size: 4864 },\r\n          { name: 'IndentedTreeLayout', size: 3174 },\r\n          { name: 'Layout', size: 7881 },\r\n          { name: 'NodeLinkTreeLayout', size: 12870 },\r\n          { name: 'PieLayout', size: 2728 },\r\n          { name: 'RadialTreeLayout', size: 12348 },\r\n          { name: 'RandomLayout', size: 870 },\r\n          { name: 'StackedAreaLayout', size: 9121 },\r\n          { name: 'TreeMapLayout', size: 9191 },\r\n        ],\r\n      },\r\n      { name: 'Operator', size: 2490 },\r\n      { name: 'OperatorList', size: 5248 },\r\n      { name: 'OperatorSequence', size: 4190 },\r\n      { name: 'OperatorSwitch', size: 2581 },\r\n      { name: 'SortOperator', size: 2023 },\r\n    ],\r\n  }\r\n];\r\n\r\nexport const pieChartData01 = [\r\n  { name: 'Group A', value: 400 },\r\n  { name: 'Group B', value: 300 },\r\n  { name: 'Group C', value: 300 },\r\n  { name: 'Group D', value: 200 }\r\n];\r\n\r\nexport const pieChartData02 = [\r\n  { name: 'A1', value: 100 },\r\n  { name: 'A2', value: 300 },\r\n  { name: 'B1', value: 100 },\r\n  { name: 'B2', value: 80 },\r\n  { name: 'B3', value: 40 },\r\n  { name: 'B4', value: 30 },\r\n  { name: 'B5', value: 50 },\r\n  { name: 'C1', value: 100 },\r\n  { name: 'C2', value: 200 },\r\n  { name: 'D1', value: 150 },\r\n  { name: 'D2', value: 50 }\r\n];\r\n\r\nexport const radialChartData = [\r\n  { name: '18-24', uv: 31.47, pv: 2400, fill: '#8884d8' },\r\n  { name: '25-29', uv: 26.69, pv: 4567, fill: '#83a6ed' },\r\n  { name: '30-34', uv: 15.69, pv: 1398, fill: '#8dd1e1' },\r\n  { name: '35-39', uv: 8.22, pv: 9800, fill: '#82ca9d' },\r\n  { name: '40-49', uv: 8.63, pv: 3908, fill: '#a4de6c' },\r\n  { name: '50+', uv: 2.63, pv: 4800, fill: '#d0ed57' },\r\n  { name: 'unknow', uv: 6.67, pv: 4800, fill: '#ffc658' }\r\n];\r\n","import React from 'react';\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, LineChart, Line } from 'recharts';\r\nimport { AreaChart, Area } from 'recharts';\r\nimport { Treemap } from 'recharts';\r\nimport { PieChart, Pie } from 'recharts';\r\nimport { ScatterChart, Scatter } from 'recharts';\r\nimport { RadialBarChart, RadialBar } from 'recharts';\r\nimport { barChartData, treemapChartData, pieChartData01, pieChartData02, radialChartData } from '../../services/charts';\r\n\r\nconst Charts = () => {\r\n  return (\r\n    <div>\r\n      <BarChart width={600} height={300} data={barChartData}\r\n        margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\r\n        <XAxis dataKey=\"name\" />\r\n        <YAxis />\r\n        <CartesianGrid strokeDasharray=\"3 3\" />\r\n        <Tooltip />\r\n        <Legend />\r\n        <Bar dataKey=\"pv\" fill=\"#8884d8\" />\r\n        <Bar dataKey=\"uv\" fill=\"#82ca9d\" />\r\n      </BarChart>\r\n\r\n      <LineChart width={600} height={300} data={barChartData}>\r\n        <XAxis dataKey=\"name\" padding={{ left: 30, right: 30 }} />\r\n        <YAxis />\r\n        <CartesianGrid strokeDasharray=\"3 3\" />\r\n        <Tooltip />\r\n        <Legend />\r\n        <Line type=\"monotone\" dataKey=\"pv\" stroke=\"#8884d8\" activeDot={{ r: 8 }} />\r\n        <Line type=\"monotone\" dataKey=\"uv\" stroke=\"#82ca9d\" />\r\n      </LineChart>\r\n\r\n      <AreaChart width={730} height={250} data={barChartData}\r\n        margin={{ top: 10, right: 30, left: 0, bottom: 0 }}>\r\n        <defs>\r\n          <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n            <stop offset=\"5%\" stopColor=\"#8884d8\" stopOpacity={0.8} />\r\n            <stop offset=\"95%\" stopColor=\"#8884d8\" stopOpacity={0} />\r\n          </linearGradient>\r\n          <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n            <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8} />\r\n            <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0} />\r\n          </linearGradient>\r\n        </defs>\r\n        <XAxis dataKey=\"name\" />\r\n        <YAxis />\r\n        <CartesianGrid strokeDasharray=\"3 3\" />\r\n        <Tooltip />\r\n        <Area type=\"monotone\" dataKey=\"uv\" stroke=\"#8884d8\" fillOpacity={1} fill=\"url(#colorUv)\" />\r\n        <Area type=\"monotone\" dataKey=\"pv\" stroke=\"#82ca9d\" fillOpacity={1} fill=\"url(#colorPv)\" />\r\n      </AreaChart>\r\n\r\n      <Treemap\r\n        width={730}\r\n        height={250}\r\n        data={treemapChartData}\r\n        dataKey=\"size\"\r\n        aspectRatio={4 / 3}\r\n        stroke=\"#fff\"\r\n        fill=\"#8884d8\"\r\n      />\r\n\r\n      <PieChart width={800} height={400}>\r\n        <Pie dataKey=\"value\" data={pieChartData01} cx={200} cy={200} outerRadius={60} fill=\"#8884d8\" />\r\n        <Pie dataKey=\"value\" data={pieChartData02} cx={200} cy={200} innerRadius={70} outerRadius={90} fill=\"#82ca9d\" label />\r\n      </PieChart>\r\n\r\n      <ScatterChart width={730} height={250}\r\n        margin={{ top: 20, right: 20, bottom: 10, left: 10 }}>\r\n        <CartesianGrid strokeDasharray=\"3 3\" />\r\n        <XAxis dataKey=\"value\" name=\"stature\" unit=\"cm\" />\r\n        <YAxis dataKey=\"value\" name=\"weight\" unit=\"cm\" />\r\n        <Tooltip cursor={{ strokeDasharray: '3 3' }} />\r\n        <Legend />\r\n        <Scatter name=\"Data01\" data={pieChartData01} fill=\"#8884d8\" />\r\n        <Scatter name=\"Data02\" data={pieChartData02} fill=\"#82ca9d\" />\r\n      </ScatterChart>\r\n\r\n      <RadialBarChart width={730} height={250} innerRadius=\"10%\" outerRadius=\"80%\" data={radialChartData} startAngle={180} endAngle={0}>\r\n        <RadialBar angleAxisId={15} label={{ fill: '#666', position: 'insideStart' }} background dataKey='uv' />\r\n        <Legend iconSize={10} width={120} height={140} layout='vertical' verticalAlign='middle' align=\"right\" />\r\n        <Tooltip />\r\n      </RadialBarChart>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Charts;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Loading from '../shared/Loading';\r\nimport TextField from '../shared/TextField';\r\nimport { getSearchResults, getProductResults } from '../../services/stuff';\r\nimport './SearchBar.scss';\r\n\r\nconst SearchBar = (props: any) => {\r\n  let source: any = null;\r\n\r\n  const searchBarRef = useRef<HTMLDivElement>(null);\r\n\r\n  let [isLoading, setIsLoading] = useState(false);\r\n  let [isOpen, setIsOpen] = useState(false);\r\n  let [searchText, setSearchText] = useState('');;\r\n  let [results, setResults] = useState([]);\r\n\r\n  useEffect(() => {\r\n    // if (searchBarRef.current) {\r\n    //   console.log(searchBarRef.current);\r\n    // }\r\n    document.addEventListener('click', handleClickOutside, true);\r\n    return () => {\r\n      document.removeEventListener('click', handleClickOutside, true);\r\n    };\r\n  });\r\n\r\n\r\n  const handleClickOutside = (event: any) => {\r\n    const domNode = ReactDOM.findDOMNode(searchBarRef.current);\r\n\r\n    if (!domNode || !domNode.contains(event.target)) {\r\n      setSearchText('');\r\n      setIsOpen(false);\r\n    }\r\n  }\r\n\r\n  const fetchResults = (searchText: string) => {\r\n    const { products, selectProduct } = props;\r\n\r\n    source && source.cancel('Cancel pending requests.');\r\n    source = axios.CancelToken.source();\r\n    setSearchText(searchText);\r\n    setIsOpen(true);\r\n    setIsLoading(true);\r\n\r\n    if (searchText) {\r\n      if (selectProduct) {\r\n        setResults(getProductResults(searchText, products));\r\n        setIsOpen(true);\r\n        setIsLoading(false);\r\n      } else {\r\n        getSearchResults(searchText, products, source.token).then((results: any) => {\r\n          if (results.length) {\r\n            setResults(results);\r\n            setIsOpen(true);\r\n            setIsLoading(false);\r\n          } else {\r\n            setIsOpen(false);\r\n            setIsLoading(false);\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      setIsOpen(false);\r\n      setIsLoading(false);\r\n    }\r\n  }\r\n\r\n  const getLinkTo = (result: any) => {\r\n    return { pathname: `/${result.type.toLowerCase()}/${result.id}`, [result.type.toLowerCase()]: result.name };\r\n  }\r\n\r\n  const renderResults = () => {\r\n    const { selectProduct } = props;\r\n\r\n    if (results.length) {\r\n      return (\r\n        <div className=\"search__results\">\r\n          {results.map((result: any, index: number) => {\r\n            return (\r\n              <div className=\"search__result\" key={index}>\r\n                {!selectProduct &&\r\n                  <Link key={index} className=\"search__result-link\" to={getLinkTo(result)}>\r\n                    {renderResultName(result)}\r\n                  </Link>\r\n                }\r\n                {selectProduct &&\r\n                  <button key={index} onClick={event => event && selectProduct(result)}>\r\n                    {renderResultName(result)}\r\n                  </button>\r\n                }\r\n              </div>);\r\n          })}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  const renderResultName = (result: any) => {\r\n    const type = result.type ? result.type[0] : 'P';\r\n\r\n    return (\r\n      <div className=\"search__result-info\">\r\n        <div className=\"search__result-name\">{result.name}</div>\r\n        <div className={`search__result-type search__result-${type}`}>| {type}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const isOpenCss = isOpen ? 'dropdown--is-open' : '';\r\n\r\n  return (\r\n    <div className=\"search-bar\" ref={searchBarRef}>\r\n      <div className=\"search-bar__form\">\r\n        <TextField\r\n          name=\"search\"\r\n          type=\"input\"\r\n          placeholder=\"Find stuff...\"\r\n          onChange={(e: any) => fetchResults(e.target.value)}\r\n          value={searchText}\r\n        >\r\n        </TextField>\r\n        <div className=\"search-bar__button\">\r\n          <i className=\"fas fa-search\"></i>\r\n        </div>\r\n      </div>\r\n      <div className=\"search-bar__content-container\">\r\n        <div className={`search-bar__content ${isOpenCss}`}>\r\n          {isLoading && <Loading size=\"md\"></Loading>}\r\n          {!isLoading && renderResults()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SearchBar;\r\n","import axios from 'axios';\r\nimport routes from './routes';\r\nimport config from './config';\r\n\r\nexport const addExchangeRequest = (id_stuffier, id_stuff, id_friend, id_friend_stuff) => (\r\n  axios.post(routes.exchange.request(), { id_stuffier, id_friend, id_stuff, id_friend_stuff }, { headers: config.headers })\r\n);\r\n\r\nexport const getExchangeRequests = id_stuffier => (\r\n  axios.get(routes.exchange.list(id_stuffier), { headers: config.headers })\r\n);\r\n\r\nexport const deleteExchangeRequest = _id => (\r\n  axios.delete(routes.exchange.deleteRequest(_id), { headers: config.headers })\r\n);\r\n","import { makeStandardActionCreator } from '../action-helpers';\r\nimport { EXCHANGES_FETCHED, EXCHANGE_REQUESTED, EXCHANGE_DELETED } from './constants';\r\nimport { addExchangeRequest, getExchangeRequests, deleteExchangeRequest } from '../../services/exchange';\r\nimport { WarningMessageType } from '../../components/shared/types';\r\n\r\nconst requestExchange = makeStandardActionCreator(EXCHANGE_REQUESTED);\r\nexport const exchangeRequest = (idOwner, idStuff, idRequestor, idRequestorStuff) => dispatch => {\r\n  return addExchangeRequest(idOwner, idStuff, idRequestor, idRequestorStuff)\r\n  .then(res => {\r\n    dispatch(requestExchange(res.data, idOwner));\r\n    Promise.resolve(res.data);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n\r\nexport const requestExchangeHook = (idOwner, idStuff, idRequestor, idRequestorStuff, setMessage, setType, navigate) => dispatch => {\r\n  return addExchangeRequest(idOwner, idStuff, idRequestor, idRequestorStuff)\r\n  .then(res => {\r\n    dispatch(requestExchange(res.data, idOwner));\r\n    setMessage('Exchange request successfully');\r\n    setType(WarningMessageType.SUCCESSFUL);\r\n  })\r\n  .catch(() => {\r\n    setMessage('Exchange request failed');\r\n    setType(WarningMessageType.SUCCESSFUL);\r\n  })\r\n  .finally(() => navigate('/'));;\r\n}\r\n\r\nconst requestExchanges = makeStandardActionCreator(EXCHANGES_FETCHED);\r\nexport const fetchExchangeRequests = userId => dispatch => {\r\n  return getExchangeRequests(userId)\r\n  .then(res => {\r\n    dispatch(requestExchanges(res.data, userId));\r\n    Promise.resolve(res.data);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n\r\nexport const fetchExchangeRequestsHook = (userId, dispatch) => {\r\n  getExchangeRequests(userId).then(res => {\r\n    dispatch(requestExchanges(res.data, userId));\r\n  });\r\n}\r\n\r\nconst requestDelete = makeStandardActionCreator(EXCHANGE_DELETED);\r\nexport const deleteRequest = _id => dispatch => {\r\n  return deleteExchangeRequest(_id)\r\n  .then(res => {\r\n    const result = res.data.result[0];\r\n    dispatch(requestDelete(result))\r\n    Promise.resolve(result);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n\r\nexport const deleteRequestHook = (_id, dispatch, setMessage, setType) => {\r\n  return deleteExchangeRequest(_id)\r\n  .then(res => {\r\n    const result = res.data.result[0];\r\n    dispatch(requestDelete(result))\r\n    setMessage(`Exchange request deleted`);\r\n    setType(WarningMessageType.SUCCESSFUL);\r\n  })\r\n  .catch(() => {\r\n    setMessage(`Exchange request couldn't be deleted`);\r\n    setType(WarningMessageType.ERROR);\r\n  });\r\n}\r\n","export const EXCHANGE_REQUESTED = 'EXCHANGE::REQUESTED';\r\nexport const EXCHANGES_FETCHED = 'EXCHANGES::FETCHED';\r\nexport const EXCHANGE_DELETED = 'EXCHANGE::DELETED';\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { get, isEmpty } from 'lodash';\r\n\r\nimport Button from '../shared/Button';\r\nimport Category from '../types/Category';\r\nimport Media from '../shared/Media';\r\nimport Product from '../types/Product';\r\nimport State from '../../redux/State';\r\nimport Subcategory from '../types/Subcategory';\r\nimport SearchBar from '../shared/SearchBar';\r\nimport WarningMessage from '../shared/WarningMessage';\r\nimport { WarningMessageType } from '../shared/types';\r\nimport { requestExchangeHook } from '../../redux/exchange-requests/actions';\r\nimport { getProductsList } from '../helpers/StuffHelper';\r\nimport { getStuffiers } from '../../services/stuffier';\r\n\r\nimport './Exchange.scss';\r\n\r\nconst Exchange = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const dispatch = useDispatch();\r\n\r\n  let categories = useSelector((state: State) => state.categories);\r\n  let products = useSelector((state: State) => state.products);\r\n  let subcategories = useSelector((state: State) => state.subcategories);\r\n  let user = useSelector((state: State) => state.user);\r\n  let [ userProducts, setUserProducts ] = useState<any>([]);\r\n  let [ selectedProduct, setSelectedProduct ] = useState<Product>({});\r\n  let [ message, setMessage ] = useState('');\r\n  let [ friend, setFriend ] = useState({ first_name: ''});\r\n  let [ type, setType ] = useState(WarningMessageType.EMPTY);\r\n\r\n  const product: Product = (location.state as any)[\"product\"];\r\n\r\n\r\n  useEffect(() => {\r\n    if (!product || product === undefined) {\r\n      navigate('/');\r\n    }\r\n\r\n    const uProducts = getProductsList(products)\r\n      .filter(p => p.category === product.category || p.subcategory === product.subcategory);\r\n\r\n    setUserProducts(uProducts);\r\n\r\n    getStuffiers([{ id: (location.state as any)[\"friend\"] }])\r\n    .then((res: any) => setFriend(res.data[0]));\r\n  }, [userProducts, location.state, navigate, product, products]);\r\n\r\n  const requestExchange = () => {\r\n    const idOwner = (location.state as any)[\"friend\"];\r\n    console.log('This is to execute request exchange');\r\n\r\n    dispatch(\r\n      requestExchangeHook(idOwner, product.id, user.id, get(selectedProduct, 'id'),\r\n                          setMessage, setType, navigate)\r\n    );\r\n  }\r\n\r\n  const selectProduct = (product: Product) => {\r\n    setSelectedProduct(product);\r\n  }\r\n\r\n  const renderProduct = (product: Product) => {\r\n    const category: Category = categories.filter(c => c.id === product.category)[0];\r\n    const subcategory: Subcategory = subcategories.filter(s => s.id === product.subcategory)[0];\r\n\r\n    return (\r\n      <div className=\"exchange__product\">\r\n        <Media\r\n          fileName={product.id}\r\n          category={product.category}\r\n          subcategory={product.subcategory}\r\n          format=\"jpg\"\r\n          height=\"100\"\r\n          width=\"100\"\r\n          isProduct=\"true\"\r\n        />\r\n        <div className=\"exchange__product-info\">\r\n          <div>{product.name}</div>\r\n          <div>{category.name}</div>\r\n          <div>{subcategory.name}</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!userProducts.length) return <div>No products to exchange under same category</div>;\r\n\r\n  if (!product) {\r\n    navigate('/');\r\n  }\r\n\r\n  return (\r\n    <div className=\"exchange\">\r\n      <WarningMessage message={message} type={type} />\r\n      <div className=\"exchange__header\">\r\n        <SearchBar products={userProducts} selectProduct={(p: Product) => selectProduct(p)} />\r\n      </div>\r\n      { !isEmpty(selectedProduct) &&\r\n        <div className=\"exchange__content\">\r\n          <div className=\"exchange__compare\">\r\n            <div className=\"exchange__compare-info\">\r\n              <h4>My Product</h4>\r\n              {renderProduct(selectedProduct)}\r\n            </div>\r\n            <div className=\"exchange__line\"></div>\r\n            <div className=\"exchange__compare-info\">\r\n              <h4>{friend?.first_name} Product</h4>\r\n              {renderProduct(product)}\r\n            </div>\r\n          </div>\r\n          <Button\r\n            type=\"submit\"\r\n            onClick={requestExchange}\r\n            text=\"Request Exchange\">\r\n          </Button>\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Exchange;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport Button from '../shared/Button';\r\nimport State from '../../redux/State';\r\nimport TextField from '../shared/TextField';\r\nimport User from '../types/User';\r\nimport WarningMessage from '../shared/WarningMessage';\r\nimport { addFriend, deleteRequest, getStuffiers, requestToBeFriend } from '../../services/stuffier';\r\nimport { mapIds } from '../helpers/UserHelper';\r\nimport { WarningMessageType } from '../shared/types';\r\n\r\nimport './Friends.scss';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst Friends = () => {\r\n  // let textFieldRef = React.createRef<typeof TextField>();\r\n  const { t } = useTranslation();\r\n\r\n  let user = useSelector((state: State) => state.user);\r\n  let friends = useSelector((state: State) => state.friends);\r\n  let friendsRequests = useSelector((state: State) => state.friendsRequests);\r\n  let [requests, setRequests] = useState([]);\r\n  let [emailToRequest, setEmailToRequest] = useState('');\r\n  let [message, setMessage] = useState('');\r\n  let [executeStatus, setExecuteStatus] = useState(WarningMessageType.EMPTY);\r\n\r\n  useEffect(() => {\r\n    if (friendsRequests.length > 0) {\r\n      getStuffiers(mapIds(friendsRequests))\r\n      .then((res: any) => setRequests(res.data));\r\n    }\r\n  });\r\n\r\n  const executeRequest = (friend: User, isAccepted = false) => {\r\n    let promises = [deleteRequest(user.email, friend.id)];\r\n    isAccepted && promises.push(addFriend(user.email, friend.id));\r\n\r\n    Promise.all(promises)\r\n    .then((values: any) => {\r\n      !isAccepted && setExecuteStatus(WarningMessageType.WARNING);\r\n      console.log(values[0].data);\r\n      isAccepted && setExecuteStatus(WarningMessageType.SUCCESSFUL);\r\n      isAccepted && console.log(values[1].data);\r\n    })\r\n    .catch(() => setExecuteStatus(WarningMessageType.ERROR));\r\n  }\r\n\r\n  const renderRequests = () => {\r\n    return (\r\n      <div className=\"friends__requests\">\r\n        <hr />\r\n        <h3 className=\"friends__title\">\r\n          <div>Requests</div>\r\n          <div className=\"friends__warning\">{requests.length}</div>\r\n        </h3>\r\n        <ul>\r\n          {requests.map((friend: User, index: number) => {\r\n            return (\r\n              <li className=\"friends__request\" key={index}>\r\n                <div className=\"friends__request-text\">\r\n                  {friend.first_name} {friend.last_name} ({friend.email})\r\n                </div>\r\n                <div className=\"friends__request-button\">\r\n                  <Button onClick={() => executeRequest(friend, true)} text=\"Accept\"></Button>\r\n                </div>\r\n                <div className=\"friends__request-button\">\r\n                  <Button onClick={() => executeRequest(friend)} text=\"Reject\"></Button>\r\n                </div>\r\n              </li>\r\n            )}\r\n          )}\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const handleRequest = () => {\r\n    requestToBeFriend(emailToRequest, user.id)\r\n    .then(() => {\r\n      setMessage('Request sent succesfully');\r\n      setEmailToRequest('');\r\n    })\r\n    .catch(() => {\r\n      setMessage('Request couldnt be sent');\r\n      setEmailToRequest('');\r\n    });\r\n  }\r\n\r\n  const getMessage = () => {\r\n    const message =\r\n      executeStatus === WarningMessageType.ERROR ? 'was not added' :\r\n      executeStatus === WarningMessageType.WARNING ? 'was rejected!' :\r\n      executeStatus === WarningMessageType.SUCCESSFUL ? 'was accepted!' : null;\r\n\r\n    if (!message) return '';\r\n\r\n    return `Friend ${emailToRequest} ${message}`;\r\n  }\r\n\r\n  return (\r\n    <div className=\"friends\">\r\n      <h2 className=\"friends__title\">{t('Friends-Title', { first_name: user.first_name })}</h2>\r\n      <WarningMessage message={getMessage()} type={executeStatus}/>\r\n      <ul>\r\n        {friends.map((friend: any) => (<li key={friend.id}>{friend.first_name} {friend.last_name} - {friend.email}</li>))}\r\n      </ul>\r\n      {requests.length > 0 && renderRequests()}\r\n      <hr />\r\n      <div>\r\n        <h3 className=\"friends__title\">{t('Add-Friend')}</h3>\r\n        <div className=\"friends__form\">\r\n          <TextField\r\n            placeholder=\"Friend Email\"\r\n            type=\"text\"\r\n            name=\"friend_email\"\r\n            value={emailToRequest}\r\n            onChange={(e: any) => setEmailToRequest(e.target.value)}\r\n          />\r\n          <div className=\"friends__button\">\r\n            <Button text=\"Request\" onClick={() => handleRequest()}></Button>\r\n          </div>\r\n        </div>\r\n        {message && (<div className=\"friends__message\">{message}</div>)}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Friends;\r\n","import axios from 'axios';\r\nimport routes from './routes';\r\nimport config from './config';\r\n\r\nexport const addLoanRequest = (id_stuffier, id_stuff, id_friend) => (\r\n  axios.post(routes.loan.request(), { id_stuffier, id_friend, id_stuff }, { headers: config.headers })\r\n);\r\n\r\nexport const getLoanRequests = id_stuffier => (\r\n  axios.get(routes.loan.list(id_stuffier), { headers: config.headers })\r\n);\r\n\r\nexport const deleteLoanRequest = _id => (\r\n  axios.delete(routes.loan.deleteRequest(_id), { headers: config.headers })\r\n);\r\n","import { makeStandardActionCreator } from '../action-helpers';\r\nimport { LOANS_FETCHED, LOAN_REQUESTED, LOAN_DELETED } from './constants';\r\nimport { addLoanRequest, getLoanRequests, deleteLoanRequest } from '../../services/loan';\r\nimport { WarningMessageType } from '../../components/shared/types';\r\n\r\nconst requestLoan = makeStandardActionCreator(LOAN_REQUESTED);\r\nexport const loanRequest = (idOwner, idStuff, idRequestor) => dispatch => {\r\n  return addLoanRequest(idOwner, idStuff, idRequestor)\r\n  .then(res => {\r\n    dispatch(requestLoan(res.data, idOwner));\r\n    Promise.resolve(res.data);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n\r\nexport const loanRequestHook = (idOwner, idStuff, idRequestor, setMessage, setType) => dispatch => {\r\n  return addLoanRequest(idOwner, idStuff, idRequestor)\r\n  .then(res => {\r\n    dispatch(requestLoan(res.data, idOwner));\r\n    setMessage('Loan request successfully');\r\n    setType(WarningMessageType.SUCCESSFUL);\r\n  })\r\n  .catch(() => {\r\n    setMessage('Loan request failed');\r\n    setType(WarningMessageType.FAILURE);\r\n  });\r\n}\r\n\r\n\r\nconst fetchLoans = makeStandardActionCreator(LOANS_FETCHED);\r\nexport const fetchLoanRequests = userId => dispatch => {\r\n  return getLoanRequests(userId)\r\n  .then(res => {\r\n    dispatch(fetchLoans(res.data, userId));\r\n    Promise.resolve(res.data);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n\r\nexport const fetchLoanRequestsHook = (userId, dispatch) => {\r\n  getLoanRequests(userId).then(res => {\r\n    dispatch(fetchLoans(res.data, userId));\r\n  });\r\n}\r\n\r\nconst requestDeleteLoan = makeStandardActionCreator(LOAN_DELETED);\r\nexport const deleteRequestLoan = _id => dispatch => {\r\n  return deleteLoanRequest(_id)\r\n  .then(res => {\r\n    const result = res.data.result[0];\r\n    dispatch(requestDeleteLoan(result))\r\n    Promise.resolve(result);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n\r\nexport const deleteRequestLoanHook = (_id, dispatch, setMessage, setType) => {\r\n  return deleteLoanRequest(_id)\r\n  .then(res => {\r\n    const result = res.data.result[0];\r\n    dispatch(requestDeleteLoan(result))\r\n    setMessage(\"Loan request deleted\");\r\n    setType(WarningMessageType.SUCCESSFUL);\r\n  })\r\n  .catch(() => {\r\n    setMessage(`Loan request couldn't be deleted`);\r\n    setType(WarningMessageType.ERROR);\r\n  });\r\n}\r\n","export const LOAN_REQUESTED = 'LOAN::REQUESTED';\r\nexport const LOANS_FETCHED = 'LOANS::FETCHED';\r\nexport const LOAN_DELETED = 'LOAN::DELETED';\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Button from '../shared/Button';\r\nimport Product from '../content/Product';\r\nimport State from '../../redux/State';\r\nimport WarningMessage from '../shared/WarningMessage';\r\nimport { WarningMessageType } from '../shared/types';\r\nimport { getStuffiers } from '../../services/stuffier';\r\nimport { loanRequestHook } from '../../redux/loan-requests/actions';\r\n\r\nimport './Loan.scss';\r\n\r\nconst Loan = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const dispatch = useDispatch();\r\n\r\n  let [ friend, setFriend ] = useState({ first_name: ''});\r\n  let [ message, setMessage ] = useState('');\r\n  let [ type, setType ] = useState(WarningMessageType.EMPTY);\r\n\r\n  let user = useSelector((state: State) => state.user);\r\n  const product = (location.state as any)[\"product\"];\r\n\r\n  if (!product) {\r\n    navigate('/');\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!product || product === undefined) {\r\n      navigate('/');\r\n    }\r\n\r\n    getStuffiers([{ id: (location.state as any)[\"friend\"] }])\r\n    .then((res: any) => setFriend(res.data[0]));\r\n  });\r\n\r\n  const requestLoan = () => {\r\n    const idOwner = (location.state as any)[\"friend\"];\r\n    dispatch(loanRequestHook(idOwner, product.id, user.id, setMessage, setType));\r\n  }\r\n\r\n  const match = { params: { id: product.id } };\r\n\r\n  return (\r\n    <div className=\"loan\">\r\n      <WarningMessage message={message} type={type} />\r\n      <div className=\"loan__product\">\r\n        <h2>{friend?.first_name} Product</h2>\r\n        <hr />\r\n        <Product match={match} key={product.id} product={product} />\r\n      </div>\r\n      <Button type=\"submit\" onClick={requestLoan} text=\"Request To Borrow\" />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Loan;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { get, map, uniq } from 'lodash';\r\n\r\nimport Button from '../shared/Button';\r\nimport Category from '../types/Category';\r\nimport ExchangeRequest from '../types/ExchangeRequest';\r\nimport LoanRequest from '../types/LoanRequest';\r\nimport Product from './Product';\r\nimport State from '../../redux/State';\r\nimport User from '../types/User';\r\nimport WarningMessage from '../shared/WarningMessage';\r\nimport { WarningMessageType } from '../shared/types';\r\nimport { downloadExcel } from '../helpers/DownloadHelper';\r\nimport { deleteRequestHook } from '../../redux/exchange-requests/actions';\r\nimport { deleteRequestLoanHook } from '../../redux/loan-requests/actions';\r\nimport { getProductsFromIds } from '../../services/stuff';\r\nimport { isProductsEmpty } from '../helpers/StuffHelper';\r\nimport { mapIds } from '../helpers/StuffHelper';\r\nimport { default as ProductType } from '../types/Product';\r\n\r\nimport './Products.scss';\r\n\r\nconst Products = () => {\r\n  const navigate = useNavigate();\r\n\r\n  let user = useSelector((state: State) => state.user);\r\n  let categories = useSelector((state: State) => state.categories);\r\n  let friends = useSelector((state: State) => state.friends);\r\n  let exchangeRequests = useSelector((state: State) => state.exchangeRequests);\r\n  let loanRequests = useSelector((state: State) => state.loanRequests);\r\n  let products = useSelector((state: State) => state.products);\r\n  let [requestedProducts, setRequestProducts] = useState([]);\r\n  let [message, setMessage] = useState('');\r\n  let [type, setType] = useState(WarningMessageType.EMPTY);\r\n\r\n\r\n  useEffect(() => {\r\n    const loanIds = loanRequests.map((req: any) => req.id_stuff);\r\n    const exchangeIds = exchangeRequests.map((req: any) => req.id_stuff);\r\n    const exchangeFriendIds = exchangeRequests.map((req: any) => req.id_friend_stuff);\r\n\r\n    const ids = uniq([...loanIds, ...exchangeIds, ...exchangeFriendIds]);\r\n\r\n    getProductsFromIds(mapIds(ids))\r\n    .then(res => setRequestProducts(res.data));\r\n  }, [exchangeRequests, loanRequests]);\r\n\r\n  const generateReport = () => {\r\n    downloadExcel(products, `${user.first_name}_products`);\r\n  }\r\n\r\n  const executeDeleteExchange = (_id: number, isLoan = false) => {\r\n    if (isLoan) {\r\n      deleteRequestLoanHook(_id, dispatch, setMessage, setType);\r\n    } else {\r\n      deleteRequestHook(_id, dispatch, setMessage, setType);\r\n    }\r\n  }\r\n\r\n  const renderRequests = () => {\r\n    return (\r\n      <div className=\"products__requests\">\r\n        <hr />\r\n        <h3 className=\"products__requests-title\">\r\n          <div>Exchange Requests</div>\r\n          <div className=\"products__warning\">{exchangeRequests.length}</div>\r\n        </h3>\r\n        <ul>\r\n          {exchangeRequests.map((request: ExchangeRequest, index: number) => {\r\n            // const owner = request.id_stuffier === user.id ? user : friends.filter((f: User) => f.id === request.id_stuffier)[0];\r\n            const requestor = request.id_friend === user.id ? user : friends.filter((f: User) => f.id === request.id_friend)[0];\r\n            const isUserRequestor = user === requestor;\r\n            // const isUserOwner = user === owner;\r\n            const rejectText = isUserRequestor ? 'Cancel' : 'Reject';\r\n            const ownerProduct = requestedProducts.find((p: ProductType) => p.id === request.id_stuff);\r\n            const requestorProduct = requestedProducts.find((p: ProductType) => p.id === request.id_friend_stuff);\r\n\r\n            // console.log({ owner });\r\n            return (\r\n              <li className=\"products__request\" key={index}>\r\n                <div className=\"products__request-group\">\r\n                  {/* <div className=\"products__request-text\">\r\n                    Owner: {owner && isUserOwner ? 'Me' : `${owner.first_name} ${owner.last_name} (${owner.email})`}\r\n                  </div> */}\r\n                  <div className=\"products__request-text\">\r\n                    Product: {get(ownerProduct, 'name')}\r\n                  </div>\r\n                  <div className=\"products__request-text\">\r\n                    Requestor: {isUserRequestor ? 'Me' : `${requestor.first_name} ${requestor.last_name} (${requestor.email})`}\r\n                  </div>\r\n                  <div className=\"products__request-text\">\r\n                    Product: {get(requestorProduct, 'name')}\r\n                  </div>\r\n                </div>\r\n                <div className=\"products__request-buttons\">\r\n                  {!isUserRequestor && <div className=\"products__request-button\">\r\n                    <Button onClick={() => console.log(\"Accept Exchange\")} text=\"Accept\"></Button>\r\n                  </div>}\r\n                  <div className=\"products__request-button\">\r\n                    <Button onClick={() => executeDeleteExchange(request._id)} text={rejectText}></Button>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            )}\r\n          )}\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n\r\n const renderLoans = () => {\r\n    return (\r\n      <div className=\"products__requests\">\r\n        <hr />\r\n        <h3 className=\"products__requests-title\">\r\n          <div>Loan Requests</div>\r\n          <div className=\"products__warning\">{loanRequests.length}</div>\r\n        </h3>\r\n        <ul>\r\n          {loanRequests.map((request: LoanRequest, index: number) => {\r\n            // const owner = request.id_stuffier === user.id ? user : friends.filter((f: User) => f.id === request.id_stuffier)[0];\r\n            const requestor = request.id_friend === user.id ? user : friends.filter((f: User) => f.id === request.id_friend)[0];\r\n            const isUserRequestor = user === requestor;\r\n            // const isUserOwner = user === owner;\r\n            const rejectText = isUserRequestor ? 'Cancel' : 'Reject';\r\n            const product = requestedProducts.find((p: ProductType) => p.id === request.id_stuff);\r\n\r\n            return (\r\n              <li className=\"products__request\" key={index}>\r\n                <div className=\"products__request-group\">\r\n                  {/* <div className=\"products__request-text\">\r\n                    Owner: {owner && isUserOwner ? 'Me' : `${owner.first_name} ${owner.last_name} (${owner.email})`}\r\n                  </div> */}\r\n                  <div className=\"products__request-text\">\r\n                    Requestor: {isUserRequestor ? 'Me' : `${requestor.first_name} ${requestor.last_name} (${requestor.email})`}\r\n                  </div>\r\n                  <div className=\"products__request-text\">\r\n                    Product: {get(product, 'name')}\r\n                  </div>\r\n                </div>\r\n                <div className=\"products__request-buttons\">\r\n                  {!isUserRequestor && <div className=\"products__request-button\">\r\n                    <Button onClick={() => console.log(\"Accept Exchange\")} text=\"Accept\"></Button>\r\n                  </div>}\r\n                  <div className=\"products__request-button\">\r\n                    <Button onClick={() => executeDeleteExchange(request._id, true)} text={rejectText}></Button>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            )}\r\n          )}\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"products\">\r\n      <WarningMessage message={message} type={type} />\r\n      <div className=\"products__title\">\r\n        <h2>{user.first_name} Stuff</h2>\r\n        <div className=\"products__add-product\">\r\n          <Button text=\"Add Product\" onClick={() => navigate('/product/add')}></Button>\r\n        </div>\r\n      </div>\r\n      {exchangeRequests.length > 0 && renderRequests()}\r\n      {loanRequests.length > 0 && renderLoans()}\r\n      <hr />\r\n      {isProductsEmpty(products) && (<div>No Stuff! Add Products!</div>)}\r\n      {!isProductsEmpty(products) &&\r\n        (<div>\r\n          {categories.map((category: Category, index: number) => {\r\n            if (!products[category.id] || !products[category.id].length) return <div key={`${category.id}_${index}`}></div>;\r\n\r\n            return (\r\n              <div key={category.id}>\r\n                <h4 className=\"products__subheader\">{category.name}</h4>\r\n                <ul className=\"products__list\">\r\n                  {map(products[category.id as number], (product: ProductType) => {\r\n                    const match = { params: { id: product.id } };\r\n                    return <Product key={product.id} match={match} showCost={true} product={product} />\r\n                  })}\r\n                </ul>\r\n              </div>\r\n            )\r\n          })}\r\n          <hr />\r\n          <Button onClick={() => generateReport()} text=\"Generate Report\"></Button>\r\n        </div>)\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { Products as ProductsComponent };\r\nexport default Products;\r\n","import React from 'react';\r\n\r\nconst Support = () => {\r\n  return (\r\n    <iframe\r\n      src='https://webchat.botframework.com/embed/StuffieBot?s=fkpQavtTB78.cwA.pjM.9djZJuhRob4Mt-Lb5-1Wk7yrsHtLAxOKIL6w3gE4910'\r\n      title='WebChat'\r\n    />\r\n  );\r\n}\r\n\r\nexport default Support;\r\n","import React, { useState } from 'react';\r\nimport Tesseract from 'tesseract.js';\r\n\r\nconst Tickets = () => {\r\n  let progressValue = 0;\r\n  let [ file, setFile ] = useState<File>();\r\n\r\n  const handleChange = (event: any) => {\r\n    if (event && event.target && event.target.files) {\r\n      const fileT = event.target.files[0] as File;\r\n      setFile(fileT);\r\n    }\r\n  }\r\n\r\n  const handleSubmit = (event: any) => {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n\r\n    if (file) {\r\n      Tesseract.recognize(file, 'eng', { logger: m => console.log(m) })\r\n        .then(result);\r\n    }\r\n  }\r\n\r\n  const result = (res: any) => {\r\n    var log = document.getElementById('info') as HTMLElement;\r\n    var result = document.getElementById('result') as HTMLElement;\r\n\r\n    log.innerHTML = 'Finished!';\r\n    result.innerHTML = res ? res.text : '';\r\n  }\r\n\r\n  /*\r\n  // Used to be Tessearact.recognize().progress(progressUpdate).then()\r\n  const progressUpdate = (packet: any) => {\r\n    if ('progress' in packet) {\r\n      var progress = document.querySelector('progress') as any;\r\n      progress.value = packet.progress;\r\n      progress.max = 1;\r\n      (document.getElementById(\"info\") as HTMLElement).innerHTML = `Analyzing file...`;\r\n    }\r\n  }\r\n  */\r\n\r\n  return (\r\n    <div className=\"tickets\">\r\n      <h3>Tickets</h3>\r\n      <div className=\"ticketsForm\">\r\n        <form onSubmit={event => handleSubmit(event)}>\r\n          <input type='file' id='fileId' name='fileName'\r\n            onChange={event => handleChange(event)} />\r\n          <hr />\r\n          <input type=\"submit\" value=\"Analyze\" disabled={!file} />\r\n        </form>\r\n      </div>\r\n      <hr />\r\n      <div id=\"status\" className=\"ticketsStatus\">\r\n        <progress value={progressValue} max=\"100\"></progress>\r\n        <span id=\"statusInfo\" className=\"statusInfo\">\r\n          Status: <span id=\"info\" />\r\n        </span>\r\n      </div>\r\n      <hr />\r\n      <div id=\"result\"></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Tickets;\r\n","import React, { useEffect } from 'react';\r\nimport crypto from '../../config/crypto';\r\n\r\nconst Test = () => {\r\n  useEffect(() => {\r\n    document.getElementById(\"myButton\")?.addEventListener('click', debounce(() => console.log('click'), 4000));\r\n  });\r\n\r\n  // eslint-disable-next-line\r\n  const authenticate = () => {\r\n    // TEST - ENCRYPT\r\n    console.log(`secreto: ${crypto.encrypt(\"secreto\")}`);\r\n    console.log(`mario: ${crypto.encrypt(\"mario\")}`);\r\n    console.log(`doc: ${crypto.encrypt(\"secrdoceto\")}`);\r\n    console.log(`merol: ${crypto.encrypt(\"merol\")}`);\r\n  }\r\n\r\n  const getStuff = () => {\r\n    let stuff = [\r\n      { id: 1, name: 'Carlos Reyes 1' },\r\n      { id: 2, name: 'Carlos Reyes 2' },\r\n      { id: 1, name: 'Carlos Reyes 1' },\r\n      { id: 3, name: 'Carlos Reyes 3' },\r\n    ];\r\n\r\n    console.log(stuff);\r\n\r\n    let r = [1, 1, 2, 3, 4, 5];\r\n\r\n    return r.filter((item, index) => {\r\n      return r.indexOf(item) === index;\r\n    });\r\n  }\r\n\r\n  const reverseStuff = (name: string) => {\r\n    return name.split('').reverse().join('');\r\n  }\r\n\r\n  // eslint-disable-next-line\r\n  const flat = (array: any[]) => {\r\n    return array.reduce((acc, value) => [...acc, ...value], []);\r\n  }\r\n\r\n  // eslint-disable-next-line\r\n  const loop = (value: number, test: Function, update: Function, body: Function) => {\r\n    for (let i = value; test(i); i = update(i)) {\r\n      body(i);\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line\r\n  const every = (array: any[], test: Function) => {\r\n    let res = true;\r\n    array.forEach(v => {\r\n      if (!test(v)) {\r\n        res = false;\r\n        return;\r\n      }\r\n    });\r\n\r\n    return res;\r\n  }\r\n\r\n  // eslint-disable-next-line\r\n  const everySome = (array: any[], test: Function) => {\r\n    return !array.some((v: any) => !test(v));\r\n  }\r\n\r\n  // eslint-disable-next-line\r\n  const waysToDecode = (message = '4123') => {\r\n    let counter = 0;\r\n    let chars = message.split('');\r\n    for(let i = 0; i < chars.length; i++) {\r\n      if ((chars[i] === '1' || chars[i] === '2') && i+1 < chars.length) {\r\n        counter++;\r\n      }\r\n    }\r\n\r\n    return counter + 1;\r\n  }\r\n\r\n  // eslint-disable-next-line\r\n  const getAnagrams = (array = [\"star\", \"rats\", \"car\", \"arc\", \"arts\", \"star\", \"stars\"]) => {\r\n    let myMap:  { [key:string]: string[] } = { };\r\n\r\n    array.forEach(word => {                                     // N\r\n      let sortedWord = word.split('').sort().join('');          // K log K\r\n\r\n      if (Object.keys(myMap).includes(sortedWord)) {\r\n        if (!myMap[sortedWord].includes(word)) {\r\n          myMap[sortedWord].push(word);\r\n        }\r\n      } else {\r\n        myMap = { ...myMap, [sortedWord]: [word] };\r\n      }\r\n    });\r\n\r\n\r\n    return Object.keys(myMap).map((key: string) => myMap[key]); // N\r\n  }                                                             // N * K log K + N = O(N * K log K)\r\n\r\n  // [1, 2, 3, 4].reduce((acc, value) => acc + value, 0)\r\n  // eslint-disable-next-line\r\n  const reduce = (array: number[], callback: Function, initValue: number) => {\r\n    let acc = initValue;\r\n    array.forEach(value => {\r\n      acc = callback(acc, value);\r\n    });\r\n\r\n    return acc;\r\n  }\r\n\r\n  // eslint-disable-next-line\r\n  const getRoman = (decimal: number) => {\r\n    let roman = '';\r\n    let currentVal = decimal;\r\n\r\n    let thousands = Math.floor(currentVal / 1000);\r\n    if (thousands) {\r\n      roman += 'M'.repeat(thousands);\r\n      currentVal -= thousands*1000;\r\n    }\r\n\r\n    let hundreds = Math.floor(currentVal / 100);\r\n    if (hundreds) {\r\n      roman += hundreds > 5 ? `D${'C'.repeat(hundreds-5)}` : hundreds === 5 ? 'D' : hundreds === 4 ? 'CD' : 'C'.repeat(hundreds);\r\n      currentVal -= hundreds*100;\r\n    }\r\n\r\n    let decimals = Math.floor(currentVal / 10);\r\n    if (decimals) {\r\n      roman += decimals > 5 ? `L${'X'.repeat(decimals-5)}` : decimals === 5 ? 'L' : decimals === 4 ? 'XL' : 'X'.repeat(decimals);\r\n      currentVal -= decimals*10;\r\n    }\r\n\r\n    roman += currentVal > 5 ? `V${'I'.repeat(currentVal-5)}` : currentVal === 5 ? 'V' : currentVal === 4 ? 'IV' : 'I'.repeat(currentVal);\r\n\r\n    return roman;\r\n  }\r\n\r\n  // eslint-disable-next-line\r\n  const proto = () => {\r\n    let animal = { eats: true };\r\n    let rabbit: any = { jumps: true, __proto__: animal };\r\n\r\n    // Object.keys only returns own keys\r\n    // alert(Object.keys(rabbit)); // jumps\r\n\r\n    // for..in loops over both own and inherited keys\r\n    // for(let prop in rabbit) alert(prop); // jumps, then eats\r\n\r\n    const pa = rabbit.propertyIsEnumerable(rabbit?.__proto__?.hasOwnProperty);\r\n    console.log(pa);\r\n  }\r\n\r\n  // eslint-disable-next-line\r\n  const myFlat = (array: Array<any>) => {\r\n    let res: any = [];\r\n    myFlatTemp(array, res);\r\n    return res;\r\n  }\r\n\r\n  const myFlatTemp = (array: Array<any>, res: any) => {\r\n    array.forEach(value => {\r\n      if (!Array.isArray(value)) {\r\n          res.push(value);\r\n      }\r\n      else {\r\n        return myFlatTemp(value, res);\r\n      }\r\n    });\r\n  }\r\n\r\n  const dom = () => {\r\n    const spans = document.getElementsByTagName('span');\r\n    if (spans && spans !== undefined) {\r\n      console.log(spans);\r\n      console.log(spans[0]);\r\n      // console.log(spans.parentNode);\r\n      // console.log(spans.parentElement);\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line\r\n  const excludeItems = () => {\r\n    // could be potentially more than 3 keys in the object above\r\n    let items = [{color: 'red', type: 'tv', age: 18}, {color: 'silver', type: 'phone', age: 20}];\r\n    let excludes = [{k: 'color', v: 'silver'}, {k: 'type', v: 'tv'}];\r\n\r\n    excludes.forEach(pair => {\r\n      items = items.filter(item => (item as any)[pair.k] === pair.v);\r\n    });\r\n\r\n    return items;\r\n  }\r\n\r\n  const orderArray = () => {\r\n    let array = ['a', 'b', 'c', 'd', 'e'];\r\n    let indexes = [1, 3, 2, 4, 0];\r\n\r\n    indexes.forEach((index: number, i: number) => {\r\n      let value = array[i];\r\n      array[i] = array[index];\r\n      array[index] = value;\r\n    });\r\n\r\n    return array;\r\n  }\r\n\r\n  const debounce = (callback: Function, time: number) => {\r\n    let timeout: any = null;\r\n\r\n    return () => {\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(() => {\r\n          callback();\r\n        }, time);\r\n    }\r\n  }\r\n\r\n  const debug = () => {\r\n    console.log(myFlat([1, [2, [4, 5]], 3]));\r\n    console.log(flat([[1, 2, 3], [4, 5], [6]]));\r\n    loop(3, (n: any)=> n>0, (n: any)=> n-1, console.log);\r\n    console.log(every([1, 3, 5], (n: any) => n < 10));\r\n    console.log(everySome([1, 3, 5], (n: any) => n < 10));\r\n    console.log(waysToDecode());\r\n    console.log(getAnagrams());\r\n    console.log(reduce([1, 2, 3, 4, 5], (acc: number, value: number) => value, 0));\r\n    console.log([1, 2, 3, 4, 5].reduce((acc, val) => acc + val));\r\n    console.log(getRoman(3748));\r\n    authenticate();\r\n  }\r\n\r\n  const x = getStuff();\r\n  const a = reverseStuff('unodostres');\r\n  dom();\r\n  console.log(orderArray());\r\n  debug();\r\n\r\n  return (\r\n    <div>\r\n      <span>This is my test = {a}</span>\r\n      <span>This is my other test = {x}</span>\r\n      <button id=\"myButton\">Click</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Test;\r\n","const cards = [\r\n  // {\r\n  //   \"type\": \"AdaptiveCard\",\r\n  //   \"version\": \"1.0\",\r\n  //   \"body\": [\r\n  //     {\r\n  //       \"type\": \"Image\",\r\n  //       \"url\": \"https://adaptivecards.io/content/adaptive-card-50.png\",\r\n  //     },\r\n  //     {\r\n  //       \"type\": \"TextBlock\",\r\n  //       \"text\": \"Hello **Adaptive Cards!**\",\r\n  //     },\r\n  //   ],\r\n  //   \"actions\": [\r\n  //     {\r\n  //       \"type\": \"Action.OpenUrl\",\r\n  //       \"title\": \"Learn more\",\r\n  //       \"url\": \"https://adaptivecards.io\",\r\n  //     },\r\n  //     {\r\n  //       \"type\": \"Action.OpenUrl\",\r\n  //       \"title\": \"GitHub\",\r\n  //       \"url\": \"https://github.com/Microsoft/AdaptiveCards\",\r\n  //     },\r\n  //     {\r\n  //       \"type\": \"Action.Submit\",\r\n  //       \"id\": \"clickMe\",\r\n  //       \"title\": \"Click me!\"\r\n  //     }\r\n  //   ],\r\n  // },\r\n  {\r\n    \"type\": \"AdaptiveCard\",\r\n    \"version\": \"1.6\",\r\n    \"body\": {\r\n      \"type\": \"Carousel\",\r\n      \"timer\": 5000,\r\n      \"pages\": [\r\n        {\r\n          \"type\": \"CarouselPage\",\r\n          \"id\": \"firstCarouselPage\",\r\n          \"selectAction\": {\r\n            \"type\": \"Action.OpenUrl\",\r\n            \"title\": \"Click for more information about the first carousel page!\",\r\n            \"url\": \"https://adaptivecards.io/\"\r\n          },\r\n          \"items\": [\r\n            {\r\n              \"type\": \"Image\",\r\n              \"url\": \"https://adaptivecards.io/content/cats/1.png\",\r\n              \"size\": \"medium\"\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          \"type\": \"CarouselPage\",\r\n          \"id\": \"theSecondCarouselPage\",\r\n          \"items\": [\r\n            {\r\n              \"type\": \"Image\",\r\n              \"url\": \"https://adaptivecards.io/content/cats/2.png\",\r\n              \"size\": \"medium\"\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          \"type\": \"CarouselPage\",\r\n          \"id\": \"last-carousel-page\",\r\n          \"items\": [\r\n            {\r\n              \"type\": \"Image\",\r\n              \"url\": \"https://adaptivecards.io/content/cats/3.png\",\r\n              \"altText\": \"That's a cool cat!\",\r\n              \"size\": \"medium\"\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    \"actions\": [\r\n      {\r\n        \"type\": \"Action.OpenUrl\",\r\n        \"title\": \"See more\",\r\n        \"url\": \"https://adaptivecards.io\"\r\n      },\r\n      {\r\n        \"type\": \"Action.OpenUrl\",\r\n        \"title\": \"Another action\",\r\n        \"url\": \"https://adaptivecards.io\"\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    \"type\": \"AdaptiveCard\",\r\n    \"version\": \"1.0\",\r\n    \"actions\": [\r\n      {\r\n        \"type\": \"Action.Submit\",\r\n        \"id\": \"clickMe\",\r\n        \"title\": \"Click me!\"\r\n      }\r\n    ]\r\n  },\r\n  // {\r\n  //   \"$schema\": \"http://adaptivecards.io/schemas/adaptive-card.json\",\r\n  //   \"type\": \"AdaptiveCard\",\r\n  //   \"version\": \"1.0\",\r\n  //   \"body\": [\r\n  //     {\r\n  //       \"type\": \"TextBlock\",\r\n  //       \"size\": \"default\",\r\n  //       \"text\": \"1. Right click on the report menu and select open from the task list:\",\r\n  //       \"wrap\": true,\r\n  //       \"maxLines\": 0\r\n  //     },\r\n  //     {\r\n  //       \"type\": \"Image\",\r\n  //       \"url\": \"https://adaptivecards.io/content/cats/3.png\",\r\n  //       \"size\": \"auto\",\r\n  //       \"horizontalAlignment\": \"center\",\r\n  //       \"selectAction\": \"No\"\r\n  //     }\r\n  //   ]\r\n  // }\r\n];\r\n\r\nexport default cards;\r\n","import React from 'react';\nimport { Action } from 'adaptivecards';\nimport AdaptiveCard from 'react-adaptivecards';\nimport cards from '../../config/cards';\n\nconst Cards = () => {\n  const renderCard = (card: any, index: number) => {\n    return (<AdaptiveCard\n      key={index}\n      payload={card}\n      onExecuteAction={(action: Action) => console.log(action)}\n      style={{width: '500px', border: '1px solid black', \"background-color\": 'red'}}\n    />);\n  };\n\n  return (\n    <div>\n      {cards.map((c, index) => renderCard(c, index))}\n    </div>\n  );\n}\n\nexport default Cards;\n","import React, { useState } from 'react';\nimport Loading from '../shared/Loading';\n\ninterface Movie { id: number, title: string };\n\nconst allMovies: Movie[] = [\n  { id: 1, title: \"one\" },\n  { id: 2, title: \"two\" },\n  { id: 3, title: \"two\" },\n  { id: 3, title: \"four\" },\n];\n\nconst Test4 = () => {\n  let [movies, setMovies] = useState<Movie[]>(allMovies);\n  let [loading, setLoading] = useState<boolean>(false);\n\n  const getMoviesFiltered = async (text: string) => {\n    let promise = new Promise<Movie[]>((resolve, _) => {\n      setTimeout(() => {\n        let filteredMovies = allMovies.filter((m: Movie) => {\n          return (m.title.includes(text));\n        });\n        resolve(filteredMovies);\n      }, 500);\n    });\n    return promise;\n  }\n\n  const setFilter = (event: any) => {\n    let text = event.target.value;\n    if (text) {\n      setLoading(true);\n      getMoviesFiltered(text)\n        .then(res => setMovies(res))\n        .finally(() => setLoading(false));\n    } else {\n      setMovies(allMovies);\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div>\n      <h2>Microsoft Tech Screen</h2>\n      <hr />\n      <input type=\"text\" onChange={setFilter} />\n      {loading && (<Loading size='md' message='Loading'></Loading>)}\n      {!loading && (\n        <ul>\n          {movies.map((m: Movie, index: number) => (\n            <li key={index}>{m.title}</li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default Test4;\n","import React from 'react';\r\nimport { Routes, Route } from 'react-router-dom';\r\n\r\nimport AddCategory from '../content/AddCategory';\r\nimport AddProduct from '../content/AddProduct';\r\nimport Admin from '../admin/Admin';\r\nimport Buy from '../apps/Buy';\r\nimport CategoryPage from '../content/CategoryPage';\r\nimport Content from '../content/Content';\r\nimport Charts from '../apps/Charts';\r\nimport Exchange from '../apps/Exchange';\r\nimport Friends from '../content/Friends';\r\nimport Loan from '../apps/Loan';\r\nimport Products from '../content/Products';\r\nimport Product from '../content/Product';\r\nimport Support from '../apps/Support';\r\nimport Tickets from '../apps/Tickets';\r\nimport Test from '../apps/Test';\r\nimport Cards from '../apps/Cards';\r\nimport Test4 from '../apps/Test4';\r\n// import Test2 from '../apps/Test2';\r\n\r\nconst MainRoutes = () => {\r\n  return (\r\n    <Routes>\r\n      <Route path=\"/\" element={<Content />} />\r\n      <Route path=\"StuffieReact\" element={<Content />} />\r\n      <Route path=\"admin\" element={<Admin />} />\r\n      <Route path=\"friends\" element={<Friends />} />\r\n      <Route path=\"products\" element={<Products />} />\r\n      <Route path=\"product/add\" element={<AddProduct />} />\r\n      <Route path=\"product/:id\" element={<Product />} />\r\n      <Route path=\"category/add\" element={<AddCategory type='category' />} />\r\n      <Route path=\"category/:id\" element={<CategoryPage />} />\r\n      <Route path=\"subcategory/add\" element={<AddCategory type='subcategory' />} />\r\n      <Route path=\"subcategory/:id\" element={<CategoryPage />} />\r\n      <Route path=\"exchange\" element={<Exchange />} />\r\n      <Route path=\"loan\" element={<Loan />} />\r\n      <Route path=\"buy\" element={<Buy />} />\r\n      <Route path=\"charts\" element={<Charts />} />\r\n      <Route path=\"support\" element={<Support />} />\r\n      <Route path=\"tickets\" element={<Tickets />} />\r\n      <Route path=\"test\" element={<Test />} />\r\n      <Route path=\"cards\" element={<Cards />} />\r\n      <Route path=\"test4\" element={<Test4 />} />\r\n      {/* <Route path=\"/test2\" element={<Test2 />} /> */}\r\n    </Routes>\r\n  );\r\n}\r\n\r\nexport default MainRoutes;\r\n","import React from 'react';\r\nimport './Footer.scss';\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <div className=\"footer\">\r\n      <hr />\r\n      <div>\r\n        <span>Stuffie&trade; is a platform coded and registered by &nbsp;</span>\r\n        <a href=\"http://stuffie.azurewebsites.net/PM_Carlos-Reyes2.html\" target=\"_blank\" rel=\"noopener noreferrer\">Carlos Reyes-Rico</a>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport Apps from '../sections/Apps';\r\nimport Chat from './Chat';\r\nimport Media from '../shared/Media';\r\nimport SearchBar from '../shared/SearchBar';\r\n// import Spotify from '../apps/Spotify';\r\nimport State from '../../redux/State';\r\nimport { logout } from '../../redux/user/actions';\r\n\r\nimport './Header.scss';\r\n\r\nconst Header = () => {\r\n  let state = useSelector((state: State) => state);\r\n  let user = state.user;\r\n  let userRequests = useSelector((state: State) => state.userRequests);\r\n  let friendsRequests = useSelector((state: State) => state.friendsRequests);\r\n  let products = useSelector((state: State) => state.products);\r\n  let exchangeRequests = useSelector((state: State) => state.exchangeRequests);\r\n  let loanRequests = useSelector((state: State) => state.loanRequests);\r\n  let pendingProducts = useSelector((state: State) => state.pendingProducts);\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const { t } = useTranslation();\r\n\r\n  const exchangeClass = exchangeRequests.length > 0 ? \"stuffie-header__section-exchange\" : \"\";\r\n  const requests = exchangeRequests.length + loanRequests.length;\r\n\r\n  const handleLogout = (event: any) => {\r\n    event.preventDefault();\r\n    dispatch(logout());\r\n    navigate('/');\r\n  }\r\n\r\n  /* Toggle between showing and hiding the navigation menu links when the user clicks on the hamburger menu / bar icon */\r\n  const toggleApps = () => {\r\n    let x: any = document.getElementById(\"apps\");\r\n    if (x.style.display === \"block\") {\r\n      x.style.display = \"none\";\r\n    } else {\r\n      x.style.cssText = `\r\n        display: block;\r\n        float: right;\r\n        top: 28px; right: 0px;\r\n        position: absolute; background-color: white;\r\n        width: 146px;\r\n        padding: 8px;\r\n        box-shadow: 5px 5px #888888;\r\n        border-radius: 6px;\r\n      `;\r\n    }\r\n  }\r\n\r\n  const toggleMenu = () => {\r\n    let x: any = document.getElementById(\"menu\");\r\n    if (x.style.display === \"block\") {\r\n      x.style.display = \"none\";\r\n    } else {\r\n      x.style.cssText = `\r\n        display: block;\r\n        float: left;\r\n        top: 28px; left: 0px;\r\n        position: absolute; background-color: white;\r\n        width: 146px;\r\n        padding: 8px;\r\n        box-shadow: 5px 5px #888888;\r\n        border-radius: 6px;\r\n      `;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"stuffie-header\">\r\n      <div className=\"stuffie-header__left\">\r\n        <div className=\"stuffie-header__info\">\r\n          <div className=\"stuffie-header__logo\">\r\n            <Media fileName=\"logo_2020\" format=\"jpg\" height=\"50\" width=\"50\" />\r\n          </div>\r\n          <div className='stuffie-header__user'>Stuffie</div>\r\n        </div>\r\n        <div className='stuffie-header__sections'>\r\n          <div className='stuffie-header__section-item'><Link to='/StuffieReact'>{t('Feed')}</Link></div>\r\n          <div className='stuffie-header__section-item'>\r\n            <Link to='/friends'>{t('Friends')}</Link>\r\n            {friendsRequests.length > 0 && (<div className=\"stuffie-header__warning\">{friendsRequests.length}</div>)}\r\n          </div>\r\n          <div className={`stuffie-header__section-item ${exchangeClass}`}>\r\n            <Link to='/products'>{window.outerWidth >= 1024 && !requests ? \"Products\" : \"Prods\"}</Link>\r\n            {requests > 0 && (\r\n              <div className=\"stuffie-header__warning\">\r\n                <span className=\"stuffie-header__warning-text\">{requests}</span>\r\n              </div>)}\r\n          </div>\r\n          {user.admin && (\r\n            <div className='stuffie-header__section-item'>\r\n              <Link to='/admin'>{t('Admin')}</Link>\r\n              {(userRequests.length > 0 || pendingProducts.length > 0) && (\r\n                <div className=\"stuffie-header__warning\">\r\n                  <span className=\"stuffie-header__warning-text\">{userRequests.length + pendingProducts.length}</span>\r\n                </div>)}\r\n            </div>\r\n          )}\r\n          <div className=\"stuffie-header__section-item\">\r\n            <button className=\"stuffie-header__button\" onClick={handleLogout}>{t('Logout')}</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"stuffie-header__search\">\r\n        <div className=\"stuffie-header__menu\">\r\n          <div id=\"menu\">\r\n            <div className=\"stuffie-header__menu-apps\">\r\n              <Chat/>\r\n            </div>\r\n          </div>\r\n          <button className=\"icon\" onClick={event => event && toggleMenu()}>\r\n            <i className=\"fa fa-bars\"></i>\r\n          </button>\r\n        </div>\r\n\r\n        <SearchBar products={products}></SearchBar>\r\n\r\n        {/* https://www.w3schools.com/howto/howto_js_mobile_navbar.asp */}\r\n        <div className=\"stuffie-header__apps\">\r\n          <div id=\"apps\">\r\n            {/* <div className=\"stuffie-header__menu-spotify\"><Spotify /></div> */}\r\n            <div className=\"stuffie-header__apps-apps\"><Apps /></div>\r\n          </div>\r\n          <button className=\"icon\" onClick={event => event && toggleApps()}>\r\n            <i className=\"fa fa-bars\"></i>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n  export default Header;\r\n","export const REVOKE_USER = 'STUFFIE::REVOKE_USER';\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport Category from '../types/Category';\r\nimport State from '../../redux/State';\r\nimport { isProductsEmpty } from '../../components/helpers/StuffHelper';\r\nimport './Menu.scss';\r\n\r\nconst Menu = () => {\r\n  let categories = useSelector((state: State) => state.categories);\r\n  let products = useSelector((state: State) => state.products);\r\n  const { t } = useTranslation();\r\n\r\n  const renderCategories = () => {\r\n    if (!categories) return;\r\n    if (!products) return;\r\n\r\n    return categories\r\n      .filter((category: Category) => products[category.id] && products[category.id].length)\r\n      .map(cat => {\r\n        const newTo = { pathname: `/category/${cat.id}`, state: { category: cat.name } };\r\n        return (\r\n          <div key={cat.id} className=\"menu__category\">\r\n            <Link className=\"\" key={cat.id} to={newTo}>{cat.name}</Link>\r\n          </div>);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className='menu__title'>{t('Summary')}</div>\r\n      {isProductsEmpty(products) && <div>No products</div>}\r\n      <div className=\"menu__list\">\r\n        {renderCategories()}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport Apps from '../sections/Apps';\r\nimport Chat from '../sections/Chat';\r\nimport MainRoutes from './MainRoutes';\r\nimport Footer from '../sections/Footer';\r\nimport Header from '../sections/Header';\r\nimport Menu from '../sections/Menu';\r\n// import Spotify from '../apps/Spotify';\r\nimport State from '../../redux/State';\r\n\r\nimport './Main.scss';\r\n\r\nconst Main = () => {\r\n  const user = useSelector((state: State) => state.user);\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <div className=\"stuffie\">\r\n      <div className=\"stuffie__header\">\r\n        <Header />\r\n      </div>\r\n      <div className=\"stuffie__main\">\r\n        <div className=\"stuffie__left\">\r\n          <div className=\"stuffie__user\">\r\n              {user.picture && (<img src={user.picture} alt=\"User Pic\"></img>)}\r\n              <div className=\"stuffie__welcome\">{t('Welcome')} {user.first_name}</div>\r\n          </div>\r\n          <div className=\"stuffie__left-section\">\r\n            <Menu />\r\n          </div>\r\n          <div className=\"stuffie__left-section\">\r\n            <Chat />\r\n          </div>\r\n        </div>\r\n        <div className=\"stuffie__content\">\r\n          <MainRoutes />\r\n        </div>\r\n        <div className=\"stuffie__right\">\r\n          {/* <div className=\"stuffie__spotify\">\r\n            <Spotify />\r\n          </div> */}\r\n          <div className=\"stuffie__apps\">\r\n            <Apps />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"stuffie_footer\">\r\n        <Footer />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import { makeStandardActionCreator } from '../action-helpers';\r\nimport { FRIENDS_REQUESTS_FETCHED } from './constants';\r\nimport { getFriendsRequests } from '../../services/stuffier';\r\n\r\nconst friendsRequestsFetched = makeStandardActionCreator(FRIENDS_REQUESTS_FETCHED);\r\nexport const fetchFriendsRequests = (email) => dispatch => {\r\n  return getFriendsRequests(email)\r\n  .then(res => {\r\n    dispatch(friendsRequestsFetched(res.data));\r\n    return Promise.resolve(res.data);\r\n  });\r\n}\r\n\r\nexport const fetchFriendsRequestsHook = (email, dispatch) => {\r\n  getFriendsRequests(email).then(res => {\r\n    dispatch(friendsRequestsFetched(res.data));\r\n  });\r\n}\r\n","export const FRIENDS_REQUESTS_FETCHED = 'MENU::FRIENDS_REQUESTS_FETCHED';\r\n","import { makeStandardActionCreator } from '../action-helpers';\r\nimport { PENDING_PRODUCTS_FETCHED } from './constants';\r\nimport { getPendingProducts } from '../../services/stuff';\r\n\r\nconst pendingProductsFetched = makeStandardActionCreator(PENDING_PRODUCTS_FETCHED);\r\nexport const fetchPendingProducts = () => dispatch => {\r\n  return getPendingProducts()\r\n  .then(res => {\r\n    dispatch(pendingProductsFetched(res.data));\r\n    return Promise.resolve(res.data);\r\n  })\r\n  .catch(error => Promise.reject(error));\r\n}\r\n\r\nexport const fetchPendingProductsHook = (sessionStorage, dispatch) => {\r\n  getPendingProducts().then(res =>{\r\n    sessionStorage.setItem('products-requests', JSON.stringify(res.data));\r\n    dispatchPedingProducts(res.data, dispatch);\r\n  });\r\n}\r\n\r\nexport const dispatchPedingProducts = (requests, dispatch) => {\r\n  dispatch(pendingProductsFetched(requests));\r\n}\r\n","export const PENDING_PRODUCTS_FETCHED = 'ADMIN::PENDING_PRODUCTS_FETCHED';\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport Loading from '../shared/Loading';\r\nimport Main from './Main';\r\nimport State from '../../redux/State';\r\nimport User from '../types/User';\r\n// import { FetchDataProps } from './types';\r\n\r\nimport { dispatchCategoriesFetched, fetchCategoriesHook } from '../../redux/categories/actions';\r\nimport { dispatchFriendsFetched, fetchFriendsHook } from '../../redux/friends/actions';\r\nimport { fetchFriendsRequestsHook } from '../../redux/friends-requests/actions';\r\nimport { dispatchProductsFetched, fetchProductsHook } from '../../redux/products/actions';\r\nimport { dispatchSubCategoriesFetched, fetchSubCategoriesHook } from '../../redux/subcategories/actions';\r\nimport { fetchExchangeRequestsHook } from '../../redux/exchange-requests/actions';\r\nimport { fetchLoanRequestsHook } from '../../redux/loan-requests/actions';\r\nimport { dispatchPedingProducts, fetchPendingProductsHook } from '../../redux/pending-products/actions';\r\n// import { fetchSpotify } from '../../redux/spotify/actions';\r\n\r\nimport './FetchData.scss';\r\nimport Category from '../types/Category';\r\n\r\nconst fetchBasis = (user: User, sessionStorage: Storage, dispatch: Function) => {\r\n  if (sessionStorage.getItem('categories')) {\r\n    let cats = JSON.parse(sessionStorage.getItem('categories') || '');\r\n    dispatchCategoriesFetched(cats, dispatch);\r\n  } else {\r\n    fetchCategoriesHook(sessionStorage, dispatch);\r\n  }\r\n\r\n  if (sessionStorage.getItem('subcategories')) {\r\n    let subcats = JSON.parse(sessionStorage.getItem('subcategories') || '');\r\n    dispatchSubCategoriesFetched(subcats, dispatch);\r\n  } else {\r\n    fetchSubCategoriesHook(sessionStorage, dispatch);\r\n  }\r\n\r\n  if (sessionStorage.getItem('friends')) {\r\n    let friends = JSON.parse(sessionStorage.getItem('friends') || '');\r\n    dispatchFriendsFetched(friends, user.email, dispatch);\r\n  } else {\r\n    fetchFriendsHook(user.email, sessionStorage, dispatch);\r\n  }\r\n}\r\n\r\nconst fetchAdmin = (sessionStorage: Storage, dispatch: Function) => {\r\n  let hookPromises = [];\r\n\r\n  if (sessionStorage.getItem('user-requests')) {\r\n    let uRequests = JSON.parse(sessionStorage.getItem('user-requests') || '');\r\n    dispatchSubCategoriesFetched(uRequests, dispatch);\r\n  } else {\r\n    hookPromises.push(fetchSubCategoriesHook);\r\n  }\r\n\r\n  if (sessionStorage.getItem('products-requests')) {\r\n    let pRequests = JSON.parse(sessionStorage.getItem('products-requests') || '');\r\n    dispatchPedingProducts(pRequests, dispatch);\r\n  } else {\r\n    hookPromises.push(fetchPendingProductsHook);\r\n  }\r\n\r\n  if (hookPromises.length) {\r\n    hookPromises.forEach(p => p(sessionStorage, dispatch));\r\n  }\r\n}\r\n\r\n\r\nconst fetchProducts = (user: User, categories: Category[], setIsLoading: Function, sessionStorage: Storage, dispatch: Function) => {\r\n  if (sessionStorage.getItem('products')) {\r\n    let prods = JSON.parse(sessionStorage.getItem('products') || '');\r\n    dispatchProductsFetched(prods, user.email, dispatch);\r\n    setIsLoading(false);\r\n  } else if (categories.length) {\r\n    fetchProductsHook(user, categories, setIsLoading, sessionStorage, dispatch);\r\n  }\r\n}\r\n\r\nconst FetchData = () => {\r\n  const [ isLoading, setIsLoading ] = useState(true);\r\n  const user = useSelector((state: State) => state.user);\r\n  const categories = useSelector((state: State) => state.categories);\r\n  const subcategories = useSelector((state: State) => state.subcategories);\r\n  // const exchangeRequests = useSelector((state: State) => state.exchangeRequests);\r\n  // const friendsRequests = useSelector((state: State) => state.friendsRequests);\r\n  // const loanRequests = useSelector((state: State) => state.loanRequests);\r\n  const dispatch = useDispatch();\r\n  const stableFetchBasis = useCallback(fetchBasis, []);\r\n  const stableFetchProducts = useCallback(fetchProducts, []);\r\n  // Admin\r\n  const stableFetchAdmin = useCallback(fetchAdmin, []);\r\n  // Data not critical\r\n  const stableFetchFriendsRequests = useCallback(fetchFriendsRequestsHook, []);\r\n  const stableFetchExchangeRequests = useCallback(fetchExchangeRequestsHook, []);\r\n  const stableFetchLoanRequests = useCallback(fetchLoanRequestsHook, []);\r\n\r\n  const { t } = useTranslation();\r\n\r\n  useEffect(() => {\r\n    let sessionStorage = window.sessionStorage;\r\n    stableFetchBasis(user, sessionStorage, dispatch);\r\n  }, [stableFetchBasis, user, dispatch])\r\n\r\n  // fetchProducts\r\n  useEffect(() => {\r\n    let sessionStorage = window.sessionStorage;\r\n    stableFetchProducts(user, categories, setIsLoading, sessionStorage, dispatch);\r\n  }, [stableFetchProducts, user, categories, dispatch]);\r\n\r\n  useEffect(() => {\r\n    let sessionStorage = window.sessionStorage;\r\n    if (user.admin) {\r\n      stableFetchAdmin(sessionStorage, dispatch);\r\n    }\r\n  }, [stableFetchAdmin, user, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (categories.length && subcategories.length) {\r\n      stableFetchFriendsRequests(user.email, dispatch);\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (categories.length && subcategories.length) {\r\n      stableFetchExchangeRequests(user.id, dispatch);\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (categories.length && subcategories.length) {\r\n      stableFetchLoanRequests(user.id, dispatch);\r\n    }\r\n  }, [])\r\n\r\n  // fetchSpotify\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"fetch-data__loading\">\r\n        <Loading size=\"xl\" message={t('Loading-data')} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (<Main />);\r\n}\r\n\r\nexport default FetchData;\r\n","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport Button from '../shared/Button';\r\nimport TextField from '../shared/TextField';\r\nimport User from '../types/User';\r\nimport { registerUserHook } from '../../redux/user/actions';\r\n\r\nimport './Register.scss';\r\n\r\nconst Register = ({ setMessage, setIsLoading }: any) => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [firstName, setFirstName] = useState('');\r\n  const [lastName, setLastName] = useState('');\r\n  const dispatch = useDispatch();\r\n\r\n  const enableButton = () => {\r\n    return email.length > 0 &&\r\n      password.length > 0 &&\r\n      firstName.length > 0 &&\r\n      lastName.length > 0;\r\n  }\r\n\r\n  const handleKeypress = (e: any) => {\r\n    if (enableButton() && e.key === 'Enter') {\r\n      handleSubmit(e);\r\n    }\r\n  }\r\n\r\n  const handleSubmit = (event: any) => {\r\n    const user: User = { email, password, first_name: firstName, last_name: lastName, admin: false };\r\n    event.preventDefault();\r\n    dispatch(registerUserHook(user, setIsLoading, setMessage));\r\n    setIsLoading(true);\r\n  }\r\n\r\n  return (\r\n    <div className=\"register\">\r\n      <h1>Register</h1>\r\n      <form className=\"register__form\" onSubmit={handleSubmit} >\r\n        <div className=\"register__content\">\r\n          <div className=\"register__row\">\r\n            <div className=\"register__text\">Email</div>\r\n            <TextField\r\n              type=\"text\"\r\n              name=\"email\"\r\n              placeholder=\"Email\"\r\n              onChange={(e: any) => setEmail(e.target.value)} />\r\n          </div>\r\n          <div className=\"register__row\">\r\n            <div className=\"register__text\">Password</div>\r\n            <TextField\r\n              type=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"Password\"\r\n              onChange={(e: any) => setPassword(e.target.value)} />\r\n          </div>\r\n          <div className=\"register__row\">\r\n            <div className=\"register__text\">First Name</div>\r\n            <TextField\r\n              type=\"text\"\r\n              name=\"firstName\"\r\n              placeholder=\"First Name\"\r\n              onChange={(e: any) => setFirstName(e.target.value)} />\r\n          </div>\r\n          <div className=\"register__row\">\r\n            <div className=\"register__text\">Last Name</div>\r\n            <TextField\r\n              type=\"text\"\r\n              name=\"lastName\"\r\n              placeholder=\"Last Name\"\r\n              onKeyPress={handleKeypress}\r\n              onChange={(e: any) => setLastName(e.target.value)} />\r\n          </div>\r\n        </div>\r\n        <div className=\"register__button\">\r\n          <Button type=\"submit\" text=\"Register\" disabled={!enableButton()}></Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { get, isEmpty } from 'lodash';\r\n\r\nimport Loading from '../shared/Loading';\r\nimport Login from './Login';\r\nimport FetchData from './FetchData';\r\nimport Media from '../shared/Media';\r\nimport Register from './Register';\r\nimport State from '../../redux/State';\r\nimport WarningMessage from '../shared/WarningMessage';\r\nimport { WarningMessageType } from '../shared/types';\r\nimport { fetchUserHook } from '../../redux/user/actions';\r\nimport './Auth.scss';\r\nimport Main from './Main';\r\n\r\nconst getMessageType = (message: string) => {\r\n  if (message.toLowerCase().includes('Error')) {\r\n    return WarningMessageType.ERROR;\r\n  } else if (message.toLowerCase().includes('successful')) {\r\n    return WarningMessageType.SUCCESSFUL;\r\n  }\r\n\r\n  return WarningMessageType.WARNING;\r\n}\r\n\r\nconst fetchUser = (userName: string, setIsLoading: Function, dispatch: Function) => {\r\n  fetchUserHook(userName, setIsLoading, dispatch);\r\n}\r\n\r\nconst Auth = () => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const user = useSelector((state: State) => state.user);\r\n  const products: any = useSelector((state: State) => state.products);\r\n  const dispatch = useDispatch();\r\n  const stableFetchUser = useCallback(fetchUser, []);\r\n\r\n  useEffect(() => {\r\n    let userName = localStorage.getItem('username');\r\n    if (userName) {\r\n      stableFetchUser(userName, setIsLoading, dispatch);\r\n    } else {\r\n      setIsLoading(false);\r\n    }\r\n  }, [stableFetchUser, dispatch]);\r\n\r\n  const request = get(user, 'request');\r\n  let msg = request ? \"User already registered, wait for authorization. Don't register again.\" : message;\r\n\r\n  const renderPage = () => {\r\n    if (isLoading) {\r\n      return (<div className=\"auth__loading\"><Loading size=\"xl\" message=\"Loading\" /></div>);\r\n    } else {\r\n      return (\r\n        <div className=\"auth__content\">\r\n          <Register\r\n            setMessage={(message: string) => setMessage(message)}\r\n            setIsLoading={(isLoading: boolean) => setIsLoading(isLoading)} />\r\n          <div className=\"auth__line\"></div>\r\n          <Login\r\n            setMessage={(message: string) => setMessage(message)}\r\n            setIsLoading={(isLoading: boolean) => setIsLoading(isLoading)} />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  if (isEmpty(user) || request) {\r\n    let userName = localStorage.getItem('username');\r\n    return (\r\n      <div className=\"auth\">\r\n        <div className=\"auth__header\">\r\n          <Media fileName=\"logo_2020_2\" format=\"jpg\" height=\"50\" width=\"50\" />\r\n          <h1 className=\"auth__title\">\r\n            <span className=\"auth__stuffie\">Stuffie</span>\r\n            <span className=\"auth__slogan\">Connecting Life</span>\r\n          </h1>\r\n        </div>\r\n        <div className=\"auth__horizontal-line\"></div>\r\n        <WarningMessage message={msg} type={getMessageType(msg)} />\r\n        {isLoading && (<div className=\"auth__loading\"><Loading size=\"xl\" message=\"Loading\" /></div>)}\r\n        {!userName && renderPage()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (user && products && products.length) {\r\n    return (<Main />);\r\n  } else {\r\n    return <FetchData />\r\n  }\r\n\r\n  // return (<Chat />);\r\n};\r\n\r\nexport default Auth;\r\n","import React from 'react';\r\nimport { Routes, Route } from 'react-router-dom';\r\n\r\nimport Auth from './Auth';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\n\r\nconst TopRoutes = () => {\r\n  return (\r\n    <Routes>\r\n      <Route path=\"/*\" element={<Auth />} />\r\n      <Route path=\"login\" element={<Login />} />\r\n      <Route path=\"register\" element={<Register />} />\r\n    </Routes>\r\n  );\r\n}\r\n\r\nexport default TopRoutes;\r\n","import React from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport { I18nextProvider } from 'react-i18next';\nimport { Provider } from 'react-redux';\n\nimport i18n from './config/i18n';\nimport TopRoutes from './components/main/TopRoutes';\nimport './App.scss';\nimport '../node_modules/@fortawesome/fontawesome-free/css/all.css';\n\nconst App = (props: any) => {\n\tconst { store } = props;\n\treturn (\n\t\t<div className=\"stuffie__app\">\n\t\t\t<Provider store={store}>\n\t\t\t\t<I18nextProvider i18n={i18n}>\n\t\t\t\t\t<BrowserRouter>\n\t\t\t\t\t\t<TopRoutes />\n\t\t\t\t\t</BrowserRouter>\n\t\t\t\t</I18nextProvider>\n\t\t\t</Provider>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import { combineReducers } from 'redux';\r\nimport { REVOKE_USER } from './constants';\r\n\r\n// For reducers\r\nimport categories from './categories/reducer';\r\nimport friends from './friends/reducer';\r\nimport products from './products/reducer';\r\nimport subcategories from './subcategories/reducer';\r\nimport user from './user/reducer';\r\nimport userRequests from './user-requests/reducer';\r\nimport friendsRequests from './friends-requests/reducer';\r\nimport exchangeRequests from './exchange-requests/reducer';\r\nimport pendingProducts from './pending-products/reducer';\r\nimport loanRequests from './loan-requests/reducer';\r\nimport spotifyConf from './spotify/reducer';\r\nimport feed from './feed/reducer';\r\n\r\n// To add object in state:\r\n// 1. Add reducer here\r\n// 2. Add type in State.ts\r\nconst appReducer = combineReducers({\r\n  user,\r\n  userRequests,\r\n  categories,\r\n  friends,\r\n  friendsRequests,\r\n  products,\r\n  subcategories,\r\n  exchangeRequests,\r\n  pendingProducts,\r\n  loanRequests,\r\n  spotifyConf,\r\n  feed                    // Make feed the last one?\r\n});\r\n\r\nconst rootReducer = (state, action) => {\r\n  if (action.type === REVOKE_USER) {\r\n    // Reducers are supposed to return the initial state when\r\n    // they are called with undefined as the first argument.\r\n    state = undefined;\r\n  }\r\n\r\n  return appReducer(state, action);\r\n};\r\n\r\nexport default rootReducer;\r\n","import { LOGIN_USER_FETCHED, USER_FETCHED, USER_PICTURE_ADDED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case LOGIN_USER_FETCHED:\r\n      return action.payload;\r\n    case USER_FETCHED:\r\n      return action.payload;\r\n    case USER_PICTURE_ADDED:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { USER_REQUESTS_FETCHED, USER_REQUEST_DELETED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case USER_REQUESTS_FETCHED:\r\n      return action.payload;\r\n    case USER_REQUEST_DELETED:\r\n      const userRequests = state.filter(item => item._id !== action.payload._id);\r\n      return userRequests;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { CATEGORY_ADDED, CATEGORIES_FETCHED, CATEGORY_FETCHED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case CATEGORY_ADDED:\r\n      const category = action.payload;\r\n      return [...state, category];\r\n    case CATEGORIES_FETCHED:\r\n      return action.payload;\r\n    case CATEGORY_FETCHED:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { FRIENDS_FETCHED, FRIEND_PRODUCTS_FETCHED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case FRIENDS_FETCHED:\r\n      return action.payload;\r\n    case FRIEND_PRODUCTS_FETCHED:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { FRIENDS_REQUESTS_FETCHED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case FRIENDS_REQUESTS_FETCHED:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { PRODUCT_ADDED, PRODUCTS_FETCHED, PRODUCT_UPDATED } from './constants';\r\nimport { findProduct } from '../../components/helpers/StuffHelper';\r\n\r\nexport default (state = [], action) => {\r\n  let product, products;\r\n\r\n  switch (action.type) {\r\n    case PRODUCT_ADDED:\r\n      product = action.payload;\r\n      products = state[product.category];\r\n\r\n      return {\r\n        ...state,\r\n        [product.category]: [...products, product]\r\n      };\r\n    case PRODUCT_UPDATED:\r\n      product = findProduct(action.payload.id_stuff, state);\r\n      products = state[product.category].filter(p => p.id !== product.id);\r\n      const productUpdated = {...product, cost: action.payload.cost};\r\n\r\n      return {\r\n        ...state,\r\n        [product.category]:  [...products, productUpdated]\r\n      };\r\n    case PRODUCTS_FETCHED:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { SUBCATEGORY_ADDED, SUBCATEGORIES_FETCHED, SUBCATEGORY_FETCHED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case SUBCATEGORY_ADDED:\r\n      const subcategory = action.payload;\r\n      return [...state, subcategory];\r\n    case SUBCATEGORIES_FETCHED:\r\n      return action.payload;\r\n    case SUBCATEGORY_FETCHED:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { EXCHANGES_FETCHED, EXCHANGE_DELETED, EXCHANGE_REQUESTED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case EXCHANGE_REQUESTED:\r\n      return [...state, action.payload];\r\n    case EXCHANGES_FETCHED:\r\n      return action.payload;\r\n    case EXCHANGE_DELETED:\r\n      const requests = state.filter(item => item._id !== action.payload);\r\n      return requests;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { PENDING_PRODUCTS_FETCHED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case PENDING_PRODUCTS_FETCHED:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { LOANS_FETCHED, LOAN_DELETED, LOAN_REQUESTED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case LOAN_REQUESTED:\r\n      return [...state, action.payload];\r\n    case LOANS_FETCHED:\r\n      return action.payload;\r\n    case LOAN_DELETED:\r\n      const requests = state.filter(item => item._id !== action.payload);\r\n      return requests;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { SPOTIFY_FETCHED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case SPOTIFY_FETCHED:\r\n      console.log(action.payload);\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","export const SPOTIFY_FETCHED = 'APPS::SPOTIFY_FETCHED';\r\n","import { FEED_FETCHED } from './constants';\r\n\r\nexport default (state = [], action) => {\r\n  switch (action.type) {\r\n    case FEED_FETCHED:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { applyMiddleware, createStore, compose } from 'redux';\nimport thunk from 'redux-thunk';\n\nimport App from './App';\nimport reducersApp from './redux/reducers';\nimport { unregister } from './serviceWorker';\n\nimport './sass/main.scss';\nimport './index.css';\n\nlet middleware = [thunk];\nconst composeEnhancers = (typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) || compose;\nmiddleware.push(require('redux-freeze'));\nconst store = createStore(reducersApp, composeEnhancers(applyMiddleware(...middleware)));\n\nReactDOM.render(\n  <App store={ store }/>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nunregister();\n"],"sourceRoot":""}